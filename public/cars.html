<!DOCTYPE html>
<html lang="zxx">

<head>
    <title>PlusRent - Multipurpose Vehicle Car Rental Website Template</title>
    <link rel="icon" href="images/icon.png" type="image/gif" sizes="16x16">
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="PlusRent - Multipurpose Vehicle Car Rental Website Template" name="description">
    <meta content="" name="keywords">
    <meta content="" name="author">
    <!-- CSS Files
    ================================================== -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" id="bootstrap">
    <link href="css/mdb.min.css" rel="stylesheet" type="text/css" id="mdb">
    <link href="css/plugins.css" rel="stylesheet" type="text/css">
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <link href="css/coloring.css" rel="stylesheet" type="text/css">
    <!-- color scheme -->
    <link id="colors" href="css/colors/scheme-01.css" rel="stylesheet" type="text/css">
    <!-- Cars Filter Modal CSS -->
    <link href="css/cars-filter-modal.css" rel="stylesheet" type="text/css">
    <!-- Ensure config.js is loaded first -->
    <script src="js/config.js"></script>
    <!-- i18n dependencies -->
    <script src="https://unpkg.com/i18next@21.6.14/dist/umd/i18next.min.js"></script>
    <script src="https://unpkg.com/i18next-http-backend@1.4.3/i18nextHttpBackend.min.js"></script>
    <script src="js/i18n-init.js"></script>
    <style>
      .lang-picker-wrapper { position: relative; display: inline-block; vertical-align: middle; }
      .lang-picker-btn {
        display: flex;
        align-items: center;
        gap: 7px;
        padding: 4px 12px;
        border-radius: 4px;
        border: 1px solid #e0e0e0;
        background: #f6f6f6;
        cursor: pointer;
        font-weight: 500;
        font-size: 14px;
        min-width: 80px;
        height: 36px;
        line-height: 1.2;
        transition: border 0.2s, box-shadow 0.2s;
        box-shadow: 0 1px 4px rgba(0,0,0,0.02);
        margin-left: 0;
      }
      .lang-picker-btn:focus, .lang-picker-btn[aria-expanded="true"] {
        outline: none;
        border-color: #f0c040;
        box-shadow: 0 2px 12px rgba(240,192,64,0.08);
      }
      .lang-picker-dropdown {
        display: none;
        position: absolute;
        top: 110%;
        left: 0;
        z-index: 1000;
        background: #fff;
        border: 1px solid #e0e0e0;
        border-radius: 6px;
        box-shadow: 0 4px 16px rgba(0,0,0,0.08);
        padding: 0;
        margin: 0;
        min-width: 120px;
        list-style: none;
      }
      .lang-picker-dropdown.open { display: block; }
      .lang-option {
        display: flex;
        align-items: center;
        gap: 7px;
        padding: 7px 14px;
        cursor: pointer;
        font-size: 14px;
        background: none;
        border: none;
        transition: background 0.15s, color 0.15s;
        height: 32px;
        line-height: 1.2;
      }
      .lang-option:focus, .lang-option:hover {
        background: #f0c04022;
        color: #031B4E;
        outline: none;
      }
      .lang-option.selected {
        background: #f0c04044;
        color: #031B4E;
        font-weight: 600;
      }
      .lang-flag {
        font-size: 18px;
        width: 20px;
        display: inline-block;
        text-align: center;
      }
      .lang-globe {
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      /* Premium car highlighting for public cars page */
      .de-item.premium {
        border: 3px solid #ffd700;
        box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);
        transform: scale(1.02);
        transition: all 0.3s ease;
      }

      .de-item.premium:hover {
        transform: scale(1.05);
        box-shadow: 0 12px 35px rgba(255, 215, 0, 0.4);
      }

      .premium-badge {
        position: absolute;
        top: 0px;
        left: 0px;
        background: linear-gradient(135deg, #ffd700, #ffed4e);
        color: #333;
        font-size: 0.6rem;
        font-weight: 700;
        letter-spacing: 0.04em;
        text-transform: uppercase;
        padding: 6px 12px 5px 12px;
        border-radius: 0 0 7px 0;
        z-index: 3;
        box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        border: none;
        max-width: 120px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      
      .lang-flag {
        width: 20px;
        height: 20px;
        margin-right: 3px;
      }
      .lang-code {
        font-weight: 600;
        margin: 0 2px 0 2px;
      }
      @media (max-width: 600px) {
        .lang-picker-btn { font-size: 12px; padding: 3px 7px; min-width: 60px; height: 30px; }
        .lang-picker-dropdown { min-width: 80px; }
        .lang-option { font-size: 12px; padding: 6px 8px; height: 26px; }
        .lang-flag { font-size: 15px; width: 15px; }
      }
      
      /* Car card button alignment */
      .d-text {
        display: flex;
        flex-direction: column;
        height: 100%;
        min-height: 200px;
      }
      
      .d-text .btn-main {
        margin-top: auto;
        align-self: flex-start;
      }
      
      .d-text .btn-unavailable {
        margin-top: auto;
        align-self: flex-start;
      }
      
      /* Call Now Button Styles */
      .call-now-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        background: linear-gradient(135deg, #1E90FF, #187bcd);
        color: white;
        padding: 10px 16px;
        border-radius: 25px;
        text-decoration: none;
        font-weight: 600;
        font-size: 14px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(30, 144, 255, 0.3);
        position: relative;
        overflow: hidden;
        animation: pulse 2s infinite;
      }
      
      .call-now-btn:hover {
        background: linear-gradient(135deg, #187bcd, #1565c0);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(30, 144, 255, 0.4);
        color: white;
        text-decoration: none;
      }
      
      .call-now-btn:active {
        transform: translateY(0);
      }
      
      .call-now-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s;
      }
      
      .call-now-btn:hover::before {
        left: 100%;
      }
      
      @keyframes pulse {
        0% {
          box-shadow: 0 4px 15px rgba(30, 144, 255, 0.3);
        }
        50% {
          box-shadow: 0 4px 20px rgba(30, 144, 255, 0.5);
        }
        100% {
          box-shadow: 0 4px 15px rgba(30, 144, 255, 0.3);
        }
      }
      
      @keyframes ring {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }
      
      .call-now-btn:hover i {
        animation: ring 0.6s ease-in-out;
      }
      
      /* Mobile responsive adjustments */
      @media (max-width: 768px) {
        .call-now-btn {
          padding: 8px 12px;
          font-size: 12px;
        }
        
        .call-now-btn i {
          font-size: 10px;
        }
        
        .call-now-btn span {
          display: none;
        }
        
        .call-now-btn i {
          margin: 0;
        }
      }
    </style>
</head>

<body>
    <div id="wrapper">
        
        <!-- page preloader begin -->
        <div id="de-preloader"></div>
        <!-- page preloader close -->

        <!-- header begin -->
        <header class="transparent scroll-light has-topbar">
            <div id="topbar" class="topbar-dark text-light">
                <div class="container">
                    <div class="topbar-left xs-hide">
                        <div class="topbar-widget">
                            <div class="topbar-widget"><a href="#"><i class="fa fa-phone"></i>+208 333 9296</a></div>
                            <div class="topbar-widget"><a href="#"><i class="fa fa-envelope"></i>contact@plusrent.com</a></div>
                            <div class="topbar-widget"><a href="#"><i class="fa fa-clock-o"></i>Mon - Fri 08.00 - 18.00</a></div>
                        </div>
                    </div>
                
                    <div class="topbar-right">
                        <div class="social-icons">
                            <a href="#"><i class="fa fa-facebook fa-lg"></i></a>
                            <a href="#"><i class="fa fa-twitter fa-lg"></i></a>
                            <a href="#"><i class="fa fa-youtube fa-lg"></i></a>
                            <a href="#"><i class="fa fa-pinterest fa-lg"></i></a>
                            <a href="#"><i class="fa fa-instagram fa-lg"></i></a>
                        </div>
                    </div>  
                    <div class="clearfix"></div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="de-flex sm-pt10">
                            <div class="de-flex-col">
                                <div class="de-flex-col">
                                    <!-- logo begin -->
                                    <div id="logo">
                                        <a href="index.html">
                                                            <img class="logo-1" src="images/LOGO-4-demo.png" alt="">
                <img class="logo-2" src="images/LOGO-5-demo.png" alt="">
                                        </a>
                                    </div>
                                    <!-- logo close -->
                                </div>
                            </div>
                            <div class="de-flex-col header-col-mid">
                                <ul id="mainmenu">
                                                    <li><a class="menu-item" href="/" data-i18n="menu.home"></a></li>
                <li><a class="menu-item" href="/cars" data-i18n="menu.cars"></a></li>
                <li><a class="menu-item" href="/about" data-i18n="menu.about"></a></li>
                <li><a class="menu-item" href="/contact" data-i18n="menu.contact"></a></li>
                <li><a class="menu-item" href="/sober-driver" data-i18n="menu.sober_driver"></a></li>
                                </ul>
                            </div>
                            <div class="de-flex-col">
                                <div class="menu_side_area" style="display: flex; align-items: center; justify-content: flex-end; gap: 12px; min-width: 240px;">
                                    <!-- Call Now Button -->
                                    <div class="call-now-wrapper" style="align-self:center; margin-right: 20px;">
                                        <a href="tel:+2083339296" class="call-now-btn" style="display: flex; align-items: center; gap: 8px; background: linear-gradient(135deg, #1E90FF, #187bcd); color: white; padding: 10px 16px; border-radius: 25px; text-decoration: none; font-weight: 600; font-size: 14px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(30, 144, 255, 0.3); position: relative; overflow: hidden;">
                                            <i class="fa fa-phone" style="font-size: 12px;"></i>
                                            <span data-i18n="call_now">Call Now</span>
                                        </a>
                                    </div>
                                    <!-- Language Picker -->
                                    <div class="lang-picker-wrapper" style="min-width:120px;align-self:center;">
                                      <button id="langPickerBtn" class="lang-picker-btn" aria-haspopup="listbox" aria-expanded="false" style="height:36px;display:flex;align-items:center;">
                                        <span class="lang-globe" id="langGlobe" style="display:inline-flex;align-items:center;justify-content:center;width:20px;height:20px;margin-right:3px;">
                                          <svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="9" stroke="#1ccfc9" stroke-width="2"/><ellipse cx="10" cy="10" rx="5" ry="9" stroke="#1ccfc9" stroke-width="2"/><path d="M1 10h18" stroke="#1ccfc9" stroke-width="2"/><path d="M3 4.5h14" stroke="#1ccfc9" stroke-width="1.2"/><path d="M3 15.5h14" stroke="#1ccfc9" stroke-width="1.2"/></svg>
                                        </span>
                                        <span class="lang-flag" id="langFlag"></span>
                                        <span id="langCode" style="font-weight:600;margin:0 2px 0 2px;">RO</span>
                                        <svg width="14" height="14" viewBox="0 0 20 20" style="margin-left:6px;"><path d="M5.5 8l4.5 4.5L14.5 8" stroke="#888" stroke-width="2" fill="none" stroke-linecap="round"/></svg>
                                      </button>
                                      <ul id="langDropdown" class="lang-picker-dropdown" tabindex="-1">
                                        <li class="lang-option" data-lang="ro" tabindex="0"><span class="lang-flag">ðŸ‡·ðŸ‡´</span> <span class="lang-code">RO</span></li>
                                        <li class="lang-option" data-lang="en" tabindex="0"><span class="lang-flag">ðŸ‡¬ðŸ‡§</span> <span class="lang-code">EN</span></li>
                                        <li class="lang-option" data-lang="ru" tabindex="0"><span class="lang-flag">ðŸ‡·ðŸ‡º</span> <span class="lang-code">RU</span></li>
                                      </ul>
                                    </div>
                                    <div id="menu-btn">
                                        <span></span>
                                        <span></span>
                                        <span></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
            <!-- header close -->
        <!-- content begin -->
        <div class="no-bottom no-top zebra" id="content">
            <div id="top"></div>
            
            <!-- section begin -->
            <section id="subheader" class="jarallax text-light">
                <img src="images/background/2.jpg" class="jarallax-img" alt="">
                    <div class="center-y relative text-center">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-12 text-center">
									<h1 data-i18n="menu.cars"></h1>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                    </div>
            </section>
            <!-- section close -->

            <!-- Sidebar filter and car list layout -->
<div class="container cars-main-container">
    <!-- Mobile Filter Button -->
    <div class="mobile-filter-button-container d-md-none">
        <button class="btn btn-primary mobile-filter-btn" onclick="toggleMobileFilter()">
            <i class="fa fa-filter"></i> <span data-i18n="cars.filter_cars">Filter Cars</span>
        </button>
    </div>
    
    <div class="row">
        <!-- Desktop Sidebar -->
        <div class="col-lg-3 col-md-4 small-sidebar d-none d-md-block">
            <div class="filter-sidebar">
                <div class="filter-title">
                    Filter
                    <a class="filter-clear" id="clear-filters-link" data-i18n="cars.filter_clear">Clear all filters</a>
                </div>
                <hr class="filter-divider">
                <div class="filter-category">
                    <h6 class="filter-section-title" data-i18n="cars.filter_make">Make</h6>
                    <div id="filter-make-options"></div>
                </div>
                <hr class="filter-divider">
                <div class="filter-category">
                    <h6 class="filter-section-title" data-i18n="cars.filter_gear">Gear</h6>
                    <div id="filter-gear-options"></div>
                </div>
                <hr class="filter-divider">
                <div class="filter-category">
                    <h6 class="filter-section-title" data-i18n="cars.filter_fuel">Fuel</h6>
                    <div id="filter-fuel-options"></div>
                </div>
                <hr class="filter-divider">
                <div class="filter-category">
                    <h6 class="filter-section-title" data-i18n="cars.filter_type">Type</h6>
                    <div id="filter-type-options"></div>
                </div>
                <hr class="filter-divider">
                <div class="filter-category">
                    <h6 class="filter-section-title" data-i18n="cars.filter_doors">Doors</h6>
                    <div id="filter-doors-options"></div>
                </div>
                <hr class="filter-divider">
                <div class="filter-category">
                    <h6 class="filter-section-title" data-i18n="cars.filter_passengers">Passengers</h6>
                    <div id="filter-passengers-options"></div>
                </div>
                <hr class="filter-divider">
                <div class="filter-category">
                    <h6 class="filter-section-title" data-i18n="cars.filter_price">Price</h6>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <input type="number" id="filter-price-min" class="form-control" placeholder="From" min="0" data-i18n="cars.filter_price_from">
                        <span>-</span>
                        <input type="number" id="filter-price-max" class="form-control" placeholder="To" min="0" data-i18n="cars.filter_price_to">
                    </div>
                </div>
                <hr class="filter-divider">
                <div class="filter-category">
                    <h6 class="filter-section-title" data-i18n="cars.filter_price_category">Price Category</h6>
                    <div class="filter-option-row">
                        <label>
                            <input type="radio" name="price-category" value="econom" id="price-category-econom">
                            <span class="option-label" data-i18n="cars.filter_econom">Econom</span>
                        </label>
                    </div>
                    <div class="filter-option-row">
                        <label>
                            <input type="radio" name="price-category" value="standard" id="price-category-standard">
                            <span class="option-label" data-i18n="cars.filter_standard">Standard</span>
                        </label>
                    </div>
                    <div class="filter-option-row">
                        <label>
                            <input type="radio" name="price-category" value="premium" id="price-category-premium">
                            <span class="option-label" data-i18n="cars.filter_premium">Premium</span>
                        </label>
                    </div>
                    <div class="filter-option-row">
                        <label>
                            <input type="radio" name="price-category" value="all" id="price-category-all" checked>
                            <span class="option-label" data-i18n="cars.filter_all_types">All Types</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Mobile Filter Overlay -->
        <div class="mobile-filter-overlay" id="mobile-filter-overlay">
            <div class="mobile-filter-sidebar">
                <div class="mobile-filter-header">
                    <h5 data-i18n="cars.filter_cars">Filter Cars</h5>
                    <button class="mobile-filter-close" onclick="toggleMobileFilter()">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
                <div class="mobile-filter-content">
                    <div id="mobile-filter-loading" class="text-center py-4">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-2 text-muted" data-i18n="cars.loading_filters">Loading filters...</p>
                    </div>
                    <div id="mobile-filter-options" style="display: none;">
                        <div class="filter-category">
                            <h6 class="filter-section-title" data-i18n="cars.filter_make">Make</h6>
                            <div id="mobile-filter-make-options"></div>
                        </div>
                    <hr class="filter-divider">
                    <div class="filter-category">
                        <h6 class="filter-section-title" data-i18n="cars.filter_gear">Gear</h6>
                        <div id="mobile-filter-gear-options"></div>
                    </div>
                    <hr class="filter-divider">
                    <div class="filter-category">
                        <h6 class="filter-section-title" data-i18n="cars.filter_fuel">Fuel</h6>
                        <div id="mobile-filter-fuel-options"></div>
                    </div>
                    <hr class="filter-divider">
                    <div class="filter-category">
                        <h6 class="filter-section-title" data-i18n="cars.filter_type">Type</h6>
                        <div id="mobile-filter-type-options"></div>
                    </div>
                    <hr class="filter-divider">
                    <div class="filter-category">
                        <h6 class="filter-section-title" data-i18n="cars.filter_doors">Doors</h6>
                        <div id="mobile-filter-doors-options"></div>
                    </div>
                    <hr class="filter-divider">
                    <div class="filter-category">
                        <h6 class="filter-section-title" data-i18n="cars.filter_passengers">Passengers</h6>
                        <div id="mobile-filter-passengers-options"></div>
                    </div>
                    <hr class="filter-divider">
                    <div class="filter-category">
                        <h6 class="filter-section-title" data-i18n="cars.filter_price">Price</h6>
                        <div style="display: flex; gap: 8px; align-items: center;">
                            <input type="number" id="mobile-filter-price-min" class="form-control" placeholder="From" min="0" data-i18n="cars.filter_price_from">
                            <span>-</span>
                            <input type="number" id="mobile-filter-price-max" class="form-control" placeholder="To" min="0" data-i18n="cars.filter_price_to">
                        </div>
                    </div>
                    <hr class="filter-divider">
                    <div class="filter-category">
                        <h6 class="filter-section-title" data-i18n="cars.filter_price_category">Price Category</h6>
                        <div class="filter-option-row">
                            <label>
                                <input type="radio" name="mobile-price-category" value="econom" id="mobile-price-category-econom">
                                <span class="option-label" data-i18n="cars.filter_econom">Econom</span>
                            </label>
                        </div>
                        <div class="filter-option-row">
                            <label>
                                <input type="radio" name="mobile-price-category" value="standard" id="mobile-price-category-standard">
                                <span class="option-label" data-i18n="cars.filter_standard">Standard</span>
                            </label>
                        </div>
                        <div class="filter-option-row">
                            <label>
                                <input type="radio" name="mobile-price-category" value="premium" id="mobile-price-category-premium">
                                <span class="option-label" data-i18n="cars.filter_premium">Premium</span>
                            </label>
                        </div>
                        <div class="filter-option-row">
                            <label>
                                <input type="radio" name="mobile-price-category" value="all" id="mobile-price-category-all" checked>
                                <span class="option-label" data-i18n="cars.filter_all_types">All Types</span>
                            </label>
                        </div>
                    </div>
                    </div>
                    <div class="mobile-filter-actions">
                        <button class="btn btn-outline-secondary" onclick="clearAllFilters()">
                            <i class="fa fa-times"></i> <span data-i18n="cars.filter_clear">Clear All</span>
                        </button>
                        <button class="btn btn-primary" onclick="applyMobileFilters()">
                            <i class="fa fa-check"></i> <span data-i18n="cars.apply_filters">Apply Filters</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Content Area -->
        <div class="col-lg-9 col-md-8 col-12">
            <div class="row car-list-row" id="car-list"></div>
        </div>
    </div>
</div>

<style>
/* Responsive grid adjustments to prevent overlapping */
@media (min-width: 992px) {
  .col-lg-3 {
    width: 25%;
    flex: 0 0 25%;
    max-width: 25%;
  }
  .col-lg-9 {
    width: 75%;
    flex: 0 0 75%;
    max-width: 75%;
  }
}

@media (min-width: 768px) and (max-width: 991px) {
  .col-md-4 {
    width: 33.333333%;
    flex: 0 0 33.333333%;
    max-width: 33.333333%;
  }
  .col-md-8 {
    width: 66.666667%;
    flex: 0 0 66.666667%;
    max-width: 66.666667%;
  }
}

.cars-main-container {
  padding-top: 2.5rem;
  padding-bottom: 2.5rem;
}

.small-sidebar {
  /* Remove max-width constraint that was causing issues */
}
.filter-sidebar {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  padding: 15px;
  width: 100%;
  max-width: 100%;
}
.filter-title {
  font-size: 1.35rem;
  font-weight: 700;
  margin-bottom: 0.7rem;
  letter-spacing: 0.01em;
}
.filter-clear {
  float: right;
  color: #1976d2;
  font-size: 0.8rem;
  font-weight: 500;
  cursor: pointer;
  text-decoration: none;
}
.filter-divider {
  border: none;
  border-top: 1.5px solid #9e9797;
  margin: 1.1rem 0 1.1rem 0;
}
.filter-section-title {
  font-size: 1.08rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  margin-top: 1.2rem;
  letter-spacing: 0.01em;
}
.filter-option-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-right: 2px;
  margin-bottom: 6px;
}
.filter-option-row label {
  display: flex;
  align-items: center;
  font-size: 1rem;
  font-weight: 400;
  cursor: pointer;
  flex: 1 1 auto;
}
.filter-option-row input[type=checkbox] {
  width: 20px;
  height: 20px;
  margin-right: 10px;
  accent-color: #1976d2;
}
.option-label {
  margin-right: 8px;
}
.option-count {
  color: #222;
  font-size: 1rem;
  font-weight: 500;
}

/* Disabled filter option styles */
.filter-option-row.disabled-option {
  opacity: 0.5;
  pointer-events: none;
}

.filter-option-row.disabled-option label {
  cursor: not-allowed;
}

.filter-option-row.disabled-option input[type=checkbox] {
  cursor: not-allowed;
  opacity: 0.6;
}

.option-label.disabled-text {
  color: #999;
}

.option-count.disabled-count {
  color: #999;
  font-weight: 400;
}

.option-count {
  min-width: 24px;
  text-align: right;
  margin-left: 10px;
  background: none;
  padding: 0;
  border-radius: 0;
  display: inline-block;
  text-align: left;
}
.car-list-row {
  margin-left: 0;
  margin-right: 0;
  gap: 1.5rem 0;
  justify-content: flex-start;
}

/* Additional responsive adjustments */
@media (max-width: 767px) {
  .cars-main-container {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }
  
  .car-list-row {
    gap: 1rem 0;
    justify-content: flex-start;
  }
}

@media (min-width: 768px) and (max-width: 991px) {
  .filter-sidebar {
    padding: 12px;
  }
  
  .filter-title {
    font-size: 1.2rem;
  }
  
  .filter-section-title {
    font-size: 1rem;
  }
}
.car-list-row > .col-xl-4, .car-list-row > .col-lg-4 {
  padding-left: 10px;
  padding-right: 10px;
  margin-bottom: 24px;
  max-width: 320px;
  flex: 1 1 260px;
  min-width: 240px;
  display: flex;
}
.de-item.mb30 {
  transition: box-shadow 0.25s, transform 0.25s;
  margin-bottom: 0 !important;
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  padding: 0.7rem 0.7rem 1.1rem 0.7rem;
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 420px;
}
.car-unavailable {
  opacity: 0.6;
  pointer-events: none;
  filter: grayscale(0.7);
}
.img-unavailable img{
    filter: grayscale(0.22) brightness(0.96);
}
.btn-main.disabled, .btn-main[aria-disabled="true"] {
  background: #aaa !important;
  color: #fff !important;
  cursor: not-allowed !important;
  pointer-events: none;
}
.booked-until-badge {
  position: absolute;
  top: 12px;
  left: 12px;
  background: rgba(60,60,60,0.82);
  color: #fff;
  font-size: 0.98rem;
  font-weight: 500;
  padding: 6px 14px;
  border-radius: 6px;
  z-index: 2;
  box-shadow: 0 2px 8px rgba(0,0,0,0.10);
  pointer-events: none;
}
.d-img {
  position: relative;
  margin-bottom: 1rem;
  border-radius: 8px;
  overflow: hidden;
  background: #f8f9fa;
  min-height: 160px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.d-img img {
  width: 100%;
  height: auto;
  object-fit: contain;
  max-height: 160px;
}

.d-info {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.d-text {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 200px;
}

.d-text .btn-main {
  margin-top: auto;
  align-self: flex-start;
}

.d-text .btn-unavailable {
  margin-top: auto;
  align-self: flex-start;
}

.unavailable-badge {
  position: absolute;
  top: 0px;
  right: 0;
  background: #ff6b5b;
  color: #fff;
  font-size: 0.52rem;
  font-weight: 700;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  padding: 5px 14px 4px 14px;
  border-radius: 7px;
  z-index: 2;
  box-shadow: 0 2px 8px rgba(0,0,0,0.10);
  pointer-events: none;
  border: none;
}
.btn-unavailable {
  background: #ececec !important;
  color: #888 !important;
  border: 2px solid #ececec !important;
  cursor: not-allowed !important;
  pointer-events: none;
  font-weight: 700;
  border-radius: 8px;
  /* padding: 0.7rem 2.2rem; */
  /* margin-top: 0.7rem; */
  display: inline-block;
  box-shadow: 0 1px 4px rgba(0,0,0,0.04);
  transition: background 0.2s, color 0.2s, border 0.2s;
}
.btn-main {
  transition: background 0.2s, color 0.2s, border 0.2s, box-shadow 0.2s;
}
.filter-option-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-right: 2px;
  margin-bottom: 2px;
}
.option-label {
  margin-right: 8px;
}

/* Mobile Filter Styles */
.mobile-filter-button-container {
  margin-bottom: 1rem;
  text-align: center;
}

.mobile-filter-btn {
  width: 100%;
  max-width: 300px;
  padding: 12px 24px;
  font-size: 16px;
  font-weight: 500;
}

.mobile-filter-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 9999;
  display: none;
  backdrop-filter: blur(2px);
}

.mobile-filter-sidebar {
  position: fixed;
  top: 0;
  left: 0;
  width: 85%;
  max-width: 350px;
  height: 100%;
  background: white;
  box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
  overflow-y: auto;
  transform: translateX(-100%);
  transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: transform;
}

.mobile-filter-overlay.active {
  display: block;
}

.mobile-filter-overlay.active .mobile-filter-sidebar {
  transform: translateX(0);
}

.mobile-filter-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.5rem;
  border-bottom: 1px solid #e0e0e0;
  background: #f8f9fa;
  position: sticky;
  top: 0;
  z-index: 1;
}

.mobile-filter-header h5 {
  margin: 0;
  font-weight: 600;
  color: #333;
}

.mobile-filter-close {
  background: none;
  border: none;
  font-size: 1.5rem;
  color: #666;
  cursor: pointer;
  padding: 0;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: background-color 0.2s;
}

.mobile-filter-close:hover {
  background-color: #e9ecef;
}

.mobile-filter-content {
  padding: 1.5rem;
}

.mobile-filter-actions {
  position: sticky;
  bottom: 0;
  background: white;
  padding: 1rem 1.5rem;
  border-top: 1px solid #e0e0e0;
  display: flex;
  gap: 0.5rem;
  margin-top: 2rem;
}

.mobile-filter-actions .btn {
  flex: 1;
  padding: 12px;
  font-weight: 500;
}

@media (max-width: 991px) {
  .small-sidebar { display: none; }
  .cars-main-container { padding-left: 0.5rem; padding-right: 0.5rem; }
}
@media (max-width: 600px) {
  .car-list-row > .col-xl-4, .car-list-row > .col-lg-4 {
    min-width: 100%;
    max-width: 100%;
    padding-left: 0;
    padding-right: 0;
  }
  .cars-main-container { padding-left: 0.2rem; padding-right: 0.2rem; }
}
</style>

<script>
// Global formatting function
function formatDisplayText(rawKey) {
  if (!rawKey) return '';
  return rawKey
    .split('_')
    .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())
    .join(' ');
}

// Helper: get all unique values for a field from cars array
function getUniqueOptions(cars, field) {
  return Array.from(new Set(cars.map(car => car[field]).filter(Boolean))).sort();
}

// Render checkboxes for a filter category
function renderFilterOptions(containerId, options, selectedValues, allCarsFull, currentFilters, field) {
  const container = document.getElementById(containerId);
  if (!container) return;
  
  // Pre-calculate counts for better performance
  const countCache = new Map();
  
  // Only calculate counts if we have data
  if (allCarsFull && allCarsFull.length > 0) {
    options.forEach(opt => {
      const count = allCarsFull.filter(car => {
        // Check if this specific car matches the current option
        if (String(car[field]) !== String(opt)) return false;
        
        // Check if it matches all other current filters
        for (const key in currentFilters) {
          if (key === field) continue; // Skip the current field we're calculating for
          if (!currentFilters[key] || !currentFilters[key].length) continue;
          if (!currentFilters[key].includes(String(car[key]))) return false;
        }
        return true;
      }).length;
      countCache.set(opt, count);
    });
  }
  
  // Build HTML string more efficiently
  const html = options.map(opt => {
    const count = countCache.get(opt) || 0;
    const isSelected = selectedValues.includes(String(opt));
    const isDisabled = count === 0 && !isSelected; // Disable if count is 0 and not selected
    
    return `
      <div class="filter-option-row ${isDisabled ? 'disabled-option' : ''}">
        <label>
          <input type="checkbox" value="${opt}" ${isSelected ? 'checked' : ''} ${isDisabled ? 'disabled' : ''}>
          <span class="option-label ${isDisabled ? 'disabled-text' : ''}">${opt}</span>
        </label>
        <span class="option-count ${isDisabled ? 'disabled-count' : ''}">${count}</span>
      </div>
    `;
  }).join('');
  
  container.innerHTML = html;
}

function getCurrentSidebarFilters() {
  const params = new URLSearchParams(window.location.search);
  return {
    make_name: params.get('make_name') ? params.get('make_name').split(',') : [],
    gear_type: params.get('gear_type') ? params.get('gear_type').split(',') : [],
    fuel_type: params.get('fuel_type') ? params.get('fuel_type').split(',') : [],
    car_type: params.get('car_type') ? params.get('car_type').split(',') : [],
    num_doors: params.get('num_doors') ? params.get('num_doors').split(',') : [],
    num_passengers: params.get('num_passengers') ? params.get('num_passengers').split(',') : [],
    // price is not included in count logic for now
  };
}

// Get selected values from all checkboxes in a container
function getSelectedValues(containerId) {
  return Array.from(document.querySelectorAll(`#${containerId} input[type=checkbox]:checked`)).map(cb => cb.value);
}

// Update URL and fetch cars
function updateFiltersAndFetch() {
  const make = getSelectedValues('filter-make-options');
  const gear = getSelectedValues('filter-gear-options');
  const fuel = getSelectedValues('filter-fuel-options');
  const type = getSelectedValues('filter-type-options');
  const doors = getSelectedValues('filter-doors-options');
  const passengers = getSelectedValues('filter-passengers-options');
  const priceMin = document.getElementById('filter-price-min').value;
  const priceMax = document.getElementById('filter-price-max').value;
  const params = new URLSearchParams();
  if (make.length) params.set('make_name', make.join(','));
  if (gear.length) params.set('gear_type', gear.join(','));
  if (fuel.length) params.set('fuel_type', fuel.join(','));
  if (type.length) params.set('car_type', type.join(','));
  if (doors.length) params.set('num_doors', doors.join(','));
  if (passengers.length) params.set('num_passengers', passengers.join(','));
  if (priceMin) params.set('min_price', priceMin);
  if (priceMax) params.set('max_price', priceMax);
  const newUrl = window.location.pathname + (params.toString() ? '?' + params.toString() : '');
  window.history.pushState({}, '', newUrl);
  fetchAndRenderCars();
}

// Fetch and render cars based on current filters
async function fetchAndRenderCars() {
  const carListDiv = document.getElementById('car-list');
  const res = await fetch(`${window.API_BASE_URL}/api/cars${window.location.search}`);
  const cars = await res.json();
  if (!cars.length) {
    carListDiv.innerHTML = '<div data-i18n="cars.no_cars">No cars available.</div>';
    renderSidebarOptions(allCarsFullCache); // Always use the full cache to keep all filter options visible
    return;
  }
  carListDiv.innerHTML = cars.map(car => {
    // Check if car is unavailable (booked until a future date)
    const isUnavailable = car.booked_until && (() => {
      const bookedUntil = new Date(car.booked_until);
      const now = new Date();
      now.setHours(0, 0, 0, 0); // Compare dates only
      bookedUntil.setHours(0, 0, 0, 0); // Compare dates only
      return bookedUntil >= now; // Only unavailable if booked until today or future
    })();
    
    let badge = '';
    if (isUnavailable && car.booked_until) {
      const d = new Date(car.booked_until);
      const options = { day: '2-digit', month: 'short', year: 'numeric' };
      const formatted = d.toLocaleDateString(undefined, options).toUpperCase();
      badge = `<div class="unavailable-badge" data-i18n="cars.unavailable_until" data-i18n-date="${formatted}">UNAVAILABLE UNTIL ${formatted}</div>`;
    }
    const isPremium = car.is_premium === 1 || car.is_premium === true;
    return `
                                <div class="col-xl-4 col-lg-4 col-md-6">
                                    <div class="de-item mb30${isPremium ? ' premium' : ''}${isUnavailable ? ' car-unavailable' : ''}">
          <div class="d-img${isUnavailable ? ' img-unavailable' : ''}">
            <img src="${car.head_image && car.head_image.startsWith('http') ? car.head_image : (car.head_image ? window.API_BASE_URL + car.head_image : window.API_BASE_URL + '/uploads/placeholder.png')}" class="img-fluid" alt="">
            ${badge}
            ${isPremium ? '<div class="premium-badge">PREMIUM</div>' : ''}
                                        </div>
                                        <div class="d-info">
                                            <div class="d-text">
              <h4>${formatDisplayText(car.make_name)}</h4>
              <p>${formatDisplayText(car.model_name)}</p>
                                                <div class="d-item_like">
                <i class="fa fa-heart"></i><span>${car.likes || 0}</span>
                                        </div>
                                        <div class="d-atr-group">
                <span class="d-atr"><img src="images/icons/1-green.svg" alt=""><span data-i18n="cars.filter_passengers"></span> ${car.num_passengers || '-'}</span>
                <span class="d-atr"><img src="images/icons/2-green.svg" alt=""><span data-i18n="cars.filter_doors"></span> ${car.num_doors || '-'}</span>
                <span class="d-atr"><img src="images/icons/3-green.svg" alt="">${car.luggage || '-'}</span>
                <span class="d-atr"><img src="images/icons/4-green.svg" alt=""><span data-i18n="car_types.${car.car_type?.toLowerCase() || 'car'}">${car.car_type || '-'}</span></span>
                                                </div>
              <div class="d-price" data-i18n="cars.daily_rate">Daily rate from <span>${car.price_policy ? car.price_policy['1-2'] + 'â‚¬' : ''}</span></div>
              ${isUnavailable
                  ? '<span class="btn-main btn-unavailable" tabindex="-1" aria-disabled="true" data-i18n="cars.not_available">Not Available</span>'
                  : `<a class="btn-main" href="car-single?id=${car.id}" data-i18n="cars.rent_now">Rent Now</a>`}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
    `;
  }).join('');
  renderSidebarOptions(allCarsFullCache); // Use the cached full list for sidebar
  
  // Update i18n translations for dynamically added content
  if (typeof updateContent === 'function') {
    updateContent();
  }
}

// Render sidebar options and attach event listeners
function renderSidebarOptions(allCarsFull) {
  const params = new URLSearchParams(window.location.search);
  const selectedMakes = params.get('make_name') ? params.get('make_name').split(',') : [];
  const selectedGears = params.get('gear_type') ? params.get('gear_type').split(',') : [];
  const selectedFuels = params.get('fuel_type') ? params.get('fuel_type').split(',') : [];
  const selectedTypes = params.get('car_type') ? params.get('car_type').split(',') : [];
  const selectedDoors = params.get('num_doors') ? params.get('num_doors').split(',') : [];
  const selectedPassengers = params.get('num_passengers') ? params.get('num_passengers').split(',') : [];
  const priceMin = params.get('min_price') ? params.get('min_price') : '';
  const priceMax = params.get('max_price') ? params.get('max_price') : '';
  const currentFilters = getCurrentSidebarFilters();

  renderFilterOptions('filter-make-options', getUniqueOptions(allCarsFull, 'make_name'), selectedMakes, allCarsFull, currentFilters, 'make_name');
  renderFilterOptions('filter-gear-options', getUniqueOptions(allCarsFull, 'gear_type'), selectedGears, allCarsFull, currentFilters, 'gear_type');
  renderFilterOptions('filter-fuel-options', getUniqueOptions(allCarsFull, 'fuel_type'), selectedFuels, allCarsFull, currentFilters, 'fuel_type');
  renderFilterOptions('filter-type-options', getUniqueOptions(allCarsFull, 'car_type'), selectedTypes, allCarsFull, currentFilters, 'car_type');
  renderFilterOptions('filter-doors-options', getUniqueOptions(allCarsFull, 'num_doors'), selectedDoors, allCarsFull, currentFilters, 'num_doors');
  renderFilterOptions('filter-passengers-options', getUniqueOptions(allCarsFull, 'num_passengers'), selectedPassengers, allCarsFull, currentFilters, 'num_passengers');
  document.getElementById('filter-price-min').value = priceMin;
  document.getElementById('filter-price-max').value = priceMax;
  
  // Set price category radio button based on current price range
  const priceCategoryRadios = document.querySelectorAll('input[name="price-category"]');
  priceCategoryRadios.forEach(radio => {
    radio.checked = false;
  });
  
  // Determine which category matches the current price range
  if (priceMin === '0' && priceMax === '30') {
    document.getElementById('price-category-econom').checked = true;
  } else if (priceMin === '31' && priceMax === '60') {
    document.getElementById('price-category-standard').checked = true;
  } else if (priceMin === '61' && priceMax === '') {
    document.getElementById('price-category-premium').checked = true;
  } else {
    document.getElementById('price-category-all').checked = true;
  }

  // Attach change listeners
  ['filter-make-options','filter-gear-options','filter-fuel-options','filter-type-options','filter-doors-options','filter-passengers-options'].forEach(id => {
    document.getElementById(id).querySelectorAll('input[type=checkbox]').forEach(cb => {
      cb.addEventListener('change', updateFiltersAndFetch);
    });
  });
  document.getElementById('filter-price-min').addEventListener('change', updateFiltersAndFetch);
  document.getElementById('filter-price-max').addEventListener('change', updateFiltersAndFetch);
  
  // Add price category radio button handlers
  document.querySelectorAll('input[name="price-category"]').forEach(radio => {
    radio.addEventListener('change', handlePriceCategoryChange);
  });
}

// Handle price category radio button changes
function handlePriceCategoryChange(e) {
  const selectedCategory = e.target.value;
  
  // Clear existing price filters
  document.getElementById('filter-price-min').value = '';
  document.getElementById('filter-price-max').value = '';
  
  // Apply new filter based on category
  switch (selectedCategory) {
    case 'econom':
      document.getElementById('filter-price-min').value = '0';
      document.getElementById('filter-price-max').value = '30';
      break;
    case 'standard':
      document.getElementById('filter-price-min').value = '31';
      document.getElementById('filter-price-max').value = '60';
      break;
    case 'premium':
      document.getElementById('filter-price-min').value = '61';
      document.getElementById('filter-price-max').value = '';
      break;
    case 'all':
      // No price filter - already cleared above
      break;
  }
  
  // Update filters and fetch cars
  updateFiltersAndFetch();
}

// Mobile Filter Functions
function toggleMobileFilter() {
  const overlay = document.getElementById('mobile-filter-overlay');
  if (!overlay) return;
  
  if (overlay.classList.contains('active')) {
    // Close filter
    overlay.classList.remove('active');
    document.body.style.overflow = '';
  } else {
    // Open filter - optimize by showing overlay first, then populating
    overlay.classList.add('active');
    document.body.style.overflow = 'hidden';
    
    // Populate mobile filter options asynchronously for better perceived performance
    setTimeout(() => {
      renderMobileFilterOptions();
    }, 50); // Small delay to let the animation start
  }
}

function renderMobileFilterOptions() {
  // Show loading state first
  const loadingEl = document.getElementById('mobile-filter-loading');
  const optionsEl = document.getElementById('mobile-filter-options');
  if (loadingEl) loadingEl.style.display = 'block';
  if (optionsEl) optionsEl.style.display = 'none';
  
  // Cache DOM elements for better performance
  const params = new URLSearchParams(window.location.search);
  const selectedMakes = params.get('make_name') ? params.get('make_name').split(',') : [];
  const selectedGears = params.get('gear_type') ? params.get('gear_type').split(',') : [];
  const selectedFuels = params.get('fuel_type') ? params.get('fuel_type').split(',') : [];
  const selectedTypes = params.get('car_type') ? params.get('car_type').split(',') : [];
  const selectedDoors = params.get('num_doors') ? params.get('num_doors').split(',') : [];
  const selectedPassengers = params.get('num_passengers') ? params.get('num_passengers').split(',') : [];
  const priceMin = params.get('min_price') ? params.get('min_price') : '';
  const priceMax = params.get('max_price') ? params.get('max_price') : '';
  
  // Use cached filter data instead of recalculating
  const currentFilters = getCurrentSidebarFilters();

  // Batch DOM updates for better performance
  requestAnimationFrame(() => {
    // Render mobile filter options
    renderFilterOptions('mobile-filter-make-options', getUniqueOptions(allCarsFullCache, 'make_name'), selectedMakes, allCarsFullCache, currentFilters, 'make_name');
    renderFilterOptions('mobile-filter-gear-options', getUniqueOptions(allCarsFullCache, 'gear_type'), selectedGears, allCarsFullCache, currentFilters, 'gear_type');
    renderFilterOptions('mobile-filter-fuel-options', getUniqueOptions(allCarsFullCache, 'fuel_type'), selectedFuels, allCarsFullCache, currentFilters, 'fuel_type');
    renderFilterOptions('mobile-filter-type-options', getUniqueOptions(allCarsFullCache, 'car_type'), selectedTypes, allCarsFullCache, currentFilters, 'car_type');
    renderFilterOptions('mobile-filter-doors-options', getUniqueOptions(allCarsFullCache, 'num_doors'), selectedDoors, allCarsFullCache, currentFilters, 'num_doors');
    renderFilterOptions('mobile-filter-passengers-options', getUniqueOptions(allCarsFullCache, 'num_passengers'), selectedPassengers, allCarsFullCache, currentFilters, 'num_passengers');
    
    // Update price inputs
    const priceMinEl = document.getElementById('mobile-filter-price-min');
    const priceMaxEl = document.getElementById('mobile-filter-price-max');
    if (priceMinEl) priceMinEl.value = priceMin;
    if (priceMaxEl) priceMaxEl.value = priceMax;
    
    // Hide loading and show options
    if (loadingEl) loadingEl.style.display = 'none';
    if (optionsEl) optionsEl.style.display = 'block';
  });
}

function applyMobileFilters() {
  // Get values from mobile filter inputs
  const make = getSelectedValues('mobile-filter-make-options');
  const gear = getSelectedValues('mobile-filter-gear-options');
  const fuel = getSelectedValues('mobile-filter-fuel-options');
  const type = getSelectedValues('mobile-filter-type-options');
  const doors = getSelectedValues('mobile-filter-doors-options');
  const passengers = getSelectedValues('mobile-filter-passengers-options');
  const priceMin = document.getElementById('mobile-filter-price-min').value;
  const priceMax = document.getElementById('mobile-filter-price-max').value;
  
  // Handle mobile price category selection
  const mobilePriceCategory = document.querySelector('input[name="mobile-price-category"]:checked');
  if (mobilePriceCategory && mobilePriceCategory.value !== 'all') {
    // Clear manual price inputs and apply category filter
    document.getElementById('mobile-filter-price-min').value = '';
    document.getElementById('mobile-filter-price-max').value = '';
    
    switch (mobilePriceCategory.value) {
      case 'econom':
        document.getElementById('mobile-filter-price-min').value = '0';
        document.getElementById('mobile-filter-price-max').value = '30';
        break;
      case 'standard':
        document.getElementById('mobile-filter-price-min').value = '31';
        document.getElementById('mobile-filter-price-max').value = '60';
        break;
      case 'premium':
        document.getElementById('mobile-filter-price-min').value = '61';
        document.getElementById('mobile-filter-price-max').value = '';
        break;
    }
  }

  // Build query parameters
  const params = new URLSearchParams();
  if (make.length > 0) params.set('make_name', make.join(','));
  if (gear.length > 0) params.set('gear_type', gear.join(','));
  if (fuel.length > 0) params.set('fuel_type', fuel.join(','));
  if (type.length > 0) params.set('car_type', type.join(','));
  if (doors.length > 0) params.set('num_doors', doors.join(','));
  if (passengers.length > 0) params.set('num_passengers', passengers.join(','));
  if (priceMin) params.set('min_price', priceMin);
  if (priceMax) params.set('max_price', priceMax);

  // Update URL and fetch cars
  const newUrl = window.location.pathname + (params.toString() ? '?' + params.toString() : '');
  window.history.pushState({}, '', newUrl);
  
  // Fetch and render cars
  fetchAndRenderCars();
  
  // Close mobile filter
  toggleMobileFilter();
}

function clearAllFilters() {
  // Clear all mobile filter inputs
  document.querySelectorAll('#mobile-filter-overlay input[type=checkbox]').forEach(cb => cb.checked = false);
  document.getElementById('mobile-filter-price-min').value = '';
  document.getElementById('mobile-filter-price-max').value = '';
  
  // Reset price category radio buttons to "All Types"
  document.querySelectorAll('input[name="mobile-price-category"]').forEach(radio => {
    radio.checked = radio.value === 'all';
  });
}

// Close mobile filter when clicking outside
document.addEventListener('DOMContentLoaded', function() {
  const overlay = document.getElementById('mobile-filter-overlay');
  overlay.addEventListener('click', function(e) {
    if (e.target === overlay) {
      toggleMobileFilter();
    }
  });
});

// Initial load
// On page load, fetch all cars once for sidebar options
let allCarsFullCache = [];
fetch(`${window.API_BASE_URL}/api/cars`).then(res => res.json()).then(allCarsFull => {
  allCarsFullCache = allCarsFull;
  renderSidebarOptions(allCarsFull);
});

window.addEventListener('popstate', fetchAndRenderCars);
document.addEventListener('DOMContentLoaded', fetchAndRenderCars);

document.getElementById('clear-filters-link').addEventListener('click', function(e) {
  e.preventDefault();
  window.history.pushState({}, '', window.location.pathname);
  fetchAndRenderCars();
  renderSidebarOptions(allCarsFullCache);
});
</script>
			
			
        </div>
        <!-- content close -->

        <a href="#" id="back-to-top"></a>
        
        <!-- footer begin -->
        <footer class="text-light">
            <div class="container">
                <div class="row g-custom-x">
                    <div class="col-lg-3">
                        <div class="widget">
                            <h5>About PlusRent</h5>
                            <p>Where quality meets affordability. We understand the importance of a smooth and enjoyable journey without the burden of excessive costs. That's why we have meticulously crafted our offerings to provide you with top-notch vehicles at minimum expense.</p>
                        </div>
                    </div>
                    
                    <div class="col-lg-3">
                        <div class="widget">
                            <h5>Contact Info</h5>
                            <address class="s1">
                                <span><i class="id-color fa fa-map-marker fa-lg"></i>08 W 36th St, New York, NY 10001</span>
                                <span><i class="id-color fa fa-phone fa-lg"></i>+1 333 9296</span>
                                <span><i class="id-color fa fa-envelope-o fa-lg"></i><a href="mailto:contact@example.com">contact@example.com</a></span>
                                <span><i class="id-color fa fa-file-pdf-o fa-lg"></i><a href="#">Download Brochure</a></span>
                            </address>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <h5>Quick Links</h5>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="widget">
                                    <ul>
                                        <li><a href="#">About</a></li>
                                        <li><a href="#">Blog</a></li>
                                        <li><a href="#">Careers</a></li>
                                        <li><a href="#">News</a></li>
                                        <li><a href="#">Partners</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="widget">
                            <h5>Social Network</h5>
                            <div class="social-icons">
                                <a href="#"><i class="fa fa-facebook fa-lg"></i></a>
                                <a href="#"><i class="fa fa-twitter fa-lg"></i></a>
                                <a href="#"><i class="fa fa-linkedin fa-lg"></i></a>
                                <a href="#"><i class="fa fa-pinterest fa-lg"></i></a>
                                <a href="#"><i class="fa fa-rss fa-lg"></i></a>
                            </div>
                        </div>    
                    </div>
                </div>
            </div>
            <div class="subfooter">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="de-flex">
                                <div class="de-flex-col">
                                    <a href="index.html">
                                        Copyright 2025 - PlusRent by Designesia
                                    </a>
                                </div>
                                <ul class="menu-simple">
                                                    <li><a href="#" data-i18n="footer.terms"></a></li>
                <li><a href="#" data-i18n="footer.privacy"></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <!-- footer close -->
        
    </div>


    <!-- Javascript Files
    ================================================== -->
    <script src="js/plugins.js"></script>
    <script src="js/designesia.js"></script>
    <script src="js/config.js"></script>
    <!-- Cars Filter Modal JavaScript -->
    <script src="js/cars-filter-modal.js"></script>
    <script>
      // Ensure i18n is properly initialized and update content
      document.addEventListener('DOMContentLoaded', function() {
        // Function to check and update i18n content
        function checkAndUpdateI18n() {
          if (typeof i18next !== 'undefined' && i18next.isInitialized) {
            if (typeof updateContent === 'function') {
              updateContent();
            }
            return true;
          }
          return false;
        }

        // Try immediately
        if (!checkAndUpdateI18n()) {
          // If not ready, try with increasing delays
          let attempts = 0;
          const maxAttempts = 10;
          const checkInterval = setInterval(function() {
            attempts++;
            if (checkAndUpdateI18n() || attempts >= maxAttempts) {
              clearInterval(checkInterval);
              if (attempts >= maxAttempts) {
                console.warn('i18n system failed to initialize properly');
                // Force update with fallback translations
                if (typeof loadFallbackTranslations === 'function') {
                  const savedLang = localStorage.getItem('lang') || 'ro';
                  loadFallbackTranslations(savedLang);
                }
              }
            }
          }, 200);
        }
      });
    </script>
    
    <!-- Spinning Wheel Modal Trigger -->
    <script src="js/spinning-wheel-trigger.js"></script>
</body>

</html>