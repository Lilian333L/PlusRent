<!DOCTYPE html>
<html lang="ro">
<head>
  <title>Mașini de închiriat în Chișinău și Moldova – PlusRent | Flotă actualizată</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="16x16" href="images/icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="images/icon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
  <link rel="shortcut icon" type="image/png" href="images/icon.png">

  <!-- Meta Base -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#ffffff">
  <meta name="msapplication-TileImage" content="images/icon.png">
  <meta name="msapplication-TileColor" content="#ffffff">

  <!-- SEO -->
  <meta name="description" content="Descoperă toate mașinile disponibile pentru închiriere la PlusRent. Autoturisme moderne, economice și premium, livrare rapidă în Chișinău sau oriunde în Moldova.">
  <meta name="author" content="PlusRent.md">
  <meta name="robots" content="index, follow">

  <!-- Canonical -->
  <link rel="canonical" href="https://plusrent.md/cars">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Mașini de închiriat în Chișinău și Moldova – PlusRent">
  <meta property="og:description" content="Vezi flota completă de mașini disponibile la PlusRent. Închirieri rapide și sigure, cu livrare gratuită în Chișinău și la Aeroport.">
  <meta property="og:image" content="https://plusrent.md/images/LOGO-5-demo.png">
  <meta property="og:url" content="https://plusrent.md/cars">
  <meta property="og:site_name" content="PlusRent">
  <meta property="og:locale" content="ro_RO">
  <meta property="og:locale:alternate" content="ru_RU">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Mașini de închiriat în Chișinău – PlusRent">
  <meta name="twitter:description" content="Explorează gama completă de mașini disponibile pentru închiriere la PlusRent.">
  <meta name="twitter:image" content="https://plusrent.md/images/LOGO-5-demo.png">

  <!-- CSS Files -->
  <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" id="bootstrap">
  <link href="css/mdb.min.css" rel="stylesheet" type="text/css" id="mdb">
  <link href="css/plugins.css" rel="stylesheet" type="text/css">
  <link href="css/style.css" rel="stylesheet" type="text/css">
  <link href="css/coloring.css" rel="stylesheet" type="text/css">
  <link id="colors" href="css/colors/scheme-01.css" rel="stylesheet" type="text/css">

  <!-- FontAwesome 6 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">

  <!-- Flatpickr for Date Picker -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

  <!-- Cars Filter Modal -->
  <link href="css/cars-filter-modal.css" rel="stylesheet" type="text/css">

  <!-- API Config -->
  <script>
    window.API_BASE_URL = '';
  </script>

  <!-- Config Script -->
  <script src="js/config.js"></script>

  <!-- i18n (multilingv) -->
  <script src="https://unpkg.com/i18next@21.6.14/dist/umd/i18next.min.js"></script>
  <script src="https://unpkg.com/i18next-http-backend@1.4.3/i18nextHttpBackend.min.js"></script>
  <script src="js/i18n-init.js"></script>

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "AutoRental",
    "name": "PlusRent",
    "image": "https://plusrent.md/images/LOGO-5-demo.png",
    "logo": "https://plusrent.md/images/icon.png",
    "@id": "https://plusrent.md",
    "url": "https://plusrent.md/cars",
    "description": "Flotă completă de mașini disponibile pentru închiriere în Chișinău și Moldova, cu livrare la aeroport și asistență 24/7.",
    "priceRange": "€25-€120",
    "telephone": "+373-60-000-500",
    "email": "info@plusrent.md",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "str. Meșterul Manole 20",
      "addressLocality": "Chișinău",
      "postalCode": "MD-2001",
      "addressCountry": "MD"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": 47.0105,
      "longitude": 28.8638
    },
    "openingHoursSpecification": {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": [
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
        "Sunday"
      ],
      "opens": "00:00",
      "closes": "23:59"
    },
    "sameAs": [
      "https://www.instagram.com/plusrent.md",
      "https://t.me/plusrent",
      "https://www.tiktok.com/@plusrent"
    ]
  }
  </script>

  <style>
    /* Language Picker Styles */
    .lang-picker-wrapper { 
      position: relative; 
      display: inline-block; 
      vertical-align: middle; 
    }
    
    .lang-picker-btn {
      display: flex;
      align-items: center;
      gap: 7px;
      padding: 4px 12px;
      border-radius: 4px;
      border: 1px solid #e0e0e0;
      background: #f6f6f6;
      cursor: pointer;
      font-weight: 500;
      font-size: 14px;
      min-width: 80px;
      height: 36px;
      line-height: 1.2;
      transition: border 0.2s, box-shadow 0.2s;
      box-shadow: 0 1px 4px rgba(0,0,0,0.02);
      margin-left: 0;
    }
    
    .lang-picker-btn:focus, 
    .lang-picker-btn[aria-expanded="true"] {
      outline: none;
      border-color: #f0c040;
      box-shadow: 0 2px 12px rgba(240,192,64,0.08);
    }
    
    .lang-picker-dropdown {
      display: none;
      position: absolute;
      top: 110%;
      left: 0;
      z-index: 1000;
      background: #fff;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      padding: 0;
      margin: 0;
      min-width: 120px;
      list-style: none;
    }
    
    .lang-picker-dropdown.open { 
      display: block; 
    }
    
    .lang-option {
      display: flex;
      align-items: center;
      gap: 7px;
      padding: 7px 14px;
      cursor: pointer;
      font-size: 14px;
      background: none;
      border: none;
      transition: background 0.15s, color 0.15s;
      height: 32px;
      line-height: 1.2;
    }
    
    .lang-option:focus, 
    .lang-option:hover {
      background: #f0c04022;
      color: #031B4E;
      outline: none;
    }
    
    .lang-option.selected {
      background: #f0c04044;
      color: #031B4E;
      font-weight: 600;
    }
    
    .lang-flag {
      font-size: 18px;
      width: 20px;
      display: inline-block;
      text-align: center;
    }
    
    .lang-globe {
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    /* Premium Car Highlighting - ULTRA PREMIUM Design - FIXED */
    .de-item.premium {
      position: relative;
      border: 4px solid transparent;
      background: 
        linear-gradient(white, white) padding-box,
        linear-gradient(135deg, #FFD700 0%, #FF8C00 25%, #FF6B6B 50%, #FF8C00 75%, #FFD700 100%) border-box;
      background-size: 200% 200%;
      box-shadow: 
        0 18px 50px rgba(255, 215, 0, 0.35),
        0 10px 30px rgba(255, 140, 0, 0.25),
        0 0 40px rgba(255, 215, 0, 0.2),
        inset 0 2px 4px rgba(255, 255, 255, 0.8);
      transform: scale(1.025);
      transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.4s ease;
      overflow: visible;
      animation: premium-float 4s ease-in-out infinite, premium-border-animate 3s linear infinite;
      z-index: 2;
    }

    @keyframes premium-float {
      0%, 100% {
        transform: scale(1.025) translateY(0px);
      }
      50% {
        transform: scale(1.025) translateY(-5px);
      }
    }

    @keyframes premium-border-animate {
      0% {
        background-position: 0% 50%;
      }
      100% {
        background-position: 200% 50%;
      }
    }

    /* Animated glow rings */
    .de-item.premium::before {
      content: '';
      position: absolute;
      top: -6px;
      left: -6px;
      right: -6px;
      bottom: -6px;
      background: linear-gradient(135deg, #FFD700, #FF8C00, #FF6B6B, #FFD700);
      background-size: 300% 300%;
      border-radius: 20px;
      z-index: -1;
      opacity: 0.4;
      filter: blur(15px);
      animation: premium-glow-pulse 3s ease-in-out infinite;
      pointer-events: none;
    }

    @keyframes premium-glow-pulse {
      0%, 100% {
        opacity: 0.4;
        background-position: 0% 50%;
        transform: scale(1);
      }
      50% {
        opacity: 0.7;
        background-position: 100% 50%;
        transform: scale(1.05);
      }
    }

    /* Outer glow ring */
    .de-item.premium::after {
      content: '';
      position: absolute;
      top: -3px;
      left: -3px;
      right: -3px;
      bottom: -3px;
      background: linear-gradient(135deg, #FFD700, #FF8C00, #FF6B6B);
      border-radius: 20px;
      z-index: -2;
      opacity: 0.15;
      filter: blur(25px);
      animation: premium-outer-glow 4s ease-in-out infinite;
      pointer-events: none;
    }

    @keyframes premium-outer-glow {
      0%, 100% {
        opacity: 0.15;
        transform: scale(1);
      }
      50% {
        opacity: 0.25;
        transform: scale(1.03);
      }
    }

    /* Hover effect - KEEPS all animations */
    .de-item.premium:hover {
      transform: scale(1.06) translateY(-10px);
      box-shadow: 
        0 30px 70px rgba(255, 215, 0, 0.45),
        0 15px 40px rgba(255, 140, 0, 0.35),
        0 0 60px rgba(255, 215, 0, 0.3),
        inset 0 2px 4px rgba(255, 255, 255, 0.9);
      z-index: 10;
      animation: premium-float 2s ease-in-out infinite, premium-border-animate 1.5s linear infinite;
    }

    .de-item.premium:hover::before {
      opacity: 0.8;
      filter: blur(20px);
      animation: premium-glow-pulse-fast 1.5s ease-in-out infinite;
    }

    @keyframes premium-glow-pulse-fast {
      0%, 100% {
        opacity: 0.8;
        background-position: 0% 50%;
        transform: scale(1);
      }
      50% {
        opacity: 1;
        background-position: 100% 50%;
        transform: scale(1.05);
      }
    }

    .de-item.premium:hover::after {
      opacity: 0.35;
      filter: blur(30px);
      animation: premium-outer-glow-fast 2s ease-in-out infinite;
    }

    @keyframes premium-outer-glow-fast {
      0%, 100% {
        opacity: 0.35;
        transform: scale(1);
      }
      50% {
        opacity: 0.5;
        transform: scale(1.03);
      }
    }

    /* Premium badge - more eye-catching */
    .premium-badge {
      position: absolute;
      top: 0;
      left: 0;
      background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
      color: #1a1a1a;
      font-size: 0.75rem;
      font-weight: 900;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      padding: 10px 22px 9px 22px;
      border-radius: 0 0 14px 0;
      z-index: 20;
      box-shadow: 
        0 5px 20px rgba(255, 140, 0, 0.5),
        inset 0 1px 3px rgba(255, 255, 255, 0.5);
      border: none;
      white-space: nowrap;
      animation: badge-mega-pulse 2s ease-in-out infinite;
      backdrop-filter: blur(10px);
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
      position: absolute;
      overflow: hidden;
      pointer-events: none;
    }

    /* Shine effect on badge */
    .premium-badge::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
      animation: badge-shine 3s ease-in-out infinite;
    }

    @keyframes badge-shine {
      0% {
        left: -100%;
      }
      50%, 100% {
        left: 200%;
      }
    }

    @keyframes badge-mega-pulse {
      0%, 100% {
        box-shadow: 
          0 5px 20px rgba(255, 140, 0, 0.5),
          inset 0 1px 3px rgba(255, 255, 255, 0.5);
        transform: scale(1);
      }
      50% {
        box-shadow: 
          0 8px 30px rgba(255, 140, 0, 0.8),
          0 0 20px rgba(255, 215, 0, 0.6),
          inset 0 1px 3px rgba(255, 255, 255, 0.7);
        transform: scale(1.06);
      }
    }

    /* Sparkle effect for premium cards */
    .de-item.premium .d-img::after {
      content: '✨';
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 1.5rem;
      animation: sparkle-rotate 3s linear infinite;
      z-index: 5;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
      pointer-events: none;
    }

    @keyframes sparkle-rotate {
      0%, 100% {
        transform: rotate(0deg) scale(1);
        opacity: 0.8;
      }
      25% {
        transform: rotate(90deg) scale(1.2);
        opacity: 1;
      }
      50% {
        transform: rotate(180deg) scale(1);
        opacity: 0.8;
      }
      75% {
        transform: rotate(270deg) scale(1.2);
        opacity: 1;
      }
    }

    /* Premium card image glow */
    .de-item.premium .d-img {
      box-shadow: inset 0 0 30px rgba(255, 215, 0, 0.15);
      border: 2px solid rgba(255, 215, 0, 0.3);
    }

    .de-item.premium:hover .d-img {
      box-shadow: inset 0 0 40px rgba(255, 215, 0, 0.25);
      border-color: rgba(255, 215, 0, 0.5);
    }

    /* Date Range Filter Styles - World Class */
    .date-range-filter {
      display: flex;
      flex-direction: column;
      gap: 14px;
      margin-bottom: 15px;
    }

    .date-input-wrapper {
      position: relative;
      overflow: hidden;
    }

    .date-input-wrapper::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(28, 207, 201, 0.03) 0%, rgba(23, 163, 152, 0.03) 100%);
      border-radius: 12px;
      z-index: 0;
      transition: all 0.3s ease;
    }

    .date-input-wrapper:hover::before {
      background: linear-gradient(135deg, rgba(28, 207, 201, 0.08) 0%, rgba(23, 163, 152, 0.08) 100%);
    }

    .date-input-wrapper input {
      position: relative;
      z-index: 1;
      width: 100%;
      padding: 14px 16px 14px 46px;
      border: 2px solid #e8e8e8;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      background: rgba(255, 255, 255, 0.95);
      cursor: pointer;
      color: #2c3e50;
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.02);
    }

    .date-input-wrapper input:hover {
      border-color: #1ccfc9;
      box-shadow: 0 4px 12px rgba(28, 207, 201, 0.12);
      transform: translateY(-1px);
    }

    .date-input-wrapper input:focus {
      outline: none;
      border-color: #1ccfc9;
      box-shadow: 0 0 0 4px rgba(28, 207, 201, 0.15), 0 8px 20px rgba(28, 207, 201, 0.12);
      transform: translateY(-2px);
    }

    .date-input-wrapper i {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      color: #1ccfc9;
      font-size: 17px;
      z-index: 2;
      transition: all 0.3s ease;
    }

    .date-input-wrapper:hover i {
      transform: translateY(-50%) scale(1.1);
      color: #17a398;
    }

    /* Sort Controls - World Class Design - FIXED WIDTH */
    .sort-controls {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      margin-bottom: 30px;
      gap: 14px;
      padding: 18px 24px;
      background: linear-gradient(135deg, #ffffff 0%, #f8fafb 100%);
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06), inset 0 1px 0 rgba(255, 255, 255, 0.8);
      border: 1px solid rgba(28, 207, 201, 0.1);
      width: 100%;
    }

    .sort-label {
      font-weight: 700;
      font-size: 15px;
      color: #2c3e50;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .sort-select {
      padding: 12px 40px 12px 18px;
      border: 2px solid #e8e8e8;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      background: #fff url('data:image/svg+xml;charset=UTF-8,<svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1.5L6 6.5L11 1.5" stroke="%231ccfc9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>') no-repeat right 14px center;
      background-size: 12px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      min-width: 220px;
      max-width: 100%;
      appearance: none;
      color: #2c3e50;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
    }

    .sort-select:hover {
      border-color: #1ccfc9;
      box-shadow: 0 4px 16px rgba(28, 207, 201, 0.15);
      transform: translateY(-2px);
    }

    .sort-select:focus {
      outline: none;
      border-color: #1ccfc9;
      box-shadow: 0 0 0 4px rgba(28, 207, 201, 0.15), 0 8px 20px rgba(28, 207, 201, 0.12);
      transform: translateY(-2px);
    }

    /* Responsive Styles */
    @media (max-width: 768px) {
      .lang-picker-btn { 
        font-size: 12px; 
        padding: 3px 7px; 
        min-width: 60px; 
        height: 30px; 
      }
      
      .lang-picker-dropdown { 
        min-width: 80px; 
      }
      
      .lang-option { 
        font-size: 12px; 
        padding: 6px 8px; 
        height: 26px; 
      }
      
      .lang-flag { 
        font-size: 15px; 
        width: 15px; 
      }

      .sort-controls {
        flex-direction: column;
        align-items: stretch;
        padding: 14px 18px;
      }

      .sort-label {
        text-align: center;
      }

      .sort-select {
        width: 100%;
        min-width: auto;
      }
    }

    /* Enhanced Filter Sidebar - World Class */
    .filter-sidebar {
      background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
      border-radius: 18px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.07), 
                  0 2px 8px rgba(0,0,0,0.04),
                  inset 0 1px 0 rgba(255, 255, 255, 0.8);
      padding: 24px;
      width: 100%;
      max-width: 100%;
      border: 1px solid rgba(28, 207, 201, 0.1);
      position: sticky;
      top: 100px;
      transition: all 0.3s ease;
    }

    .filter-sidebar:hover {
      box-shadow: 0 12px 40px rgba(0,0,0,0.1), 
                  0 4px 12px rgba(0,0,0,0.05),
                  inset 0 1px 0 rgba(255, 255, 255, 0.8);
    }

    .filter-title {
      font-size: 1.55rem;
      font-weight: 900;
      margin-bottom: 1.1rem;
      letter-spacing: 0.02em;
      color: #1a1a1a;
      display: flex;
      justify-content: space-between;
      align-items: center;
      text-transform: uppercase;
      background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .filter-clear {
      color: #1ccfc9;
      font-size: 0.78rem;
      font-weight: 700;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      padding: 7px 13px;
      border-radius: 9px;
      background: rgba(28, 207, 201, 0.08);
      text-transform: uppercase;
      letter-spacing: 0.04em;
      -webkit-text-fill-color: #1ccfc9;
    }

    .filter-clear:hover {
      background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
      -webkit-text-fill-color: white;
      color: white;
      box-shadow: 0 4px 14px rgba(28, 207, 201, 0.28);
      transform: translateY(-2px);
    }

    .filter-divider {
      border: none;
      height: 2px;
      background: linear-gradient(90deg, transparent 0%, rgba(28, 207, 201, 0.25) 50%, transparent 100%);
      margin: 1.3rem 0;
    }

    .filter-section-title {
      font-size: 1.1rem;
      font-weight: 800;
      margin-bottom: 0.9rem;
      margin-top: 0.5rem;
      letter-spacing: 0.025em;
      color: #2c3e50;
      text-transform: uppercase;
      position: relative;
      padding-left: 13px;
    }

    .filter-section-title::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 4px;
      height: 18px;
      background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
      border-radius: 2px;
    }

    .filter-option-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 11px 13px;
      margin-bottom: 5px;
      border-radius: 11px;
      transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
      background: rgba(255, 255, 255, 0.4);
      border: 1px solid transparent;
    }

    .filter-option-row:hover {
      background: linear-gradient(135deg, rgba(28, 207, 201, 0.07) 0%, rgba(23, 163, 152, 0.07) 100%);
      border-color: rgba(28, 207, 201, 0.18);
      transform: translateX(3px);
      box-shadow: 0 2px 8px rgba(28, 207, 201, 0.08);
    }

    .filter-option-row label {
      display: flex;
      align-items: center;
      font-size: 0.98rem;
      font-weight: 600;
      cursor: pointer;
      flex: 1 1 auto;
      color: #2c3e50;
      transition: color 0.2s ease;
    }

    .filter-option-row:hover label {
      color: #1ccfc9;
    }

    .filter-option-row input[type=checkbox],
    .filter-option-row input[type=radio] {
      width: 21px;
      height: 21px;
      margin-right: 13px;
      accent-color: #1ccfc9;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .filter-option-row:hover input[type=checkbox],
    .filter-option-row:hover input[type=radio] {
      transform: scale(1.08);
    }

    .option-label {
      margin-right: 8px;
      flex: 1;
      transition: all 0.2s ease;
    }

    .option-count {
      color: #fff;
      font-size: 0.83rem;
      font-weight: 700;
      background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
      padding: 4px 10px;
      border-radius: 18px;
      min-width: 34px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(28, 207, 201, 0.22);
      transition: all 0.2s ease;
    }

    .filter-option-row:hover .option-count {
      transform: scale(1.08);
      box-shadow: 0 4px 12px rgba(28, 207, 201, 0.32);
    }

    /* Disabled filter option styles */
    .filter-option-row.disabled-option {
      opacity: 0.35;
      pointer-events: none;
      background: rgba(0, 0, 0, 0.02);
    }

    .filter-option-row.disabled-option label {
      cursor: not-allowed;
    }

    .filter-option-row.disabled-option input[type=checkbox],
    .filter-option-row.disabled-option input[type=radio] {
      cursor: not-allowed;
      opacity: 0.4;
    }

    .option-label.disabled-text {
      color: #aaa;
    }

    .option-count.disabled-count {
      color: #999;
      font-weight: 500;
      background: #e8e8e8;
      box-shadow: none;
    }

    /* Price Input Styles - Enhanced - VERTICAL LAYOUT */
    .price-range-inputs {
      display: flex;
      flex-direction: column;
      gap: 12px;
      align-items: stretch;
    }

    .price-range-inputs input {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid #e8e8e8;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      background: #fff;
      color: #2c3e50;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.02);
    }

    .price-range-inputs input:hover {
      border-color: #1ccfc9;
      box-shadow: 0 4px 12px rgba(28, 207, 201, 0.12);
      transform: translateY(-1px);
    }

    .price-range-inputs input:focus {
      outline: none;
      border-color: #1ccfc9;
      box-shadow: 0 0 0 4px rgba(28, 207, 201, 0.15), 0 8px 20px rgba(28, 207, 201, 0.12);
      transform: translateY(-2px);
    }

    .price-range-inputs input::placeholder {
      color: #999;
      font-weight: 500;
    }

    .price-range-divider {
      text-align: center;
      color: #1ccfc9;
      font-weight: 800;
      font-size: 14px;
      margin: -6px 0;
    }

    /* Car Card Styles - World Class Premium Design */
    .cars-main-container {
      padding-top: 3.5rem;
      padding-bottom: 3.5rem;
      background: linear-gradient(180deg, #f9fafb 0%, #ffffff 100%);
    }

    .car-list-row {
      margin-left: 0;
      margin-right: 0;
      gap: 2.2rem 0;
      justify-content: flex-start;
    }

    .de-item.mb30 {
      transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
      margin-bottom: 0 !important;
      border-radius: 18px;
      box-shadow: 
        0 6px 24px rgba(0,0,0,0.07),
        0 2px 8px rgba(0,0,0,0.04),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
      padding: 1.1rem;
      display: flex;
      flex-direction: column;
      height: 100%;
      min-height: 470px;
      width: 100%;
      background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
      border: 1px solid rgba(0, 0, 0, 0.05);
      position: relative;
      overflow: hidden;
    }

    .de-item.mb30::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #1ccfc9 0%, #17a398 100%);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .de-item.mb30:hover::before {
      opacity: 1;
    }

    .de-item.mb30:hover {
      box-shadow: 
        0 16px 48px rgba(0,0,0,0.12),
        0 6px 16px rgba(0,0,0,0.07),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
      transform: translateY(-6px);
      border-color: rgba(28, 207, 201, 0.15);
    }

    .d-img {
      position: relative;
      margin-bottom: 1.4rem;
      border-radius: 14px;
      overflow: hidden;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      min-height: 210px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.03);
    }

    .d-img img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      max-width: 100%;
      max-height: 210px;
      transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .de-item:hover .d-img img {
      transform: scale(1.06);
    }

    .d-info {
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .d-text {
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .d-text h4 {
      font-size: 1.45rem;
      font-weight: 900;
      margin-bottom: 0.35rem;
      color: #1a1a1a;
      letter-spacing: 0.015em;
      text-transform: uppercase;
    }

    .d-text > p {
      color: #666;
      font-size: 1.02rem;
      font-weight: 600;
      margin-bottom: 1.1rem;
    }

    .d-atr-group {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 9px;
      margin: 1.1rem 0;
    }

    .d-atr {
      display: flex;
      align-items: center;
      gap: 7px;
      font-size: 0.93rem;
      font-weight: 600;
      color: #2c3e50;
      padding: 9px 11px;
      background: linear-gradient(135deg, rgba(28, 207, 201, 0.07) 0%, rgba(23, 163, 152, 0.07) 100%);
      border-radius: 9px;
      transition: all 0.3s ease;
      border: 1px solid rgba(28, 207, 201, 0.12);
    }

    .d-atr:hover {
      background: linear-gradient(135deg, rgba(28, 207, 201, 0.13) 0%, rgba(23, 163, 152, 0.13) 100%);
      transform: translateY(-2px);
      box-shadow: 0 3px 10px rgba(28, 207, 201, 0.18);
    }

    .d-atr img {
      width: 21px;
      height: 21px;
      filter: drop-shadow(0 2px 4px rgba(28, 207, 201, 0.25));
    }

    .d-price {
      font-size: 0.98rem;
      font-weight: 600;
      color: #2c3e50;
      margin: 1.1rem 0;
      padding: 14px 18px;
      background: linear-gradient(135deg, #e8f9f8 0%, #d4f4f2 100%);
      border-radius: 12px;
      text-align: center;
      border: 2px solid rgba(28, 207, 201, 0.18);
      box-shadow: 0 3px 12px rgba(28, 207, 201, 0.13);
      transition: all 0.3s ease;
    }

    .d-price:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(28, 207, 201, 0.22);
    }

    .d-price span:last-child {
      color: #1ccfc9;
      font-size: 1.7rem;
      font-weight: 900;
      margin-left: 9px;
      text-shadow: 0 2px 4px rgba(28, 207, 201, 0.18);
    }

    .btn-main {
      width: 100%;
      padding: 15px 26px;
      background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-weight: 800;
      font-size: 1.02rem;
      text-align: center;
      text-decoration: none;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      display: inline-block;
      transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
      box-shadow: 0 6px 20px rgba(28, 207, 201, 0.32);
      margin-top: auto;
      position: relative;
      overflow: hidden;
    }

    .btn-main::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.25);
      transform: translate(-50%, -50%);
      transition: width 0.5s ease, height 0.5s ease;
    }

    .btn-main:hover::before {
      width: 280px;
      height: 280px;
    }

    .btn-main:hover {
      background: linear-gradient(135deg, #17a398 0%, #138f84 100%);
      box-shadow: 0 10px 32px rgba(28, 207, 201, 0.45);
      transform: translateY(-3px) scale(1.015);
      color: white;
    }

    .btn-main:active {
      transform: translateY(-1px) scale(0.99);
    }

    /* Unavailable Car Styles - Enhanced */
    .car-unavailable {
      opacity: 0.55;
      pointer-events: none;
      filter: grayscale(0.8);
      position: relative;
    }

    .car-unavailable::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 20px;
      pointer-events: none;
    }

    .img-unavailable img {
      filter: grayscale(0.4) brightness(0.92);
    }

    .unavailable-badge {
      position: absolute;
      top: 0;
      right: 0;
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
      color: #fff;
      font-size: 0.7rem;
      font-weight: 900;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      padding: 10px 20px 9px 20px;
      border-radius: 0 16px 0 12px;
      z-index: 10;
      box-shadow: 0 4px 15px rgba(238, 90, 82, 0.5);
      pointer-events: none;
      border: none;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    }

    .btn-unavailable {
      background: linear-gradient(135deg, #e8e8e8 0%, #d4d4d4 100%) !important;
      color: #999 !important;
      border: 2px solid #e0e0e0 !important;
      cursor: not-allowed !important;
      pointer-events: none;
      font-weight: 700;
      border-radius: 14px;
      padding: 16px 28px;
      width: 100%;
      display: inline-block;
      box-shadow: none !important;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
/* Mobile Filter Styles - Compact & Practical */
    .mobile-filter-button-container {
      margin-bottom: 1.5rem;
      text-align: center;
      padding: 0 1rem;
    }

    .mobile-filter-btn {
      width: 100%;
      max-width: 100%;
      padding: 12px 20px;
      font-size: 14px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
      border: none;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(28, 207, 201, 0.3);
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      color: white;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .mobile-filter-btn i {
      font-size: 14px;
    }

    .mobile-filter-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s ease, height 0.6s ease;
    }

    .mobile-filter-btn:active::before {
      width: 300px;
      height: 300px;
    }

    .mobile-filter-btn:active {
      background: linear-gradient(135deg, #17a398 0%, #138f84 100%);
      box-shadow: 0 2px 8px rgba(28, 207, 201, 0.4);
      transform: scale(0.98);
    }

    .mobile-filter-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 9999;
      display: none;
      backdrop-filter: blur(8px);
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    .mobile-filter-sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 85%;
      max-width: 380px;
      height: 100%;
      background: linear-gradient(135deg, #ffffff 0%, #fafbfc 100%);
      box-shadow: 6px 0 40px rgba(0, 0, 0, 0.2);
      overflow-y: auto;
      transform: translateX(-100%);
      transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      will-change: transform;
    }

    .mobile-filter-overlay.active {
      display: block;
    }

    .mobile-filter-overlay.active .mobile-filter-sidebar {
      transform: translateX(0);
    }

    .mobile-filter-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 1.25rem;
      border-bottom: 2px solid rgba(28, 207, 201, 0.2);
      background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
      position: sticky;
      top: 0;
      z-index: 1;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .mobile-filter-header h5 {
      margin: 0;
      font-weight: 800;
      color: #ffffff;
      font-size: 1.1rem;
      text-transform: uppercase;
      letter-spacing: 0.03em;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    }

    .mobile-filter-close {
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid rgba(255, 255, 255, 0.4);
      font-size: 1.2rem;
      color: #fff;
      cursor: pointer;
      padding: 6px;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      backdrop-filter: blur(10px);
    }

    .mobile-filter-close:active {
      background: rgba(255, 255, 255, 0.3);
      border-color: rgba(255, 255, 255, 0.6);
      transform: rotate(90deg) scale(0.95);
    }

    .mobile-filter-content {
      padding: 1.25rem;
    }

    /* Compact filter sections for mobile */
    .mobile-filter-content .filter-category {
      margin-bottom: 1rem;
    }

    .mobile-filter-content .filter-section-title {
      font-size: 0.95rem;
      font-weight: 800;
      margin-bottom: 0.6rem;
      margin-top: 0.3rem;
      letter-spacing: 0.02em;
      color: #2c3e50;
      text-transform: uppercase;
      position: relative;
      padding-left: 10px;
    }

    .mobile-filter-content .filter-section-title::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 3px;
      height: 14px;
      background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
      border-radius: 2px;
    }

    .mobile-filter-content .filter-divider {
      border: none;
      height: 1px;
      background: linear-gradient(90deg, transparent 0%, rgba(28, 207, 201, 0.2) 50%, transparent 100%);
      margin: 0.8rem 0;
    }

    .mobile-filter-content .filter-option-row {
      padding: 8px 10px;
      margin-bottom: 4px;
      border-radius: 8px;
      transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
      background: rgba(255, 255, 255, 0.4);
      border: 1px solid transparent;
    }

    .mobile-filter-content .filter-option-row:active {
      background: linear-gradient(135deg, rgba(28, 207, 201, 0.1) 0%, rgba(23, 163, 152, 0.1) 100%);
      border-color: rgba(28, 207, 201, 0.2);
      transform: translateX(2px);
    }

    .mobile-filter-content .filter-option-row label {
      font-size: 0.9rem;
      font-weight: 600;
    }

    .mobile-filter-content .filter-option-row input[type=checkbox],
    .mobile-filter-content .filter-option-row input[type=radio] {
      width: 18px;
      height: 18px;
      margin-right: 10px;
    }

    .mobile-filter-content .option-count {
      font-size: 0.75rem;
      font-weight: 700;
      padding: 3px 8px;
      border-radius: 12px;
      min-width: 28px;
    }

    /* Compact date inputs for mobile */
    .mobile-filter-content .date-range-filter {
      gap: 10px;
      margin-bottom: 10px;
    }

    .mobile-filter-content .date-input-wrapper input {
      padding: 10px 12px 10px 38px;
      font-size: 13px;
      border-radius: 8px;
    }

    .mobile-filter-content .date-input-wrapper i {
      left: 12px;
      font-size: 14px;
    }

    /* Compact price inputs for mobile */
    .mobile-filter-content .price-range-inputs {
      gap: 8px;
    }

    .mobile-filter-content .price-range-inputs input {
      padding: 10px 12px;
      font-size: 13px;
      border-radius: 8px;
    }

    .mobile-filter-content .price-range-divider {
      font-size: 12px;
      margin: -4px 0;
    }

    /* Compact action buttons */
    .mobile-filter-actions {
      position: sticky;
      bottom: 0;
      background: linear-gradient(135deg, #ffffff 0%, #fafbfc 100%);
      padding: 1rem 1.25rem;
      border-top: 2px solid rgba(28, 207, 201, 0.2);
      display: flex;
      gap: 10px;
      box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
    }

    .mobile-filter-actions .btn {
      flex: 1;
      padding: 12px 16px;
      font-weight: 700;
      border-radius: 10px;
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      text-transform: uppercase;
      letter-spacing: 0.03em;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    .mobile-filter-actions .btn i {
      font-size: 12px;
    }

    .mobile-filter-actions .btn-outline-secondary {
      border: 2px solid #ddd;
      color: #666;
      background: white;
    }

    .mobile-filter-actions .btn-outline-secondary:active {
      background: #f5f5f5;
      border-color: #bbb;
      transform: scale(0.98);
    }

    .mobile-filter-actions .btn-primary {
      background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
      border: none;
      box-shadow: 0 4px 12px rgba(28, 207, 201, 0.3);
      color: white;
    }

    .mobile-filter-actions .btn-primary:active {
      background: linear-gradient(135deg, #17a398 0%, #138f84 100%);
      box-shadow: 0 2px 8px rgba(28, 207, 201, 0.4);
      transform: scale(0.98);
    }

    /* Extra small devices optimization */
    @media (max-width: 360px) {
      .mobile-filter-btn {
        padding: 10px 16px;
        font-size: 13px;
      }
      
      .mobile-filter-header {
        padding: 0.875rem 1rem;
      }
      
      .mobile-filter-header h5 {
        font-size: 1rem;
      }
      
      .mobile-filter-close {
        width: 32px;
        height: 32px;
        font-size: 1.1rem;
      }
      
      .mobile-filter-content {
        padding: 1rem;
      }
      
      .mobile-filter-content .filter-section-title {
        font-size: 0.9rem;
      }
      
      .mobile-filter-content .filter-option-row {
        padding: 7px 8px;
      }
      
      .mobile-filter-content .filter-option-row label {
        font-size: 0.85rem;
      }
      
      .mobile-filter-content .filter-option-row input[type=checkbox],
      .mobile-filter-content .filter-option-row input[type=radio] {
        width: 16px;
        height: 16px;
        margin-right: 8px;
      }
      
      .mobile-filter-actions {
        padding: 0.875rem 1rem;
        gap: 8px;
      }
      
      .mobile-filter-actions .btn {
        padding: 10px 12px;
        font-size: 0.8rem;
      }
    }

    /* Scrollbar styling for mobile filter */
    .mobile-filter-sidebar::-webkit-scrollbar {
      width: 6px;
    }

    .mobile-filter-sidebar::-webkit-scrollbar-track {
      background: rgba(28, 207, 201, 0.05);
      border-radius: 10px;
    }

    .mobile-filter-sidebar::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(28, 207, 201, 0.3);
    }

    .mobile-filter-sidebar::-webkit-scrollbar-thumb:active {
      background: linear-gradient(135deg, #17a398 0%, #138f84 100%);
    }

    /* Loading state for mobile filters */
    #mobile-filter-loading {
      padding: 2rem 1rem;
    }

    #mobile-filter-loading .spinner-border {
      width: 2rem;
      height: 2rem;
      border-width: 0.2em;
    }

    #mobile-filter-loading p {
      margin-top: 1rem;
      font-size: 0.9rem;
      color: #666;
    }

    /* Responsive Grid */
    @media (min-width: 992px) {
      .col-lg-3 {
        width: 25%;
        flex: 0 0 25%;
        max-width: 25%;
      }
      .col-lg-9 {
        width: 75%;
        flex: 0 0 75%;
        max-width: 75%;
      }
    }

    @media (min-width: 768px) and (max-width: 991px) {
      .col-md-4 {
        width: 33.333333%;
        flex: 0 0 33.333333%;
        max-width: 33.333333%;
      }
      .col-md-8 {
        width: 66.666667%;
        flex: 0 0 66.666667%;
        max-width: 66.666667%;
      }
    }

    @media (max-width: 991px) {
      .small-sidebar { 
        display: none; 
      }
    }

    @media (max-width: 768px) {
      .cars-main-container {
        padding-left: 0.5rem;
        padding-right: 0.5rem;
      }

      .car-list-row {
        gap: 1.5rem 0;
        justify-content: center;
      }

      .car-list-row > .col-12 {
        display: flex;
        justify-content: center;
      }

      .car-list-row > .col-12 > .de-item {
        max-width: 360px;
        width: 100%;
      }

      .sort-controls {
        padding: 14px 18px;
        margin-bottom: 20px;
      }

      .filter-sidebar {
        padding: 20px;
      }

      .filter-title {
        font-size: 1.4rem;
      }

      .filter-section-title {
        font-size: 1rem;
      }

      .de-item.mb30 {
        min-height: 440px;
      }

      .d-img {
        min-height: 180px;
      }

      .d-img img {
        max-height: 180px;
      }

      .d-price {
        padding: 14px 16px;
      }

      .d-price span:last-child {
        font-size: 1.6rem;
      }

      .btn-main {
        padding: 14px 24px;
        font-size: 1rem;
      }
    }

    @media (max-width: 576px) {
      .cars-main-container {
        padding-top: 2.5rem;
        padding-bottom: 2.5rem;
      }

      .car-list-row {
        gap: 2rem 0;
      }

      .de-item.mb30 {
        min-height: 400px;
        padding: 1rem;
      }

      .d-text h4 {
        font-size: 1.3rem;
      }

      .d-text > p {
        font-size: 0.95rem;
      }

      .d-atr-group {
        gap: 8px;
      }

      .d-atr {
        padding: 8px 10px;
        font-size: 0.85rem;
      }

      .d-atr img {
        width: 18px;
        height: 18px;
      }

      .premium-badge {
        font-size: 0.6rem;
        padding: 8px 14px 7px 14px;
      }

      .unavailable-badge {
        font-size: 0.6rem;
        padding: 8px 14px 7px 14px;
      }
    }

    /* Loading Spinner - Premium Style */
    .loading-spinner {
      text-align: center;
      padding: 5rem;
    }

    .spinner {
      width: 60px;
      height: 60px;
      border: 5px solid rgba(28, 207, 201, 0.1);
      border-top: 5px solid #1ccfc9;
      border-radius: 50%;
      animation: spin 1s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
      margin: 0 auto 1.5rem;
      box-shadow: 0 4px 20px rgba(28, 207, 201, 0.2);
    }

    @keyframes spin {
      0% { 
        transform: rotate(0deg); 
      }
      100% { 
        transform: rotate(360deg); 
      }
    }

    .loading-spinner p {
      font-size: 1.1rem;
      font-weight: 600;
      color: #2c3e50;
      animation: pulse 1.5s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.5;
      }
    }

    /* Scrollbar Styling */
    .filter-sidebar::-webkit-scrollbar,
    .mobile-filter-sidebar::-webkit-scrollbar {
      width: 8px;
    }

    .filter-sidebar::-webkit-scrollbar-track,
    .mobile-filter-sidebar::-webkit-scrollbar-track {
      background: rgba(28, 207, 201, 0.05);
      border-radius: 10px;
    }

    .filter-sidebar::-webkit-scrollbar-thumb,
    .mobile-filter-sidebar::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(28, 207, 201, 0.3);
    }

    .filter-sidebar::-webkit-scrollbar-thumb:hover,
    .mobile-filter-sidebar::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, #17a398 0%, #138f84 100%);
    }

    /* Empty State Styling */
    .no-cars-message {
      text-align: center;
      padding: 4rem 2rem;
      background: linear-gradient(135deg, #ffffff 0%, #fafbfc 100%);
      border-radius: 20px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
      margin: 2rem 0;
    }

    .no-cars-message i {
      font-size: 4rem;
      color: #1ccfc9;
      margin-bottom: 1.5rem;
      display: block;
    }

    .no-cars-message p {
      font-size: 1.3rem;
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 0.5rem;
    }

    .no-cars-message small {
      font-size: 1rem;
      color: #666;
    }

    /* Animation for cards on load */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .de-item.mb30 {
      animation: fadeInUp 0.6s ease-out forwards;
      opacity: 1;
    }

    .de-item.mb30:nth-child(1) { animation-delay: 0.1s; }
    .de-item.mb30:nth-child(2) { animation-delay: 0.2s; }
    .de-item.mb30:nth-child(3) { animation-delay: 0.3s; }
    .de-item.mb30:nth-child(4) { animation-delay: 0.4s; }
    .de-item.mb30:nth-child(5) { animation-delay: 0.5s; }
    .de-item.mb30:nth-child(6) { animation-delay: 0.6s; }
    .de-item.mb30:nth-child(n+7) { animation-delay: 0.7s; }

    /* Override for premium cards - ensure they stay visible */
    .de-item.premium {
      opacity: 1 !important;
    }

    /* Micro-interactions */
    .filter-option-row input[type=checkbox]:checked,
    .filter-option-row input[type=radio]:checked {
      animation: checkBounce 0.3s ease;
    }

    @keyframes checkBounce {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.2);
      }
    }

    /* Focus visible improvements for accessibility */
    *:focus-visible {
      outline: 3px solid rgba(28, 207, 201, 0.5);
      outline-offset: 3px;
    }

    button:focus-visible,
    a:focus-visible {
      outline: 3px solid rgba(28, 207, 201, 0.5);
      outline-offset: 3px;
    }

    /* Print styles */
    @media print {
      .filter-sidebar,
      .sort-controls,
      .mobile-filter-button-container,
      .btn-main {
        display: none !important;
      }

      .de-item.mb30 {
        page-break-inside: avoid;
      }
    }
  </style>
</head>

<body>
    <div id="wrapper">
        
        <!-- page preloader begin -->
        <div id="de-preloader"></div>
        <!-- page preloader close -->

        <!-- header begin -->
        <header class="transparent scroll-light has-topbar">
            <div id="topbar" class="topbar-dark text-light">
                <div class="container">
                    <div class="topbar-left xs-hide">
                        <div class="topbar-widget">
                            <div class="topbar-widget"><a href="tel:+37360000500"><i class="fa fa-phone"></i>+373 60 000 500</a></div>
                            <div class="topbar-widget"><a href="mailto:contact@plusrent.md"><i class="fa fa-envelope"></i>contact@plusrent.md</a></div>
                            <div class="topbar-widget"><i class="fa fa-clock-o"></i>24/7</div>
                        </div>
                    </div>
                
                    <div class="topbar-right">
                        <div class="social-icons">
                            <a href="https://www.instagram.com/plusrent.md/" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram fa-lg"></i></a>
                            <a href="https://tiktok.me/plusrent" target="_blank" rel="noopener noreferrer"><i class="fab fa-tiktok fa-lg"></i></a>
                        </div>
                    </div>  
                    <div class="clearfix"></div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="de-flex sm-pt10">
                            <div class="de-flex-col">
                                <div class="de-flex-col">
                                    <!-- logo begin -->
                                    <div id="logo">
                                        <a href="/">
                                            <img class="logo-1" src="images/LOGO-4-demo.png" alt="">
                                            <img class="logo-2" src="images/LOGO-5-demo.png" alt="">
                                        </a>
                                    </div>
                                    <!-- logo close -->
                                </div>
                            </div>
                            
                            <div class="de-flex-col">
                                <!-- Main Menu -->
                                <ul id="mainmenu">
                                  <li><a class="menu-item" href="/" data-i18n="menu.home"></a></li>
                                  <li><a class="menu-item" href="/cars" data-i18n="menu.cars"></a></li>
                                  <li><a class="menu-item" href="/about" data-i18n="menu.about"></a></li>
                                  <li><a class="menu-item" href="/contact" data-i18n="menu.contact"></a></li>
                                  <li><a class="menu-item" href="/sofer-treaz" data-i18n="menu.sober_driver"></a></li>
                                </ul>
                            </div>
                            
                            <div class="de-flex-col">
                                <div class="menu_side_area" style="display: flex; align-items: center; justify-content: flex-end; gap: 12px;">
                                    <!-- Call Now Button -->
                                    <div class="call-now-wrapper" style="align-self:center; margin-right: 2vw;">
                                        <a href="tel:+37360000500" class="call-now-btn" style="display: flex; align-items: center; gap: 8px; background: linear-gradient(135deg, #1E90FF, #187bcd); color: white; padding: 10px 16px; border-radius: 25px; text-decoration: none; font-weight: 600; font-size: 14px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(30, 144, 255, 0.3);">
                                            <i class="fa fa-phone" style="font-size: 12px;"></i>
                                            <span data-i18n="call_now">Call Now</span>
                                        </a>
                                    </div>
                                    <!-- Language Picker -->
                                    <div class="lang-picker-wrapper" style="min-width:120px;align-self:center;">
                                      <button id="langPickerBtn" class="lang-picker-btn" aria-haspopup="listbox" aria-expanded="false">
                                        <span class="lang-globe" id="langGlobe">
                                          <svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="9" stroke="#1ccfc9" stroke-width="2"/><ellipse cx="10" cy="10" rx="5" ry="9" stroke="#1ccfc9" stroke-width="2"/><path d="M1 10h18" stroke="#1ccfc9" stroke-width="2"/><path d="M3 4.5h14" stroke="#1ccfc9" stroke-width="1.2"/><path d="M3 15.5h14" stroke="#1ccfc9" stroke-width="1.2"/></svg>
                                        </span>
                                        <span class="lang-flag" id="langFlag"></span>
                                        <span id="langCode" class="lang-code">RO</span>
                                        <svg width="14" height="14" viewBox="0 0 20 20" style="margin-left:6px;"><path d="M5.5 8l4.5 4.5L14.5 8" stroke="#888" stroke-width="2" fill="none" stroke-linecap="round"/></svg>
                                      </button>
                                      <ul id="langDropdown" class="lang-picker-dropdown" tabindex="-1">
                                        <li class="lang-option" data-lang="ro" tabindex="0">
                                          <span class="lang-flag"><img src="images/flags/romania.png" alt="RO" style="width: 20px; height: 15px; border-radius: 2px; object-fit: cover;"></span> 
                                          <span class="lang-code">RO</span>
                                        </li>
                                        <li class="lang-option" data-lang="en" tabindex="0">
                                          <span class="lang-flag"><img src="images/flags/united-kingdom.png" alt="EN" style="width: 20px; height: 15px; border-radius: 2px; object-fit: cover;"></span> 
                                          <span class="lang-code">EN</span>
                                        </li>
                                        <li class="lang-option" data-lang="ru" tabindex="0">
                                          <span class="lang-flag"><img src="images/flags/russia.png" alt="RU" style="width: 20px; height: 15px; border-radius: 2px; object-fit: cover;"></span> 
                                          <span class="lang-code">RU</span>
                                        </li>
                                      </ul>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="menu-btn">
                              <span></span>
                              <span></span>
                              <span></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- header close -->

        <!-- content begin -->
        <div class="no-bottom no-top zebra" id="content">
            <div id="top"></div>
            
            <!-- section begin -->
            <section id="subheader" class="jarallax text-light">
                <img src="images/background/2.jpg" class="jarallax-img" alt="">
                <div class="center-y relative text-center">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12 text-center">
                                <h1 data-i18n="menu.cars"></h1>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- section close -->

            <!-- Sidebar filter and car list layout -->
            <div class="container cars-main-container">
                <!-- Mobile Filter Button -->
                <div class="mobile-filter-button-container d-md-none">
                    <button class="btn btn-primary mobile-filter-btn" onclick="toggleMobileFilter()">
                        <i class="fa fa-filter"></i> <span data-i18n="cars.filter_cars">Filter Cars</span>
                    </button>
                </div>
                
                <div class="row">
                    <!-- Desktop Sidebar -->
                    <div class="col-lg-3 col-md-4 small-sidebar d-none d-md-block">
                        <div class="filter-sidebar">
                            <div class="filter-title">
                                <span data-i18n="cars.filters">Filters</span>
                                <a class="filter-clear" id="clear-filters-link" data-i18n="cars.filter_clear">Clear all</a>
                            </div>
                            <hr class="filter-divider">
                            
                            <!-- Date Range Filter -->
                            <div class="filter-category">
                                <h6 class="filter-section-title" data-i18n="cars.filter_date_range">Date Range</h6>
                                <div class="date-range-filter">
                                    <div class="date-input-wrapper">
                                        <i class="fa fa-calendar"></i>
                                        <input type="text" id="filter-date-from" placeholder="From" readonly data-i18n-placeholder="cars.filter_date_from">
                                    </div>
                                    <div class="date-input-wrapper">
                                        <i class="fa fa-calendar"></i>
                                        <input type="text" id="filter-date-to" placeholder="To" readonly data-i18n-placeholder="cars.filter_date_to">
                                    </div>
                                </div>
                            </div>
                            <hr class="filter-divider">
                            
                            <!-- Make Filter -->
                            <div class="filter-category">
                                <h6 class="filter-section-title" data-i18n="cars.filter_make">Make</h6>
                                <div id="filter-make-options"></div>
                            </div>
                            <hr class="filter-divider">
                            
                            <!-- Gear Filter -->
                            <div class="filter-category">
                                <h6 class="filter-section-title" data-i18n="cars.filter_gear">Gear</h6>
                                <div id="filter-gear-options"></div>
                            </div>
                            <hr class="filter-divider">
                            
                            <!-- Fuel Filter -->
                            <div class="filter-category">
                                <h6 class="filter-section-title" data-i18n="cars.filter_fuel">Fuel</h6>
                                <div id="filter-fuel-options"></div>
                            </div>
                            <hr class="filter-divider">
                            
                            <!-- Type Filter -->
                            <div class="filter-category">
                                <h6 class="filter-section-title" data-i18n="cars.filter_type">Type</h6>
                                <div id="filter-type-options"></div>
                            </div>
                            <hr class="filter-divider">
                            
                            <!-- Doors Filter -->
                            <div class="filter-category">
                                <h6 class="filter-section-title" data-i18n="cars.filter_doors">Doors</h6>
                                <div id="filter-doors-options"></div>
                            </div>
                            <hr class="filter-divider">
                            
                            <!-- Passengers Filter -->
                            <div class="filter-category">
                                <h6 class="filter-section-title" data-i18n="cars.filter_passengers">Passengers</h6>
                                <div id="filter-passengers-options"></div>
                            </div>
                            <hr class="filter-divider">
                            
                            <!-- Price Range Filter -->
                            <div class="filter-category">
                                <h6 class="filter-section-title" data-i18n="cars.filter_price">Price Range</h6>
                                <div class="price-range-inputs">
                                    <input type="number" id="filter-price-min" placeholder="From" min="0" data-i18n-placeholder="cars.filter_price_from">
                                    <div class="price-range-divider">—</div>
                                    <input type="number" id="filter-price-max" placeholder="To" min="0" data-i18n-placeholder="cars.filter_price_to">
                                </div>
                            </div>
                            <hr class="filter-divider">
                            
                            <!-- Price Category Filter -->
                            <div class="filter-category">
                                <h6 class="filter-section-title" data-i18n="cars.filter_price_category">Price Category</h6>
                                <div class="filter-option-row">
                                    <label>
                                        <input type="radio" name="price-category" value="econom" id="price-category-econom">
                                        <span class="option-label" data-i18n="cars.filter_econom">Economy</span>
                                    </label>
                                </div>
                                <div class="filter-option-row">
                                    <label>
                                        <input type="radio" name="price-category" value="standard" id="price-category-standard">
                                        <span class="option-label" data-i18n="cars.filter_standard">Standard</span>
                                    </label>
                                </div>
                                <div class="filter-option-row">
                                    <label>
                                        <input type="radio" name="price-category" value="premium" id="price-category-premium">
                                        <span class="option-label" data-i18n="cars.filter_premium">Premium</span>
                                    </label>
                                </div>
                                <div class="filter-option-row">
                                    <label>
                                        <input type="radio" name="price-category" value="all" id="price-category-all" checked>
                                        <span class="option-label" data-i18n="cars.filter_all_types">All Types</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mobile Filter Overlay -->
                    <div class="mobile-filter-overlay" id="mobile-filter-overlay">
                        <div class="mobile-filter-sidebar">
                            <div class="mobile-filter-header">
                                <h5 data-i18n="cars.filter_cars">Filter Cars</h5>
                                <button class="mobile-filter-close" onclick="toggleMobileFilter()">
                                    <i class="fa fa-times"></i>
                                </button>
                            </div>
                            <div class="mobile-filter-content">
                                <div id="mobile-filter-loading" class="text-center py-4">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                    <p class="mt-2 text-muted" data-i18n="cars.loading_filters">Loading filters...</p>
                                </div>
                                <div id="mobile-filter-options" style="display: none;">
<!-- Date Range Filter -->
                                    <div class="filter-category">
                                        <h6 class="filter-section-title" data-i18n="cars.filter_date_range">Date Range</h6>
                                        <div class="date-range-filter">
                                            <div class="date-input-wrapper">
                                                <i class="fa fa-calendar"></i>
                                                <input type="text" id="mobile-filter-date-from" placeholder="From" readonly data-i18n-placeholder="cars.filter_date_from">
                                            </div>
                                            <div class="date-input-wrapper">
                                                <i class="fa fa-calendar"></i>
                                                <input type="text" id="mobile-filter-date-to" placeholder="To" readonly data-i18n-placeholder="cars.filter_date_to">
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="filter-divider">
                                    
                                    <div class="filter-category">
                                        <h6 class="filter-section-title" data-i18n="cars.filter_make">Make</h6>
                                        <div id="mobile-filter-make-options"></div>
                                    </div>
                                    <hr class="filter-divider">
                                    
                                    <div class="filter-category">
                                        <h6 class="filter-section-title" data-i18n="cars.filter_gear">Gear</h6>
                                        <div id="mobile-filter-gear-options"></div>
                                    </div>
                                    <hr class="filter-divider">
                                    
                                    <div class="filter-category">
                                        <h6 class="filter-section-title" data-i18n="cars.filter_fuel">Fuel</h6>
                                        <div id="mobile-filter-fuel-options"></div>
                                    </div>
                                    <hr class="filter-divider">
                                    
                                    <div class="filter-category">
                                        <h6 class="filter-section-title" data-i18n="cars.filter_type">Type</h6>
                                        <div id="mobile-filter-type-options"></div>
                                    </div>
                                    <hr class="filter-divider">
                                    
                                    <div class="filter-category">
                                        <h6 class="filter-section-title" data-i18n="cars.filter_doors">Doors</h6>
                                        <div id="mobile-filter-doors-options"></div>
                                    </div>
                                    <hr class="filter-divider">
                                    
                                    <div class="filter-category">
                                        <h6 class="filter-section-title" data-i18n="cars.filter_passengers">Passengers</h6>
                                        <div id="mobile-filter-passengers-options"></div>
                                    </div>
                                    <hr class="filter-divider">
                                    
                                    <div class="filter-category">
                                        <h6 class="filter-section-title" data-i18n="cars.filter_price">Price Range</h6>
                                        <div class="price-range-inputs">
                                            <input type="number" id="mobile-filter-price-min" placeholder="From" min="0" data-i18n-placeholder="cars.filter_price_from">
                                            <div class="price-range-divider">—</div>
                                            <input type="number" id="mobile-filter-price-max" placeholder="To" min="0" data-i18n-placeholder="cars.filter_price_to">
                                        </div>
                                    </div>
                                    <hr class="filter-divider">
                                    
                                    <div class="filter-category">
                                        <h6 class="filter-section-title" data-i18n="cars.filter_price_category">Price Category</h6>
                                        <div class="filter-option-row">
                                            <label>
                                                <input type="radio" name="mobile-price-category" value="econom" id="mobile-price-category-econom">
                                                <span class="option-label" data-i18n="cars.filter_econom">Economy</span>
                                            </label>
                                        </div>
                                        <div class="filter-option-row">
                                            <label>
                                                <input type="radio" name="mobile-price-category" value="standard" id="mobile-price-category-standard">
                                                <span class="option-label" data-i18n="cars.filter_standard">Standard</span>
                                            </label>
                                        </div>
                                        <div class="filter-option-row">
                                            <label>
                                                <input type="radio" name="mobile-price-category" value="premium" id="mobile-price-category-premium">
                                                <span class="option-label" data-i18n="cars.filter_premium">Premium</span>
                                            </label>
                                        </div>
                                        <div class="filter-option-row">
                                            <label>
                                                <input type="radio" name="mobile-price-category" value="all" id="mobile-price-category-all" checked>
                                                <span class="option-label" data-i18n="cars.filter_all_types">All Types</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="mobile-filter-actions">
                                    <button class="btn btn-outline-secondary" onclick="clearAllFilters()">
                                        <i class="fa fa-times"></i> <span data-i18n="cars.filter_clear">Clear All</span>
                                    </button>
                                    <button class="btn btn-primary" onclick="applyMobileFilters()">
                                        <i class="fa fa-check"></i> <span data-i18n="cars.apply_filters">Apply Filters</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Main Content Area -->
                    <div class="col-lg-9 col-md-8 col-12">
                        <!-- Sort Controls -->
                        <div class="sort-controls">
                            <label class="sort-label" data-i18n="cars.sort_by">Sort by:</label>
                            <select id="sort-select" class="sort-select">
                                <option value="default" data-i18n="cars.sort_default">Default</option>
                                <option value="price-asc" data-i18n="cars.sort_price_low">Price: Low to High</option>
                                <option value="price-desc" data-i18n="cars.sort_price_high">Price: High to Low</option>
                            </select>
                        </div>
                        
                        <div class="row car-list-row" id="car-list">
                            <div class="loading-spinner">
                                <div class="spinner"></div>
                                <p data-i18n="cars.loading_cars">Loading cars...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <!-- content close -->

        <a href="#" id="back-to-top"></a>
        
    <!-- footer begin -->
    <footer class="text-light">
        <div class="container">
            <div class="row g-custom-x">
                <div class="col-lg-3">
                    <div class="widget">
                        <h5 data-i18n="footer.about">About PlusRent</h5>
                        <p data-i18n="footer.about_desc">Where quality meets affordability. We understand the importance of a smooth and enjoyable journey without the burden of excessive costs. That's why we have meticulously crafted our offerings to provide you with top-notch vehicles at minimum expense.</p>
                    </div>
                </div>
                
                <div class="col-lg-3">
                    <div class="widget">
                        <h5 data-i18n="footer.contact_info">Contact Info</h5>
                        <address class="s1">
                            <span data-i18n="footer.address"><i class="id-color fa fa-map-marker fa-lg"></i>Meșterul Manole 20, Chișinău, Republica Moldova</span>
                            <span><i class="id-color fa fa-phone fa-lg"></i><a href="tel:+37360000500">+373 60 000 500</a></span>
                            <span data-i18n="footer.email"><i class="id-color fa fa-envelope-o fa-lg"></i><a href="mailto:contact@plusrent.md">contact@plusrent.md</a></span>
                        </address>
                    </div>
                </div>

                <div class="col-lg-3">
                    <h5 data-i18n="footer.quick_links">Quick Links</h5>
                    <div class="widget">
                        <ul>
                            <li><a href="/" data-i18n="menu.home">Home</a></li>
                            <li><a href="/cars" data-i18n="menu.cars">Cars</a></li>
                            <li><a href="/about" data-i18n="menu.about">About</a></li>
                            <li><a href="/contact" data-i18n="menu.contact">Contact</a></li>
                            <li><a href="/sofer-treaz" data-i18n="menu.sober_driver">Sober Driver</a></li>
                        </ul>
                    </div>
                </div>

                <div class="col-lg-3">
                    <div class="widget">
                        <h5 data-i18n="footer.social_network">Social Network</h5>
                        <div class="social-icons">
                            <a href="https://www.instagram.com/plusrent.md/" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram fa-lg"></i></a>
                            <a href="https://tiktok.me/plusrent" target="_blank" rel="noopener noreferrer"><i class="fab fa-tiktok fa-lg"></i></a>
                        </div>
                    </div>    
                </div>
            </div>
        </div>
        
        <div class="subfooter">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="de-flex">
                            <div class="de-flex-col">
                                <a href="/">
                                    Copyright 2025 - PlusRent
                                </a>
                            </div>
                            <ul class="menu-simple">
                                <li><a href="/terms" data-i18n="terms.footer_terms">Terms &amp; Conditions</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- footer close -->
        
    </div>

    <!-- Javascript Files -->
    <script src="js/plugins.js"></script>
    <script src="js/designesia.js"></script>
    <script src="js/config.js"></script>
    
    <!-- Flatpickr -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    
    <!-- Flatpickr Custom CSS - WORLD CLASS DESIGN -->
    <style>
      /* ====== FLATPICKR CALENDAR - WORLD CLASS DESIGN WITH ANDROID FIX ====== */

      /* ЗАЩИТА ОТ ЗУМА НА МОБИЛЬНЫХ */
      .flatpickr-calendar,
      .flatpickr-calendar * {
        touch-action: manipulation !important;
        -webkit-tap-highlight-color: transparent !important;
        -webkit-touch-callout: none !important;
        -webkit-user-select: none !important;
        -moz-user-select: none !important;
        -ms-user-select: none !important;
        user-select: none !important;
      }

      .flatpickr-wrapper {
        touch-action: manipulation !important;
      }

      .flatpickr-calendar {
        border-radius: 10px;
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.15);
        border: 2px solid #e8eef3;
        overflow: visible !important;
        font-family: inherit;
        font-size: 13px;
        max-height: 380px !important;
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
        will-change: transform;
      }

      .flatpickr-months {
        background: linear-gradient(135deg, #667eea, #764ba2);
        padding: 15px 60px !important;
        border-radius: 18px 18px 0 0;
        position: relative !important;
        min-height: 50px !important;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 5 !important;
        -webkit-user-select: none;
        user-select: none;
      }

      .flatpickr-current-month {
        color: white;
        font-weight: 700;
        font-size: 1rem;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        padding: 0;
      }

      .flatpickr-current-month .flatpickr-monthDropdown-months {
        background: rgba(255, 255, 255, 0.25);
        color: white;
        font-weight: 700;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 8px;
        padding: 4px 8px;
        font-size: 16px !important;
        cursor: pointer;
        transition: all 0.3s ease;
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        touch-action: manipulation !important;
      }

      .flatpickr-current-month .flatpickr-monthDropdown-months:hover {
        background: rgba(255, 255, 255, 0.35);
        border-color: rgba(255, 255, 255, 0.5);
      }

      .flatpickr-current-month .flatpickr-monthDropdown-months option {
        background: #ffffff;
        color: #2d3748;
        font-weight: 600;
        padding: 8px 12px;
        font-size: 16px !important;
      }

      /* ИСПРАВЛЕНИЕ ДВОЙНОЙ ОБВОДКИ - убираем стили у контейнера когда есть dropdown */
      .flatpickr-current-month .numInputWrapper:has(.flatpickr-year-dropdown) {
        background: transparent !important;
        border: none !important;
        padding: 0 !important;
        margin-left: 4px !important;
      }

      /* Fallback для браузеров без :has() */
      .flatpickr-current-month .numInputWrapper[data-has-dropdown="true"] {
        background: transparent !important;
        border: none !important;
        padding: 0 !important;
        margin-left: 4px !important;
      }

      /* Оригинальные стили для обычного numInputWrapper (без dropdown) */
      .flatpickr-current-month .numInputWrapper:not(:has(.flatpickr-year-dropdown)):not([data-has-dropdown="true"]) {
        background: rgba(255, 255, 255, 0.25);
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 8px;
        padding: 3px 6px;
        margin-left: 8px;
        transition: all 0.3s ease;
      }

      .flatpickr-current-month .numInputWrapper:not(:has(.flatpickr-year-dropdown)):not([data-has-dropdown="true"]):hover {
        background: rgba(255, 255, 255, 0.35);
        border-color: rgba(255, 255, 255, 0.5);
      }

      .flatpickr-current-month .numInputWrapper input {
        color: white;
        font-weight: 700;
        font-size: 16px !important;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        width: 50px;
        touch-action: manipulation !important;
      }

      .flatpickr-current-month .numInputWrapper span {
        border-color: rgba(255, 255, 255, 0.4);
        touch-action: manipulation !important;
      }

      .flatpickr-current-month .numInputWrapper span:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      .flatpickr-current-month .numInputWrapper span.arrowUp:after {
        border-bottom-color: white;
      }

      .flatpickr-current-month .numInputWrapper span.arrowDown:after {
        border-top-color: white;
      }

      /* СТРЕЛКИ НАВИГАЦИИ - БАЗОВЫЕ СТИЛИ */
      .flatpickr-prev-month,
      .flatpickr-next-month {
        fill: white;
        position: absolute !important;
        top: 12px !important;
        transform: none !important;
        z-index: 10 !important;
        width: 44px !important;
        height: 44px !important;
        padding: 10px !important;
        background: rgba(255, 255, 255, 0.15) !important;
        border-radius: 50% !important;
        opacity: 1 !important;
        visibility: visible !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        touch-action: manipulation !important;
        cursor: pointer;
        transition: all 0.3s ease;
        -webkit-appearance: none !important;
      }

      .flatpickr-prev-month {
        left: 5px !important;
      }

      .flatpickr-next-month {
        right: 5px !important;
      }

      /* Альтернативные стрелки через псевдоэлементы */
      .flatpickr-prev-month::after {
        content: '‹' !important;
        font-size: 28px !important;
        color: white !important;
        font-weight: bold !important;
        position: absolute !important;
        top: 50% !important;
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
      }

      .flatpickr-next-month::after {
        content: '›' !important;
        font-size: 28px !important;
        color: white !important;
        font-weight: bold !important;
        position: absolute !important;
        top: 50% !important;
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
      }

      /* Прячем оригинальные SVG */
      .flatpickr-prev-month svg,
      .flatpickr-next-month svg {
        display: none !important;
      }

      .flatpickr-prev-month:hover,
      .flatpickr-next-month:hover {
        background: rgba(255, 255, 255, 0.25) !important;
      }

      .flatpickr-prev-month:active,
      .flatpickr-next-month:active {
        background: rgba(255, 255, 255, 0.3) !important;
        transform: scale(0.95) !important;
      }

      /* Weekdays styling */
      .flatpickr-weekdays {
        background: transparent;
        text-align: center;
        overflow: hidden;
        width: 100%;
        display: flex;
        align-items: center;
        height: 28px;
        margin: 0;
        padding: 0 8px;
        -webkit-user-select: none;
        user-select: none;
      }

      .flatpickr-weekdaycontainer {
        display: flex;
        width: 100%;
      }

      .flatpickr-weekday {
        color: #667eea;
        font-weight: 700;
        font-size: 0.75rem;
        text-align: center;
        cursor: default;
        flex: 1;
        line-height: 1;
        margin: 0;
        padding: 0;
        text-transform: uppercase;
        position: relative;
      }

      /* Custom weekday abbreviations */
      .flatpickr-weekday:nth-child(1)::after { content: 'MO'; }
      .flatpickr-weekday:nth-child(2)::after { content: 'TU'; }
      .flatpickr-weekday:nth-child(3)::after { content: 'WE'; }
      .flatpickr-weekday:nth-child(4)::after { content: 'TH'; }
      .flatpickr-weekday:nth-child(5)::after { content: 'FR'; }
      .flatpickr-weekday:nth-child(6)::after { content: 'SA'; }
      .flatpickr-weekday:nth-child(7)::after { content: 'SU'; }

      .flatpickr-weekday::after {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background: white;
      }

      .flatpickr-weekday {
        font-size: 0;
      }

      .flatpickr-weekday::after {
        font-size: 0.75rem;
      }

      /* Days container */
      .flatpickr-days {
        padding: 8px;
        position: relative;
        overflow: hidden !important;
        display: flex;
        align-items: flex-start;
        width: 100%;
        max-height: 280px !important;
        -webkit-user-select: none;
        user-select: none;
      }

      .dayContainer {
        padding: 0;
        outline: 0;
        text-align: left;
        width: 100%;
        min-width: 100%;
        max-width: 100%;
        box-sizing: border-box;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
        transform: translate3d(0px, 0px, 0px);
        opacity: 1;
        height: auto !important;
        max-height: 280px !important;
      }

      /* Individual day cells - DESKTOP */
      .flatpickr-day {
        border-radius: 8px;
        margin: 2px;
        font-weight: 500;
        transition: all 0.3s ease;
        max-width: 35px;
        height: 35px;
        line-height: 35px;
        font-size: 0.85rem;
        flex-basis: 14.2857%;
        display: inline-block;
        position: relative;
        text-align: center;
        cursor: pointer;
        box-sizing: border-box;
        touch-action: manipulation !important;
        -webkit-tap-highlight-color: transparent !important;
        -webkit-user-select: none !important;
        user-select: none !important;
      }

      /* МОБИЛЬНАЯ ОПТИМИЗАЦИЯ - ОСНОВНАЯ */
      @media (pointer: coarse), (max-width: 767px) {
        .flatpickr-day {
          min-width: 44px !important;
          min-height: 44px !important;
          width: 44px;
          height: 44px;
          line-height: 44px;
          margin: 3px !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          touch-action: manipulation !important;
        }
        
        .flatpickr-calendar {
          max-width: 100vw;
          margin: 0 auto;
        }
        
        /* КРИТИЧНЫЕ ИЗМЕНЕНИЯ ДЛЯ МЕСЯЦА И ГОДА НА МОБИЛЬНЫХ */
        .flatpickr-months {
          padding: 12px 40px !important;
        }
        
        .flatpickr-prev-month,
        .flatpickr-next-month {
          width: 34px !important;
          height: 34px !important;
          padding: 5px !important;
          top: 50% !important;
          transform: translateY(-50%) !important;
        }
        
        .flatpickr-prev-month {
          left: 2px !important;
        }
        
        .flatpickr-next-month {
          right: 2px !important;
        }
        
        .flatpickr-prev-month::after,
        .flatpickr-next-month::after {
          font-size: 20px !important;
        }
        
        .flatpickr-current-month {
          padding: 0 !important;
          gap: 3px !important;
          flex-wrap: nowrap !important;
        }
        
        .flatpickr-current-month .flatpickr-monthDropdown-months {
          font-size: 13px !important;
          padding: 2px 4px !important;
          min-width: auto !important;
          white-space: nowrap !important;
        }
        
        /* Мобильные стили для года с dropdown */
        .flatpickr-current-month .numInputWrapper:has(.flatpickr-year-dropdown),
        .flatpickr-current-month .numInputWrapper[data-has-dropdown="true"] {
          margin-left: 2px !important;
          padding: 0 !important;
          min-width: 0 !important;
        }
        
        .flatpickr-current-month .numInputWrapper input {
          font-size: 13px !important;
          width: 52px !important;
          padding: 0 2px !important;
          text-align: center !important;
        }
      }

      /* ====== ANDROID СПЕЦИФИЧНЫЙ ФИКС - ПОКАЗЫВАЕМ ВСЕ ДАТЫ ТЕКУЩЕГО МЕСЯЦА ====== */
      /* Определяем Android устройства */
      @media (pointer: coarse) and (hover: none) {
        /* Скрываем ТОЛЬКО даты предыдущего и следующего месяцев */
        .flatpickr-day.prevMonthDay {
          display: none !important;
          visibility: hidden !important;
        }
        
        .flatpickr-day.nextMonthDay {
          display: none !important;
          visibility: hidden !important;
        }
        
        /* Используем grid layout для равномерного распределения всех дат текущего месяца */
        .dayContainer {
          display: grid !important;
          grid-template-columns: repeat(7, 1fr) !important;
          gap: 3px !important;
          padding: 6px !important;
          align-items: start !important;
          justify-items: center !important;
          grid-auto-rows: 44px !important;
        }
        
        /* Оптимизируем размеры дат для Android - показываем ВСЕ даты месяца */
        .flatpickr-day {
          width: 100% !important;
          max-width: 42px !important;
          height: 42px !important;
          line-height: 42px !important;
          margin: 0 !important;
          padding: 0 !important;
          font-size: 0.8rem !important;
        }
        
        /* Увеличиваем высоту контейнера чтобы влезли ВСЕ даты месяца (до 6 недель) */
        .flatpickr-days {
          max-height: 320px !important;
          min-height: 280px !important;
        }
        
        .dayContainer {
          max-height: 320px !important;
          min-height: 280px !important;
        }
        
        .flatpickr-calendar {
          max-height: 430px !important;
        }
        
        /* Занятые даты (occupied) остаются красивыми и видимыми */
        .flatpickr-day.occupied {
          display: flex !important;
          visibility: visible !important;
        }
        
        /* Disabled даты текущего месяца тоже показываем (прошедшие дни) */
        .flatpickr-day.flatpickr-disabled:not(.prevMonthDay):not(.nextMonthDay) {
          display: flex !important;
          visibility: visible !important;
        }
      }

      /* iOS специфичные фиксы - НЕ ТРОГАЕМ, работает хорошо */
      @supports (-webkit-touch-callout: none) {
        .flatpickr-day.prevMonthDay,
        .flatpickr-day.nextMonthDay {
          display: none !important;
        }
        
        .dayContainer {
          display: grid !important;
          grid-template-columns: repeat(7, 1fr) !important;
          grid-auto-rows: 44px !important;
          max-height: 280px !important;
          overflow: hidden !important;
        }
        
        .flatpickr-calendar {
          -webkit-user-select: none !important;
          -webkit-touch-callout: none !important;
        }
        
        .flatpickr-day {
          width: auto !important;
          height: 44px !important;
          margin: 2px !important;
          padding: 8px !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
        }
        
        .flatpickr-calendar input,
        .flatpickr-calendar select {
          font-size: 16px !important;
        }
      }

      .flatpickr-day.occupied {
        background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
        border: 2px solid #ef4444 !important;
        color: #991b1b !important;
        position: relative;
        cursor: not-allowed;
        font-weight: 600;
      }

      .flatpickr-day.occupied::before {
        content: '🚗';
        position: absolute;
        top: 1px;
        right: 1px;
        font-size: 9px;
        filter: grayscale(0.5);
      }

      .flatpickr-day.occupied:hover {
        background: linear-gradient(135deg, #fecaca 0%, #fca5a5 100%) !important;
        border-color: #dc2626 !important;
      }

      .flatpickr-day:not(.occupied):not(.flatpickr-disabled):hover {
        background: linear-gradient(135deg, #dbeafe, #bfdbfe);
        border-color: #667eea;
        transform: scale(1.08);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
      }

      .flatpickr-day.selected,
      .flatpickr-day.startRange,
      .flatpickr-day.endRange,
      .flatpickr-day.selected.inRange,
      .flatpickr-day.startRange.inRange,
      .flatpickr-day.endRange.inRange,
      .flatpickr-day.selected:focus,
      .flatpickr-day.startRange:focus,
      .flatpickr-day.endRange:focus,
      .flatpickr-day.selected:hover,
      .flatpickr-day.startRange:hover,
      .flatpickr-day.endRange:hover,
      .flatpickr-day.selected.prevMonthDay,
      .flatpickr-day.startRange.prevMonthDay,
      .flatpickr-day.endRange.prevMonthDay,
      .flatpickr-day.selected.nextMonthDay,
      .flatpickr-day.startRange.nextMonthDay,
      .flatpickr-day.endRange.nextMonthDay {
        background: linear-gradient(135deg, #667eea, #764ba2) !important;
        border-color: #5568d3 !important;
        box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
        font-weight: 700;
        color: white !important;
      }

      .flatpickr-day.inRange {
        background: #e3f2fd;
        border-color: transparent;
        box-shadow: -5px 0 0 #e3f2fd, 5px 0 0 #e3f2fd;
      }

      .flatpickr-day.today {
        border: 2px solid #667eea;
        font-weight: 700;
        background: #e3f2fd;
      }

      .flatpickr-day.today:not(.selected) {
        color: #5568d3;
      }

      .flatpickr-day.flatpickr-disabled,
      .flatpickr-day.flatpickr-disabled:hover,
      .flatpickr-day.prevMonthDay,
      .flatpickr-day.nextMonthDay,
      .flatpickr-day.notAllowed,
      .flatpickr-day.notAllowed.prevMonthDay,
      .flatpickr-day.notAllowed.nextMonthDay {
        color: #cbd5e0 !important;
        background: #f7fafc;
        cursor: not-allowed;
        position: relative;
        border-color: transparent;
      }

      .flatpickr-day.flatpickr-disabled::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 10%;
        right: 10%;
        height: 1px;
        background: #e2e8f0;
      }

      /* Time picker (if used) */
      .flatpickr-time {
        text-align: center;
        outline: 0;
        display: block;
        height: 0;
        line-height: 40px;
        max-height: 40px;
        box-sizing: border-box;
        overflow: hidden;
        display: flex;
        background: white;
        border-radius: 0 0 8px 8px;
      }

      .flatpickr-time.hasTime {
        height: 40px;
        border-top: 1px solid #e8eef3;
      }

      .flatpickr-time input {
        font-size: 16px !important;
        font-weight: 600;
        touch-action: manipulation !important;
      }

      /* ДОПОЛНИТЕЛЬНЫЕ RESPONSIVE НАСТРОЙКИ */
      @media (max-width: 480px) {
        .flatpickr-calendar {
          font-size: 12px;
          width: calc(100vw - 20px);
          max-width: 340px;
          margin: 0 auto;
          max-height: 370px !important;
        }
        
        .flatpickr-day {
          font-size: 0.8rem;
        }
        
        .flatpickr-weekday::after {
          font-size: 0.65rem;
        }
        
        .flatpickr-current-month .flatpickr-monthDropdown-months {
          font-size: 12px !important;
          padding: 2px 3px !important;
        }
        
        .flatpickr-current-month .numInputWrapper input {
          font-size: 12px !important;
          width: 48px !important;
        }
        
        .flatpickr-months {
          padding: 10px 36px !important;
          min-height: 45px !important;
        }
        
        .flatpickr-prev-month,
        .flatpickr-next-month {
          width: 30px !important;
          height: 30px !important;
          padding: 4px !important;
        }
        
        .flatpickr-prev-month::after,
        .flatpickr-next-month::after {
          font-size: 18px !important;
        }
      }

      /* iPhone SE и другие маленькие экраны */
      @media screen and (max-width: 375px) {
        .flatpickr-months {
          padding: 8px 34px !important;
        }
        
        .flatpickr-prev-month,
        .flatpickr-next-month {
          width: 28px !important;
          height: 28px !important;
          padding: 3px !important;
        }
        
        .flatpickr-prev-month::after,
        .flatpickr-next-month::after {
          font-size: 16px !important;
        }
        
        .flatpickr-current-month .flatpickr-monthDropdown-months {
          font-size: 11px !important;
          padding: 1px 3px !important;
        }
        
        .flatpickr-current-month .numInputWrapper input {
          font-size: 11px !important;
          width: 45px !important;
          padding: 0 1px !important;
        }
        
        .flatpickr-current-month .numInputWrapper {
          padding: 1px 2px !important;
        }
      }

      /* iPhone specific */
      @media screen and (max-width: 414px) and (-webkit-min-device-pixel-ratio: 2) {
        .flatpickr-calendar {
          max-width: calc(100vw - 20px) !important;
          max-height: 370px !important;
        }
      }

      /* iPad specific */
      @media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) {
        .flatpickr-calendar {
          max-height: 400px !important;
        }
      }

      /* Глобальная защита от зума */
      .flatpickr-calendar input[type="text"],
      .flatpickr-calendar input[type="number"],
      .flatpickr-calendar select {
        font-size: 16px !important;
        touch-action: manipulation !important;
      }
    </style>
    
    <!-- Cars Filter Modal JavaScript -->
    <script src="js/cars-filter-modal.js"></script>
    
    <!-- Main Cars Page Script -->
    <script>
      // Global variables
      let allCarsFullCache = [];
      let priceFilterSettings = {};
      let allOccupiedDatesCache = {}; // Cache for ALL cars occupied dates
      let currentLanguage = localStorage.getItem('lang') || 'ro';

      // Translation mapping for fuel types
      const fuelTranslations = {
        'gasoline': {
          'ro': 'Benzină',
          'ru': 'Бензин',
          'en': 'Gasoline'
        },
        'diesel': {
          'ro': 'Motorină',
          'ru': 'Дизель',
          'en': 'Diesel'
        },
        'hybrid': {
          'ro': 'Hibrid',
          'ru': 'Гибрид',
          'en': 'Hybrid'
        },
        'electric': {
          'ro': 'Electric',
          'ru': 'Электрический',
          'en': 'Electric'
        }
      };

      // Translation mapping for car types
      const carTypeTranslations = {
        'sedan': {
          'ro': 'Sedan',
          'ru': 'Седан',
          'en': 'Sedan'
        },
        'suv': {
          'ro': 'SUV',
          'ru': 'Внедорожник',
          'en': 'SUV'
        },
        'crossover': {
          'ro': 'Crossover',
          'ru': 'Кроссовер',
          'en': 'Crossover'
        },
        'hatchback': {
          'ro': 'Hatchback',
          'ru': 'Хэтчбек',
          'en': 'Hatchback'
        },
        'coupe': {
          'ro': 'Coupe',
          'ru': 'Купе',
          'en': 'Coupe'
        },
        'wagon': {
          'ro': 'Break',
          'ru': 'Универсал',
          'en': 'Wagon'
        },
        'van': {
          'ro': 'Van',
          'ru': 'Фургон',
          'en': 'Van'
        }
      };

      // Format display text
      function formatDisplayText(rawKey) {
        if (!rawKey) return '';
        return rawKey
          .split('_')
          .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())
          .join(' ');
      }

      // Translate fuel type based on current language
      function translateFuelType(fuelType) {
        if (!fuelType) return '';
        const normalizedFuel = fuelType.toLowerCase();
        if (fuelTranslations[normalizedFuel] && fuelTranslations[normalizedFuel][currentLanguage]) {
          return fuelTranslations[normalizedFuel][currentLanguage];
        }
        return formatDisplayText(fuelType);
      }

      // Translate car type based on current language
      function translateCarType(carType) {
        if (!carType) return '';
        const normalizedType = carType.toLowerCase();
        if (carTypeTranslations[normalizedType] && carTypeTranslations[normalizedType][currentLanguage]) {
          return carTypeTranslations[normalizedType][currentLanguage];
        }
        return formatDisplayText(carType);
      }

      // Get unique options for a field
      function getUniqueOptions(cars, field) {
        return Array.from(new Set(cars.map(car => car[field]).filter(Boolean))).sort();
      }

      // Load price filter settings from API
      async function loadPriceFilterSettings() {
        try {
          const response = await fetch(`${window.API_BASE_URL}/api/fee-settings/public`);
          if (response.ok) {
            const feeSettings = await response.json();
            priceFilterSettings = {
              economy: {
                min: feeSettings.economy_price_min ?? 0,
                max: feeSettings.economy_price_max ?? 30
              },
              standard: {
                min: feeSettings.standard_price_min ?? 31,
                max: feeSettings.standard_price_max ?? 60
              },
              premium: {
                min: feeSettings.premium_price_min ?? 61,
                max: feeSettings.premium_price_max ?? 999
              }
            };
          }
        } catch (error) {
          console.error('Error loading price filter settings:', error);
          priceFilterSettings = {
            economy: { min: 0, max: 30 },
            standard: { min: 31, max: 60 },
            premium: { min: 61, max: 999 }
          };
        }
      }

      // Load occupied dates for ALL cars at once (optimized)
      async function loadAllOccupiedDates() {
        try {
          console.log('📅 Loading occupied dates for ALL cars...');
          const response = await fetch(`${window.API_BASE_URL}/api/bookings/occupied-dates`);
          if (response.ok) {
            const data = await response.json();
            console.log('✅ Occupied dates loaded:', data);
            
            // Store in cache: { car_id: [array of occupied dates] }
            if (data.occupied_dates_by_car) {
              Object.keys(data.occupied_dates_by_car).forEach(carId => {
                allOccupiedDatesCache[carId] = data.occupied_dates_by_car[carId].occupied_dates || [];
              });
            }
            
            return allOccupiedDatesCache;
          }
        } catch (error) {
          console.error('❌ Error loading all occupied dates:', error);
        }
        
        return {};
      }

      // Get occupied dates for a specific car from cache
      function getOccupiedDatesForCar(carId) {
        return allOccupiedDatesCache[carId] || [];
      }

      // Check if car is available in date range
      function isCarAvailableInDateRange(occupiedDates, dateFrom, dateTo) {
        if (!dateFrom || !dateTo) {
          return true; // Если даты не выбраны, показываем все машины
        }
        
        if (!occupiedDates || occupiedDates.length === 0) {
          return true; // Если нет занятых дат, машина свободна
        }

        const startDate = new Date(dateFrom);
        const endDate = new Date(dateTo);
        
        // Нормализация дат (убираем время)
        startDate.setHours(0, 0, 0, 0);
        endDate.setHours(0, 0, 0, 0);
        
        // Генерируем все даты в запрошенном диапазоне
        const requestedDates = [];
        const currentDate = new Date(startDate);
        
        while (currentDate <= endDate) {
          const dateStr = currentDate.toISOString().split('T')[0];
          requestedDates.push(dateStr);
          currentDate.setDate(currentDate.getDate() + 1);
        }
        
        // Проверяем, есть ли пересечения с занятыми датами
        for (let requestedDate of requestedDates) {
          if (occupiedDates.includes(requestedDate)) {
            return false; // Машина занята хотя бы в один из дней диапазона
          }
        }
        
        return true; // Машина свободна на весь период
      }

      // Get current sidebar filters
      function getCurrentSidebarFilters() {
        const params = new URLSearchParams(window.location.search);
        return {
          make_name: params.get('make_name') ? params.get('make_name').split(',') : [],
          gear_type: params.get('gear_type') ? params.get('gear_type').split(',') : [],
          fuel_type: params.get('fuel_type') ? params.get('fuel_type').split(',') : [],
          car_type: params.get('car_type') ? params.get('car_type').split(',') : [],
          num_doors: params.get('num_doors') ? params.get('num_doors').split(',') : [],
          num_passengers: params.get('num_passengers') ? params.get('num_passengers').split(',') : [],
          date_from: params.get('date_from') || '',
          date_to: params.get('date_to') || ''
        };
      }

      // Render filter options with counts
      function renderFilterOptions(containerId, options, selectedValues, allCarsFull, currentFilters, field) {
        const container = document.getElementById(containerId);
        if (!container) return;
        
        const countCache = new Map();
        
        if (allCarsFull && allCarsFull.length > 0) {
          options.forEach(opt => {
            const count = allCarsFull.filter(car => {
              if (String(car[field]) !== String(opt)) return false;
              
              for (const key in currentFilters) {
                if (key === field || key === 'date_from' || key === 'date_to') continue;
                if (!currentFilters[key] || !currentFilters[key].length) continue;
                if (!currentFilters[key].includes(String(car[key]))) return false;
              }
              return true;
            }).length;
            countCache.set(opt, count);
          });
        }
        
        const html = options.map(opt => {
          const count = countCache.get(opt) || 0;
          const isSelected = selectedValues.includes(String(opt));
          const isDisabled = count === 0 && !isSelected;
          
          // Translate fuel types and car types
          let displayText = opt;
          if (field === 'fuel_type') {
            displayText = translateFuelType(opt);
          } else if (field === 'car_type') {
            displayText = translateCarType(opt);
          }
          
          return `
            <div class="filter-option-row ${isDisabled ? 'disabled-option' : ''}">
              <label>
                <input type="checkbox" value="${opt}" ${isSelected ? 'checked' : ''} ${isDisabled ? 'disabled' : ''}>
                <span class="option-label ${isDisabled ? 'disabled-text' : ''}">${displayText}</span>
              </label>
              <span class="option-count ${isDisabled ? 'disabled-count' : ''}">${count}</span>
            </div>
          `;
        }).join('');
        
        container.innerHTML = html;
      }

      // Get selected values from checkboxes
      function getSelectedValues(containerId) {
        return Array.from(document.querySelectorAll(`#${containerId} input[type=checkbox]:checked`)).map(cb => cb.value);
      }

      // Update filters and fetch cars
      async function updateFiltersAndFetch() {
        const make = getSelectedValues('filter-make-options');
        const gear = getSelectedValues('filter-gear-options');
        const fuel = getSelectedValues('filter-fuel-options');
        const type = getSelectedValues('filter-type-options');
        const doors = getSelectedValues('filter-doors-options');
        const passengers = getSelectedValues('filter-passengers-options');
        const priceMin = document.getElementById('filter-price-min').value;
        const priceMax = document.getElementById('filter-price-max').value;
        const dateFrom = document.getElementById('filter-date-from').value;
        const dateTo = document.getElementById('filter-date-to').value;
        
        const params = new URLSearchParams();
        if (make.length) params.set('make_name', make.join(','));
        if (gear.length) params.set('gear_type', gear.join(','));
        if (fuel.length) params.set('fuel_type', fuel.join(','));
        if (type.length) params.set('car_type', type.join(','));
        if (doors.length) params.set('num_doors', doors.join(','));
        if (passengers.length) params.set('num_passengers', passengers.join(','));
        if (priceMin) params.set('min_price', priceMin);
        if (priceMax) params.set('max_price', priceMax);
        if (dateFrom) params.set('date_from', dateFrom);
        if (dateTo) params.set('date_to', dateTo);
        
        const newUrl = window.location.pathname + (params.toString() ? '?' + params.toString() : '');
        window.history.pushState({}, '', newUrl);
        await fetchAndRenderCars();
      }

      // Sort cars based on selected option
      function sortCars(cars, sortOption) {
        if (sortOption === 'default') {
          return cars;
        }
        
        const sorted = [...cars];
        
        if (sortOption === 'price-asc' || sortOption === 'price-desc') {
          sorted.sort((a, b) => {
            const priceA = getLowestPrice(a);
            const priceB = getLowestPrice(b);
            
            if (sortOption === 'price-asc') {
              return priceA - priceB;
            } else {
              return priceB - priceA;
            }
          });
        }
        
        return sorted;
      }

      // Get lowest price from car price policy
      function getLowestPrice(car) {
        if (!car.price_policy) return 999999;
        
        const pricePolicy = typeof car.price_policy === 'string' ? JSON.parse(car.price_policy) : car.price_policy;
        const prices = Object.values(pricePolicy).map(price => parseInt(price));
        return Math.min(...prices);
      }

      // Fetch and render cars
      async function fetchAndRenderCars() {
        const carListDiv = document.getElementById('car-list');
        const sortSelect = document.getElementById('sort-select');
        const sortOption = sortSelect ? sortSelect.value : 'default';
        
        carListDiv.innerHTML = '<div class="loading-spinner"><div class="spinner"></div><p data-i18n="cars.loading_cars">Loading cars...</p></div>';
        
        try {
          const params = new URLSearchParams(window.location.search);
          const dateFrom = params.get('date_from');
          const dateTo = params.get('date_to');
          
          const res = await fetch(`${window.API_BASE_URL}/api/cars${window.location.search}`);
          let cars = await res.json();
          
          // Фильтрация по доступности в выбранном диапазоне дат
          if (dateFrom && dateTo) {
            console.log(`🔍 Filtering cars for date range: ${dateFrom} to ${dateTo}`);
            
            const availableCars = [];
            
            for (let car of cars) {
              // Получаем занятые даты для каждой машины из кэша
              const occupiedDates = getOccupiedDatesForCar(car.id);
              
              console.log(`Car ${car.id} (${car.make_name} ${car.model_name}):`, {
                occupiedDates: occupiedDates,
                isAvailable: isCarAvailableInDateRange(occupiedDates, dateFrom, dateTo)
              });
              
              // Проверяем доступность машины в заданном диапазоне
              if (isCarAvailableInDateRange(occupiedDates, dateFrom, dateTo)) {
                availableCars.push(car);
              }
            }
            
            cars = availableCars;
            console.log(`✅ Found ${cars.length} available cars for the selected date range`);
          }
          
          // Сортировка машин
          cars = sortCars(cars, sortOption);
          
          if (!cars.length) {
            carListDiv.innerHTML = '<div class="col-12"><div class="no-cars-message"><i class="fa fa-car"></i><p data-i18n="cars.no_cars_available">No cars available for the selected date range.</p><small data-i18n="cars.try_different_dates">Please try different dates or clear filters.</small></div></div>';
            renderSidebarOptions(allCarsFullCache);
            if (typeof updateContent === 'function') {
              updateContent();
            }
            return;
          }
          
          const carsHtml = cars.map(car => {
            const isPremium = car.is_premium === 1 || car.is_premium === true;
            const rentNowUrl = `car-single.html?id=${car.id}`;
            const lowestPrice = getLowestPrice(car);
            
            const carHtml = `
              <div class="col-xl-4 col-lg-4 col-md-6 col-12">
                <div class="de-item mb30${isPremium ? ' premium' : ''}">
                  <div class="d-img">
                    <img src="${car.head_image && car.head_image.startsWith('http') ? car.head_image : (car.head_image ? window.API_BASE_URL + car.head_image : window.API_BASE_URL + '/uploads/placeholder.png')}" class="img-fluid" alt="${formatDisplayText(car.make_name)} ${formatDisplayText(car.model_name)}">
                    ${isPremium ? '<div class="premium-badge">HOT</div>' : ''}
                  </div>
                  <div class="d-info">
                    <div class="d-text">
                      <h4>${formatDisplayText(car.make_name)}</h4>
                      <p>${formatDisplayText(car.model_name)}</p>
                      <div class="d-atr-group">
                        <span class="d-atr">
                          <img src="images/icons/1-green.svg" alt="">
                          <span>${car.num_passengers || '-'}</span>
                        </span>
                        <span class="d-atr">
                          <img src="images/icons/2-green.svg" alt="">
                          <span>${car.luggage || '-'}</span>
                        </span>
                        <span class="d-atr">
                          <img src="images/icons/3-green.svg" alt="">
                          ${car.num_doors || '-'}
                        </span>
                        <span class="d-atr">
                          <img src="images/icons/4-green.svg" alt="">
                          <span>${translateCarType(car.car_type) || '-'}</span>
                        </span>
                      </div>
                      <div class="d-price">
                        <span data-i18n="cars.daily_rate">Daily rate from</span>
                        <span>${lowestPrice !== 999999 ? lowestPrice + '€' : 'N/A'}</span>
                      </div>
                      <a class="btn-main" href="${rentNowUrl}" data-i18n="cars.rent_now">Rent Now</a>
                    </div>
                  </div>
                </div>
              </div>
            `;
            
            return carHtml;
          }).join('');
          
          carListDiv.innerHTML = carsHtml;
          renderSidebarOptions(allCarsFullCache);
          
          if (typeof updateContent === 'function') {
            updateContent();
          }
        } catch (error) {
          console.error('❌ Error fetching cars:', error);
          carListDiv.innerHTML = '<div class="col-12 text-center"><p style="font-size: 1.2rem; color: #ff6b6b; padding: 3rem;">Error loading cars. Please try again later.</p></div>';
        }
      }

      // Render sidebar options
      function renderSidebarOptions(allCarsFull) {
        const params = new URLSearchParams(window.location.search);
        const selectedMakes = params.get('make_name') ? params.get('make_name').split(',') : [];
        const selectedGears = params.get('gear_type') ? params.get('gear_type').split(',') : [];
        const selectedFuels = params.get('fuel_type') ? params.get('fuel_type').split(',') : [];
        const selectedTypes = params.get('car_type') ? params.get('car_type').split(',') : [];
        const selectedDoors = params.get('num_doors') ? params.get('num_doors').split(',') : [];
        const selectedPassengers = params.get('num_passengers') ? params.get('num_passengers').split(',') : [];
        const priceMin = params.get('min_price') || '';
        const priceMax = params.get('max_price') || '';
        const currentFilters = getCurrentSidebarFilters();

        renderFilterOptions('filter-make-options', getUniqueOptions(allCarsFull, 'make_name'), selectedMakes, allCarsFull, currentFilters, 'make_name');
        renderFilterOptions('filter-gear-options', getUniqueOptions(allCarsFull, 'gear_type'), selectedGears, allCarsFull, currentFilters, 'gear_type');
        renderFilterOptions('filter-fuel-options', getUniqueOptions(allCarsFull, 'fuel_type'), selectedFuels, allCarsFull, currentFilters, 'fuel_type');
        renderFilterOptions('filter-type-options', getUniqueOptions(allCarsFull, 'car_type'), selectedTypes, allCarsFull, currentFilters, 'car_type');
        renderFilterOptions('filter-doors-options', getUniqueOptions(allCarsFull, 'num_doors'), selectedDoors, allCarsFull, currentFilters, 'num_doors');
        renderFilterOptions('filter-passengers-options', getUniqueOptions(allCarsFull, 'num_passengers'), selectedPassengers, allCarsFull, currentFilters, 'num_passengers');
        
        document.getElementById('filter-price-min').value = priceMin;
        document.getElementById('filter-price-max').value = priceMax;
        
        // Set price category radio buttons
        const priceCategoryRadios = document.querySelectorAll('input[name="price-category"]');
        priceCategoryRadios.forEach(radio => radio.checked = false);
        
        if (priceFilterSettings.economy && priceMin === priceFilterSettings.economy.min.toString() && priceMax === priceFilterSettings.economy.max.toString()) {
          document.getElementById('price-category-econom').checked = true;
        } else if (priceFilterSettings.standard && priceMin === priceFilterSettings.standard.min.toString() && priceMax === priceFilterSettings.standard.max.toString()) {
          document.getElementById('price-category-standard').checked = true;
        } else if (priceFilterSettings.premium && priceMin === priceFilterSettings.premium.min.toString() && priceMax === priceFilterSettings.premium.max.toString()) {
          document.getElementById('price-category-premium').checked = true;
        } else {
          document.getElementById('price-category-all').checked = true;
        }

        // Attach change listeners
        ['filter-make-options', 'filter-gear-options', 'filter-fuel-options', 'filter-type-options', 'filter-doors-options', 'filter-passengers-options'].forEach(id => {
          document.getElementById(id).querySelectorAll('input[type=checkbox]').forEach(cb => {
            cb.addEventListener('change',updateFiltersAndFetch);
          });
        });
        
        document.getElementById('filter-price-min').addEventListener('change', updateFiltersAndFetch);
        document.getElementById('filter-price-max').addEventListener('change', updateFiltersAndFetch);
        
        document.querySelectorAll('input[name="price-category"]').forEach(radio => {
          radio.addEventListener('change', handlePriceCategoryChange);
        });
        
        document.querySelectorAll('input[name="mobile-price-category"]').forEach(radio => {
          radio.addEventListener('change', handleMobilePriceCategoryChange);
        });
      }

      // Handle price category changes
      function handlePriceCategoryChange(e) {
        const selectedCategory = e.target.value;
        
        document.getElementById('filter-price-min').value = '';
        document.getElementById('filter-price-max').value = '';
        
        switch (selectedCategory) {
          case 'econom':
            document.getElementById('filter-price-min').value = priceFilterSettings.economy.min;
            document.getElementById('filter-price-max').value = priceFilterSettings.economy.max;
            break;
          case 'standard':
            document.getElementById('filter-price-min').value = priceFilterSettings.standard.min;
            document.getElementById('filter-price-max').value = priceFilterSettings.standard.max;
            break;
          case 'premium':
            document.getElementById('filter-price-min').value = priceFilterSettings.premium.min;
            document.getElementById('filter-price-max').value = priceFilterSettings.premium.max;
            break;
          case 'all':
            break;
        }
        
        updateFiltersAndFetch();
      }

      // Handle mobile price category changes
      function handleMobilePriceCategoryChange(e) {
        const selectedCategory = e.target.value;
        const priceMinEl = document.getElementById('mobile-filter-price-min');
        const priceMaxEl = document.getElementById('mobile-filter-price-max');
        
        if (!priceMinEl || !priceMaxEl) return;
        
        priceMinEl.value = '';
        priceMaxEl.value = '';
        
        switch (selectedCategory) {
          case 'econom':
            priceMinEl.value = priceFilterSettings.economy.min;
            priceMaxEl.value = priceFilterSettings.economy.max;
            break;
          case 'standard':
            priceMinEl.value = priceFilterSettings.standard.min;
            priceMaxEl.value = priceFilterSettings.standard.max;
            break;
          case 'premium':
            priceMinEl.value = priceFilterSettings.premium.min;
            priceMaxEl.value = priceFilterSettings.premium.max;
            break;
          case 'all':
            break;
        }
      }

      // Initialize date pickers
      function initializeDatePickers() {
        const today = new Date();
        
        // Desktop date pickers
        const dateFromPicker = flatpickr('#filter-date-from', {
          dateFormat: 'Y-m-d',
          minDate: today,
          onChange: function(selectedDates, dateStr) {
            dateToPickerDesktop.set('minDate', dateStr);
            updateFiltersAndFetch();
          }
        });
        
        const dateToPickerDesktop = flatpickr('#filter-date-to', {
          dateFormat: 'Y-m-d',
          minDate: today,
          onChange: function() {
            updateFiltersAndFetch();
          }
        });
        
        // Mobile date pickers
        const mobileDateFromPicker = flatpickr('#mobile-filter-date-from', {
          dateFormat: 'Y-m-d',
          minDate: today,
          onChange: function(selectedDates, dateStr) {
            mobileDateToPicker.set('minDate', dateStr);
          }
        });
        
        const mobileDateToPicker = flatpickr('#mobile-filter-date-to', {
          dateFormat: 'Y-m-d',
          minDate: today
        });
        
        // Sync desktop values with URL params
        const params = new URLSearchParams(window.location.search);
        const dateFrom = params.get('date_from');
        const dateTo = params.get('date_to');
        
        if (dateFrom) {
          dateFromPicker.setDate(dateFrom);
          mobileDateFromPicker.setDate(dateFrom);
        }
        if (dateTo) {
          dateToPickerDesktop.setDate(dateTo);
          mobileDateToPicker.setDate(dateTo);
        }
      }

      // Mobile filter functions
      function toggleMobileFilter() {
        const overlay = document.getElementById('mobile-filter-overlay');
        if (!overlay) return;
        
        if (overlay.classList.contains('active')) {
          overlay.classList.remove('active');
          document.body.style.overflow = '';
        } else {
          overlay.classList.add('active');
          document.body.style.overflow = 'hidden';
          setTimeout(() => renderMobileFilterOptions(), 50);
        }
      }

      function renderMobileFilterOptions() {
        const loadingEl = document.getElementById('mobile-filter-loading');
        const optionsEl = document.getElementById('mobile-filter-options');
        if (loadingEl) loadingEl.style.display = 'block';
        if (optionsEl) optionsEl.style.display = 'none';
        
        const params = new URLSearchParams(window.location.search);
        const selectedMakes = params.get('make_name') ? params.get('make_name').split(',') : [];
        const selectedGears = params.get('gear_type') ? params.get('gear_type').split(',') : [];
        const selectedFuels = params.get('fuel_type') ? params.get('fuel_type').split(',') : [];
        const selectedTypes = params.get('car_type') ? params.get('car_type').split(',') : [];
        const selectedDoors = params.get('num_doors') ? params.get('num_doors').split(',') : [];
        const selectedPassengers = params.get('num_passengers') ? params.get('num_passengers').split(',') : [];
        const priceMin = params.get('min_price') || '';
        const priceMax = params.get('max_price') || '';
        
        const currentFilters = getCurrentSidebarFilters();

        requestAnimationFrame(() => {
          renderFilterOptions('mobile-filter-make-options', getUniqueOptions(allCarsFullCache, 'make_name'), selectedMakes, allCarsFullCache, currentFilters, 'make_name');
          renderFilterOptions('mobile-filter-gear-options', getUniqueOptions(allCarsFullCache, 'gear_type'), selectedGears, allCarsFullCache, currentFilters, 'gear_type');
          renderFilterOptions('mobile-filter-fuel-options', getUniqueOptions(allCarsFullCache, 'fuel_type'), selectedFuels, allCarsFullCache, currentFilters, 'fuel_type');
          renderFilterOptions('mobile-filter-type-options', getUniqueOptions(allCarsFullCache, 'car_type'), selectedTypes, allCarsFullCache, currentFilters, 'car_type');
          renderFilterOptions('mobile-filter-doors-options', getUniqueOptions(allCarsFullCache, 'num_doors'), selectedDoors, allCarsFullCache, currentFilters, 'num_doors');
          renderFilterOptions('mobile-filter-passengers-options', getUniqueOptions(allCarsFullCache, 'num_passengers'), selectedPassengers, allCarsFullCache, currentFilters, 'num_passengers');
          
          const priceMinEl = document.getElementById('mobile-filter-price-min');
          const priceMaxEl = document.getElementById('mobile-filter-price-max');
          if (priceMinEl) priceMinEl.value = priceMin;
          if (priceMaxEl) priceMaxEl.value = priceMax;
          
          if (loadingEl) loadingEl.style.display = 'none';
          if (optionsEl) optionsEl.style.display = 'block';
          
          const mobilePriceCategoryRadios = document.querySelectorAll('input[name="mobile-price-category"]');
          mobilePriceCategoryRadios.forEach(radio => radio.checked = false);
          
          if (priceFilterSettings.economy && priceMin === priceFilterSettings.economy.min.toString() && priceMax === priceFilterSettings.economy.max.toString()) {
            document.getElementById('mobile-price-category-econom').checked = true;
          } else if (priceFilterSettings.standard && priceMin === priceFilterSettings.standard.min.toString() && priceMax === priceFilterSettings.standard.max.toString()) {
            document.getElementById('mobile-price-category-standard').checked = true;
          } else if (priceFilterSettings.premium && priceMin === priceFilterSettings.premium.min.toString() && priceMax === priceFilterSettings.premium.max.toString()) {
            document.getElementById('mobile-price-category-premium').checked = true;
          } else {
            document.getElementById('mobile-price-category-all').checked = true;
          }
          
          document.querySelectorAll('input[name="mobile-price-category"]').forEach(radio => {
            radio.removeEventListener('change', handleMobilePriceCategoryChange);
            radio.addEventListener('change', handleMobilePriceCategoryChange);
          });
        });
      }

      function applyMobileFilters() {
        const make = getSelectedValues('mobile-filter-make-options');
        const gear = getSelectedValues('mobile-filter-gear-options');
        const fuel = getSelectedValues('mobile-filter-fuel-options');
        const type = getSelectedValues('mobile-filter-type-options');
        const doors = getSelectedValues('mobile-filter-doors-options');
        const passengers = getSelectedValues('mobile-filter-passengers-options');
        const priceMin = document.getElementById('mobile-filter-price-min').value;
        const priceMax = document.getElementById('mobile-filter-price-max').value;
        const dateFrom = document.getElementById('mobile-filter-date-from').value;
        const dateTo = document.getElementById('mobile-filter-date-to').value;
        
        const mobilePriceCategory = document.querySelector('input[name="mobile-price-category"]:checked');
        if (mobilePriceCategory && mobilePriceCategory.value !== 'all') {
          document.getElementById('mobile-filter-price-min').value = '';
          document.getElementById('mobile-filter-price-max').value = '';
          
          switch (mobilePriceCategory.value) {
            case 'econom':
              document.getElementById('mobile-filter-price-min').value = priceFilterSettings.economy.min;
              document.getElementById('mobile-filter-price-max').value = priceFilterSettings.economy.max;
              break;
            case 'standard':
              document.getElementById('mobile-filter-price-min').value = priceFilterSettings.standard.min;
              document.getElementById('mobile-filter-price-max').value = priceFilterSettings.standard.max;
              break;
            case 'premium':
              document.getElementById('mobile-filter-price-min').value = priceFilterSettings.premium.min;
              document.getElementById('mobile-filter-price-max').value = priceFilterSettings.premium.max;
              break;
          }
        }

        const params = new URLSearchParams();
        if (make.length > 0) params.set('make_name', make.join(','));
        if (gear.length > 0) params.set('gear_type', gear.join(','));
        if (fuel.length > 0) params.set('fuel_type', fuel.join(','));
        if (type.length > 0) params.set('car_type', type.join(','));
        if (doors.length > 0) params.set('num_doors', doors.join(','));
        if (passengers.length > 0) params.set('num_passengers', passengers.join(','));
        if (priceMin) params.set('min_price', priceMin);
        if (priceMax) params.set('max_price', priceMax);
        if (dateFrom) params.set('date_from', dateFrom);
        if (dateTo) params.set('date_to', dateTo);

        const newUrl = window.location.pathname + (params.toString() ? '?' + params.toString() : '');
        window.history.pushState({}, '', newUrl);
        
        fetchAndRenderCars();
        toggleMobileFilter();
      }

      function clearAllFilters() {
        document.querySelectorAll('#mobile-filter-overlay input[type=checkbox]').forEach(cb => cb.checked = false);
        document.getElementById('mobile-filter-price-min').value = '';
        document.getElementById('mobile-filter-price-max').value = '';
        document.getElementById('mobile-filter-date-from').value = '';
        document.getElementById('mobile-filter-date-to').value = '';
        
        document.querySelectorAll('input[name="mobile-price-category"]').forEach(radio => {
          radio.checked = radio.value === 'all';
        });
      }

      // Initialize everything
      document.addEventListener('DOMContentLoaded', async function() {
        console.log('🚀 Initializing cars page...');
        
        // Load price filter settings first
        await loadPriceFilterSettings();
        console.log('✅ Price filter settings loaded');
        
        // Load ALL occupied dates at once (optimized - single API call)
        await loadAllOccupiedDates();
        console.log('✅ All occupied dates loaded and cached');
        
        // Initialize date pickers
        initializeDatePickers();
        console.log('✅ Date pickers initialized');
        
        // Load all cars for filter options
        try {
          const res = await fetch(`${window.API_BASE_URL}/api/cars`);
          allCarsFullCache = await res.json();
          console.log(`✅ Loaded ${allCarsFullCache.length} cars for filters`);
          renderSidebarOptions(allCarsFullCache);
        } catch (error) {
          console.error('❌ Error loading cars for filters:', error);
        }
        
        // Fetch and render cars
        await fetchAndRenderCars();
        
        // Clear filters handler
        document.getElementById('clear-filters-link').addEventListener('click', function(e) {
          e.preventDefault();
          window.history.pushState({}, '', window.location.pathname);
          document.getElementById('filter-date-from').value = '';
          document.getElementById('filter-date-to').value = '';
          fetchAndRenderCars();
        });
        
        // Sort handler
        const sortSelect = document.getElementById('sort-select');
        if (sortSelect) {
          sortSelect.addEventListener('change', fetchAndRenderCars);
        }
        
        // Mobile filter overlay click handler
        const overlay = document.getElementById('mobile-filter-overlay');
        if (overlay) {
          overlay.addEventListener('click', function(e) {
            if (e.target === overlay) {
              toggleMobileFilter();
            }
          });
        }
        
        // Update language on change
        if (typeof i18next !== 'undefined') {
          i18next.on('languageChanged', function(lng) {
            currentLanguage = lng;
            fetchAndRenderCars();
          });
        }
        
        // Update i18n content
        function checkAndUpdateI18n() {
          if (typeof i18next !== 'undefined' && i18next.isInitialized) {
            if (typeof updateContent === 'function') {
              updateContent();
            }
            return true;
          }
          return false;
        }

        if (!checkAndUpdateI18n()) {
          let attempts = 0;
          const maxAttempts = 10;
          const checkInterval = setInterval(function() {
            attempts++;
            if (checkAndUpdateI18n() || attempts >= maxAttempts) {
              clearInterval(checkInterval);
            }
          }, 200);
        }
        
        console.log('✅ Cars page initialization complete');
      });

      // Handle browser back/forward
      window.addEventListener('popstate', fetchAndRenderCars);
    </script>
    
    <!-- Universal Spinning Wheel Modal -->
    <script src="js/universal-spinning-wheel.js"></script>

    <!-- WORLD CLASS PRICE CALCULATOR MODAL - MODERN GLASSMORPHISM DESIGN -->
    <style>
      /* ====== PRICE CALCULATOR MODAL - WORLD CLASS DESIGN ====== */
      
      /* Modal Overlay with Blur */
      .price-calculator-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.75);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        z-index: 10000;
        display: none;
        opacity: 0;
        transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        animation: fadeInOverlay 0.4s ease forwards;
      }

      @keyframes fadeInOverlay {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .price-calculator-overlay.active {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      /* Modal Container - Glassmorphism */
      .price-calculator-modal {
        background: linear-gradient(135deg, 
          rgba(255, 255, 255, 0.95) 0%, 
          rgba(248, 250, 252, 0.95) 100%);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-radius: 28px;
        box-shadow: 
          0 20px 60px rgba(0, 0, 0, 0.2),
          0 8px 24px rgba(0, 0, 0, 0.15),
          inset 0 1px 0 rgba(255, 255, 255, 0.9);
        border: 2px solid rgba(255, 255, 255, 0.3);
        max-width: 600px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        position: relative;
        transform: scale(0.9) translateY(30px);
        opacity: 0;
        animation: modalSlideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.1s forwards;
      }

      @keyframes modalSlideIn {
        to {
          transform: scale(1) translateY(0);
          opacity: 1;
        }
      }

      /* Modal Header - Gradient */
      .price-calculator-header {
        background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
        padding: 28px 32px;
        border-radius: 26px 26px 0 0;
        position: relative;
        overflow: hidden;
      }

      .price-calculator-header::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.15) 0%, transparent 70%);
        animation: headerGlow 8s ease-in-out infinite;
      }

      @keyframes headerGlow {
        0%, 100% {
          transform: translate(0, 0) scale(1);
          opacity: 0.3;
        }
        50% {
          transform: translate(-20%, -20%) scale(1.1);
          opacity: 0.6;
        }
      }

      .price-calculator-header h3 {
        margin: 0;
        color: white;
        font-size: 1.75rem;
        font-weight: 900;
        letter-spacing: 0.02em;
        text-transform: uppercase;
        text-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        position: relative;
        z-index: 1;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .price-calculator-header h3 i {
        font-size: 1.5rem;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
      }

      /* Close Button - Modern */
      .price-calculator-close {
        position: absolute;
        top: 20px;
        right: 20px;
        width: 42px;
        height: 42px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.25);
        border: 2px solid rgba(255, 255, 255, 0.4);
        color: white;
        font-size: 1.3rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        z-index: 2;
        backdrop-filter: blur(10px);
      }

      .price-calculator-close:hover {
        background: rgba(255, 255, 255, 0.35);
        border-color: rgba(255, 255, 255, 0.6);
        transform: rotate(90deg) scale(1.1);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .price-calculator-close:active {
        transform: rotate(90deg) scale(0.95);
      }

      /* Modal Body */
      .price-calculator-body {
        padding: 32px;
      }

      /* Form Group - Enhanced */
      .calculator-form-group {
        margin-bottom: 24px;
        position: relative;
      }

      .calculator-form-group label {
        display: block;
        margin-bottom: 10px;
        font-weight: 700;
        font-size: 0.95rem;
        color: #2c3e50;
        text-transform: uppercase;
        letter-spacing: 0.03em;
        position: relative;
        padding-left: 14px;
      }

      .calculator-form-group label::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 4px;
        height: 16px;
        background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
        border-radius: 2px;
      }

      /* Input Styles - Premium */
      .calculator-input,
      .calculator-select {
        width: 100%;
        padding: 16px 20px;
        border: 2px solid #e8e8e8;
        border-radius: 14px;
        font-size: 15px;
        font-weight: 600;
        color: #2c3e50;
        background: rgba(255, 255, 255, 0.9);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
        position: relative;
      }

      .calculator-input:hover,
      .calculator-select:hover {
        border-color: #1ccfc9;
        box-shadow: 0 4px 16px rgba(28, 207, 201, 0.12);
        transform: translateY(-2px);
      }

      .calculator-input:focus,
      .calculator-select:focus {
        outline: none;
        border-color: #1ccfc9;
        box-shadow: 0 0 0 4px rgba(28, 207, 201, 0.15), 0 8px 24px rgba(28, 207, 201, 0.12);
        transform: translateY(-2px);
        background: white;
      }

      .calculator-input::placeholder {
        color: #999;
        font-weight: 500;
      }

      /* Select Dropdown - Custom Arrow */
      .calculator-select {
        appearance: none;
        background-image: url('data:image/svg+xml;charset=UTF-8,<svg width="14" height="8" viewBox="0 0 14 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L7 7L13 1" stroke="%231ccfc9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>');
        background-repeat: no-repeat;
        background-position: right 16px center;
        background-size: 14px;
        padding-right: 46px;
        cursor: pointer;
      }

      /* Date Input with Icon */
      .calculator-date-wrapper {
        position: relative;
      }

      .calculator-date-wrapper i {
        position: absolute;
        right: 18px;
        top: 50%;
        transform: translateY(-50%);
        color: #1ccfc9;
        font-size: 18px;
        pointer-events: none;
        transition: all 0.3s ease;
      }

      .calculator-input:focus + i {
        color: #17a398;
        transform: translateY(-50%) scale(1.1);
      }

      /* Error Message - Beautiful */
      .calculator-error {
        display: none;
        margin-top: 12px;
        padding: 14px 18px;
        background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
        border: 2px solid #ef4444;
        border-radius: 12px;
        color: #991b1b;
        font-size: 0.9rem;
        font-weight: 600;
        animation: errorShake 0.5s ease;
        box-shadow: 0 4px 12px rgba(239, 68, 68, 0.15);
        position: relative;
        overflow: hidden;
      }

      .calculator-error::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: #ef4444;
      }

      .calculator-error i {
        margin-right: 8px;
        font-size: 1rem;
      }

      @keyframes errorShake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-10px); }
        75% { transform: translateX(10px); }
      }

      /* Result Section - Premium Card */
      .calculator-result {
        display: none;
        margin-top: 28px;
        padding: 28px;
        background: linear-gradient(135deg, 
          rgba(28, 207, 201, 0.08) 0%, 
          rgba(23, 163, 152, 0.08) 100%);
        border: 3px solid #1ccfc9;
        border-radius: 18px;
        animation: resultFadeIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        box-shadow: 
          0 8px 28px rgba(28, 207, 201, 0.15),
          inset 0 1px 0 rgba(255, 255, 255, 0.8);
        position: relative;
        overflow: hidden;
      }

      .calculator-result::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(28, 207, 201, 0.1) 0%, transparent 70%);
        animation: resultGlow 6s ease-in-out infinite;
      }

      @keyframes resultGlow {
        0%, 100% {
          transform: translate(0, 0);
          opacity: 0.3;
        }
        50% {
          transform: translate(10%, 10%);
          opacity: 0.6;
        }
      }

      @keyframes resultFadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .calculator-result-title {
        font-size: 1.1rem;
        font-weight: 800;
        color: #2c3e50;
        margin-bottom: 16px;
        text-transform: uppercase;
        letter-spacing: 0.04em;
        position: relative;
        z-index: 1;
      }

      .calculator-result-price {
        font-size: 3rem;
        font-weight: 900;
        color: #1ccfc9;
        margin-bottom: 8px;
        text-shadow: 0 4px 12px rgba(28, 207, 201, 0.25);
        position: relative;
        z-index: 1;
        display: flex;
        align-items: baseline;
        gap: 8px;
      }

      .calculator-result-price .currency {
        font-size: 2rem;
        opacity: 0.8;
      }

      .calculator-result-details {
        font-size: 0.95rem;
        color: #666;
        font-weight: 600;
        margin-top: 12px;
        padding-top: 16px;
        border-top: 2px solid rgba(28, 207, 201, 0.2);
        position: relative;
        z-index: 1;
      }

      .calculator-result-details p {
        margin: 6px 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .calculator-result-details strong {
        color: #2c3e50;
        font-weight: 800;
      }

      /* Buttons - Premium Style */
      .calculator-btn {
        width: 100%;
        padding: 18px 28px;
        border: none;
        border-radius: 14px;
        font-size: 1.05rem;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        cursor: pointer;
        transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        position: relative;
        overflow: hidden;
        box-shadow: 0 6px 24px rgba(28, 207, 201, 0.25);
      }

      .calculator-btn::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.25);
        transform: translate(-50%, -50%);
        transition: width 0.6s ease, height 0.6s ease;
      }

      .calculator-btn:hover::before {
        width: 400px;
        height: 400px;
      }

      .calculator-btn-primary {
        background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
        color: white;
      }

      .calculator-btn-primary:hover {
        background: linear-gradient(135deg, #17a398 0%, #138f84 100%);
        box-shadow: 0 12px 36px rgba(28, 207, 201, 0.35);
        transform: translateY(-3px) scale(1.02);
      }

      .calculator-btn-primary:active {
        transform: translateY(-1px) scale(0.98);
      }

      .calculator-btn-primary:disabled {
        background: linear-gradient(135deg, #e8e8e8 0%, #d4d4d4 100%);
        color: #999;
        cursor: not-allowed;
        box-shadow: none;
        transform: none;
      }

      .calculator-btn i {
        margin-right: 10px;
        font-size: 1.1rem;
      }

      /* Loading State */
      .calculator-loading {
        display: none;
        text-align: center;
        padding: 24px;
      }

      .calculator-loading .spinner {
        width: 50px;
        height: 50px;
        border: 4px solid rgba(28, 207, 201, 0.1);
        border-top: 4px solid #1ccfc9;
        border-radius: 50%;
        animation: calculatorSpin 1s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
        margin: 0 auto 16px;
      }

      @keyframes calculatorSpin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      .calculator-loading p {
        font-size: 1rem;
        font-weight: 600;
        color: #2c3e50;
        margin: 0;
      }

      /* Scrollbar Styling */
      .price-calculator-modal::-webkit-scrollbar {
        width: 10px;
      }

      .price-calculator-modal::-webkit-scrollbar-track {
        background: rgba(28, 207, 201, 0.05);
        border-radius: 10px;
      }

      .price-calculator-modal::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
        border-radius: 10px;
        box-shadow: 0 2px 6px rgba(28, 207, 201, 0.3);
      }

      .price-calculator-modal::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, #17a398 0%, #138f84 100%);
      }

      /* Mobile Responsiveness */
      @media (max-width: 768px) {
        .price-calculator-modal {
          margin: 10px;
          max-width: calc(100% - 20px);
          border-radius: 24px;
        }

        .price-calculator-header {
          padding: 22px 24px;
        }

        .price-calculator-header h3 {
          font-size: 1.4rem;
        }

        .price-calculator-close {
          width: 38px;
          height: 38px;
          font-size: 1.1rem;
          top: 16px;
          right: 16px;
        }

        .price-calculator-body {
          padding: 24px;
        }

        .calculator-result-price {
          font-size: 2.5rem;
        }

        .calculator-result-price .currency {
          font-size: 1.6rem;
        }

        .calculator-btn {
          padding: 16px 24px;
          font-size: 1rem;
        }
      }

      @media (max-width: 480px) {
        .price-calculator-modal {
          max-height: 95vh;
        }

        .price-calculator-header h3 {
          font-size: 1.2rem;
        }

        .calculator-result-price {
          font-size: 2rem;
        }

        .calculator-result-price .currency {
          font-size: 1.3rem;
        }

        .calculator-input,
        .calculator-select {
          padding: 14px 16px;
          font-size: 14px;
        }
      }

      /* Success Animation */
      @keyframes successPulse {
        0%, 100% {
          box-shadow: 0 8px 28px rgba(28, 207, 201, 0.15);
        }
        50% {
          box-shadow: 0 8px 28px rgba(28, 207, 201, 0.35);
        }
      }

      .calculator-result.success-animation {
        animation: resultFadeIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), 
                   successPulse 2s ease-in-out infinite;
      }

      /* Input Icon Animations */
      @keyframes iconBounce {
        0%, 100% { transform: translateY(-50%) scale(1); }
        50% { transform: translateY(-50%) scale(1.15); }
      }

      .calculator-date-wrapper:focus-within i {
        animation: iconBounce 0.6s ease;
      }
    </style>

    <!-- Price Calculator Modal HTML -->
    <div class="price-calculator-overlay" id="price-calculator-overlay">
      <div class="price-calculator-modal">
        <div class="price-calculator-header">
          <h3>
            <i class="fa fa-calculator"></i>
            <span data-i18n="calculator.title">Price Calculator</span>
          </h3>
          <button class="price-calculator-close" onclick="closePriceCalculator()">
            <i class="fa fa-times"></i>
          </button>
        </div>
        
        <div class="price-calculator-body">
          <form id="price-calculator-form">
            <!-- Pickup Date -->
            <div class="calculator-form-group">
              <label for="calc-pickup-date">
                <span data-i18n="calculator.pickup_date">Pickup Date</span>
              </label>
              <div class="calculator-date-wrapper">
                <input 
                  type="text" 
                  id="calc-pickup-date" 
                  class="calculator-input" 
                  placeholder="Select pickup date"
                  data-i18n-placeholder="calculator.select_pickup"
                  readonly
                  required
                >
                <i class="fa fa-calendar"></i>
              </div>
              <div class="calculator-error" id="calc-pickup-error">
                <i class="fa fa-exclamation-circle"></i>
                <span data-i18n="calculator.error_pickup">Please select a pickup date</span>
              </div>
            </div>

            <!-- Return Date -->
            <div class="calculator-form-group">
              <label for="calc-return-date">
                <span data-i18n="calculator.return_date">Return Date</span>
              </label>
              <div class="calculator-date-wrapper">
                <input 
                  type="text" 
                  id="calc-return-date" 
                  class="calculator-input" 
                  placeholder="Select return date"
                  data-i18n-placeholder="calculator.select_return"
                  readonly
                  required
                >
                <i class="fa fa-calendar"></i>
              </div>
              <div class="calculator-error" id="calc-return-error">
                <i class="fa fa-exclamation-circle"></i>
                <span data-i18n="calculator.error_return">Please select a return date</span>
              </div>
            </div>

            <!-- Phone Number -->
            <div class="calculator-form-group">
              <label for="calc-phone">
                <span data-i18n="calculator.phone">Phone Number</span>
              </label>
              <input 
                type="tel" 
                id="calc-phone" 
                class="calculator-input" 
                placeholder="+373 60 000 500"
                data-i18n-placeholder="calculator.phone_placeholder"
                required
              >
              <div class="calculator-error" id="calc-phone-error">
                <i class="fa fa-exclamation-circle"></i>
                <span data-i18n="calculator.error_phone">Please enter a valid phone number (minimum 8 digits)</span>
              </div>
            </div>

            <!-- Calculate Button -->
            <button type="submit" class="calculator-btn calculator-btn-primary">
              <i class="fa fa-calculator"></i>
              <span data-i18n="calculator.calculate_btn">Calculate Price</span>
            </button>
          </form>

          <!-- Loading State -->
          <div class="calculator-loading" id="calculator-loading">
            <div class="spinner"></div>
            <p data-i18n="calculator.calculating">Calculating price...</p>
          </div>

          <!-- Result Section -->
          <div class="calculator-result" id="calculator-result">
            <h4 class="calculator-result-title">
              <span data-i18n="calculator.total_price">Total Price</span>
            </h4>
            <div class="calculator-result-price">
              <span id="calculator-result-amount">0</span>
              <span class="currency">€</span>
            </div>
            <div class="calculator-result-details">
              <p>
                <strong data-i18n="calculator.rental_days">Rental Days:</strong>
                <span id="calculator-result-days">0</span>
              </p>
              <p>
                <strong data-i18n="calculator.daily_rate">Daily Rate:</strong>
                <span id="calculator-result-daily">0€</span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Price Calculator JavaScript -->
    <script>
      // Price Calculator Functions
      let calcPickupPicker, calcReturnPicker;
      let currentCarForCalculator = null;

      // Open Price Calculator
      function openPriceCalculator(carId) {
        currentCarForCalculator = carId;
        const overlay = document.getElementById('price-calculator-overlay');
        if (overlay) {
          overlay.classList.add('active');
          document.body.style.overflow = 'hidden';
          
          // Initialize date pickers if not already initialized
          if (!calcPickupPicker) {
            initCalculatorDatePickers();
          }
          
          // Reset form
          document.getElementById('price-calculator-form').reset();
          document.getElementById('calculator-result').style.display = 'none';
          document.querySelectorAll('.calculator-error').forEach(el => el.style.display = 'none');
        }
      }

      // Close Price Calculator
      function closePriceCalculator() {
        const overlay = document.getElementById('price-calculator-overlay');
        if (overlay) {
          overlay.classList.remove('active');
          document.body.style.overflow = '';
        }
      }

      // Initialize Calculator Date Pickers
      function initCalculatorDatePickers() {
        const today = new Date();
        
        calcPickupPicker = flatpickr('#calc-pickup-date', {
          dateFormat: 'Y-m-d',
          minDate: today,
          onChange: function(selectedDates, dateStr) {
            if (calcReturnPicker) {
              calcReturnPicker.set('minDate', dateStr);
            }
            document.getElementById('calc-pickup-error').style.display = 'none';
          }
        });
        
        calcReturnPicker = flatpickr('#calc-return-date', {
          dateFormat: 'Y-m-d',
          minDate: today,
          onChange: function() {
            document.getElementById('calc-return-error').style.display = 'none';
          }
        });
      }

      // Validate Phone Number - Enhanced
      function validatePhoneNumber(phone) {
        // Remove all non-digit characters
        const cleaned = phone.replace(/\D/g, '');
        
        // Check if phone has at least 8 digits
        if (cleaned.length < 8) {
          return {
            valid: false,
            message: 'Phone number must contain at least 8 digits'
          };
        }
        
        // Check if phone has more than 15 digits (international standard)
        if (cleaned.length > 15) {
          return {
            valid: false,
            message: 'Phone number is too long (maximum 15 digits)'
          };
        }
        
        return {
          valid: true,
          message: ''
        };
      }

      // Show Error with Beautiful Animation
      function showCalculatorError(errorId, message) {
        const errorElement = document.getElementById(errorId);
        if (errorElement) {
          const messageSpan = errorElement.querySelector('span');
          if (messageSpan && message) {
            messageSpan.textContent = message;
          }
          errorElement.style.display = 'block';
          
          // Trigger animation
          errorElement.style.animation = 'none';
          setTimeout(() => {
            errorElement.style.animation = 'errorShake 0.5s ease';
          }, 10);
        }
      }

      // Hide Error
      function hideCalculatorError(errorId) {
        const errorElement = document.getElementById(errorId);
        if (errorElement) {
          errorElement.style.display = 'none';
        }
      }

      // Calculate Price
      async function calculatePrice(pickupDate, returnDate, phone, carId) {
        try {
          const response = await fetch(`${window.API_BASE_URL}/api/calculate-price`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              car_id: carId,
              pickup_date: pickupDate,
              return_date: returnDate,
              phone: phone
            })
          });

          if (!response.ok) {
            throw new Error('Failed to calculate price');
          }

          const data = await response.json();
          return data;
        } catch (error) {
          console.error('Error calculating price:', error);
          throw error;
        }
      }

      // Handle Form Submit
      document.getElementById('price-calculator-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // Hide all errors
        document.querySelectorAll('.calculator-error').forEach(el => el.style.display = 'none');
        document.getElementById('calculator-result').style.display = 'none';
        
        // Get form values
        const pickupDate = document.getElementById('calc-pickup-date').value;
        const returnDate = document.getElementById('calc-return-date').value;
        const phone = document.getElementById('calc-phone').value;
        
        let hasError = false;
        
        // Validate pickup date
        if (!pickupDate) {
          showCalculatorError('calc-pickup-error', 'Please select a pickup date');
          hasError = true;
        }
        
        // Validate return date
        if (!returnDate) {
          showCalculatorError('calc-return-error', 'Please select a return date');
          hasError = true;
        }
        
        // Validate dates order
        if (pickupDate && returnDate && new Date(returnDate) <= new Date(pickupDate)) {
          showCalculatorError('calc-return-error', 'Return date must be after pickup date');
          hasError = true;
        }
        
        // Validate phone
        const phoneValidation = validatePhoneNumber(phone);
        if (!phoneValidation.valid) {
          showCalculatorError('calc-phone-error', phoneValidation.message);
          hasError = true;
        }
        
        if (hasError) {
          return;
        }
        
        // Show loading
        document.getElementById('calculator-loading').style.display = 'block';
        
        try {
          // Calculate number of days
          const days = Math.ceil((new Date(returnDate) - new Date(pickupDate)) / (1000 * 60 * 60 * 24));
          
          // Fetch car details
          const carResponse = await fetch(`${window.API_BASE_URL}/api/cars/${currentCarForCalculator}`);
          const car = await carResponse.json();
          
          // Get price policy
          const pricePolicy = typeof car.price_policy === 'string' ? JSON.parse(car.price_policy) : car.price_policy;
          
          // Determine daily rate based on rental duration
          let dailyRate = 0;
          if (days >= 30) {
            dailyRate = pricePolicy['30+'] || pricePolicy['30'] || pricePolicy['15-29'] || pricePolicy['8-14'] || pricePolicy['4-7'] || pricePolicy['1-3'];
          } else if (days >= 15) {
            dailyRate = pricePolicy['15-29'] || pricePolicy['8-14'] || pricePolicy['4-7'] || pricePolicy['1-3'];
          } else if (days >= 8) {
            dailyRate = pricePolicy['8-14'] || pricePolicy['4-7'] || pricePolicy['1-3'];
          } else if (days >= 4) {
            dailyRate = pricePolicy['4-7'] || pricePolicy['1-3'];
          } else {
            dailyRate = pricePolicy['1-3'];
          }
          
          const totalPrice = dailyRate * days;
          
          // Hide loading
          document.getElementById('calculator-loading').style.display = 'none';
          
          // Show result
          document.getElementById('calculator-result-amount').textContent = totalPrice;
          document.getElementById('calculator-result-days').textContent = days;
          document.getElementById('calculator-result-daily').textContent = dailyRate + '€';
          
          const resultElement = document.getElementById('calculator-result');
          resultElement.style.display = 'block';
          resultElement.classList.add('success-animation');
          
          // Remove animation class after animation completes
          setTimeout(() => {
            resultElement.classList.remove('success-animation');
          }, 2000);
          
        } catch (error) {
          console.error('Error:', error);
          document.getElementById('calculator-loading').style.display = 'none';
          showCalculatorError('calc-phone-error', 'An error occurred. Please try again.');
        }
      });

      // Close modal on overlay click
      document.getElementById('price-calculator-overlay').addEventListener('click', function(e) {
        if (e.target === this) {
          closePriceCalculator();
        }
      });

      // Close modal on ESC key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          closePriceCalculator();
        }
      });

      // Phone input formatting
      document.getElementById('calc-phone').addEventListener('input', function(e) {
        hideCalculatorError('calc-phone-error');
      });
    </script>
</body>
</html>
<!-- Language Picker JavaScript -->
    <script>
      (function() {
        const langPickerBtn = document.getElementById('langPickerBtn');
        const langDropdown = document.getElementById('langDropdown');
        const langOptions = document.querySelectorAll('.lang-option');
        const langCode = document.getElementById('langCode');
        const langFlag = document.getElementById('langFlag');

        // Flag mapping
        const flagMap = {
          'ro': '<img src="images/flags/romania.png" alt="RO" style="width: 20px; height: 15px; border-radius: 2px; object-fit: cover;">',
          'en': '<img src="images/flags/united-kingdom.png" alt="EN" style="width: 20px; height: 15px; border-radius: 2px; object-fit: cover;">',
          'ru': '<img src="images/flags/russia.png" alt="RU" style="width: 20px; height: 15px; border-radius: 2px; object-fit: cover;">'
        };

        // Initialize current language
        const currentLang = localStorage.getItem('lang') || 'ro';
        langCode.textContent = currentLang.toUpperCase();
        langFlag.innerHTML = flagMap[currentLang] || '';

        // Update selected state
        langOptions.forEach(option => {
          if (option.dataset.lang === currentLang) {
            option.classList.add('selected');
          } else {
            option.classList.remove('selected');
          }
        });

        // Toggle dropdown
        langPickerBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          const isOpen = langDropdown.classList.contains('open');
          langDropdown.classList.toggle('open');
          langPickerBtn.setAttribute('aria-expanded', !isOpen);
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
          if (!langPickerBtn.contains(e.target) && !langDropdown.contains(e.target)) {
            langDropdown.classList.remove('open');
            langPickerBtn.setAttribute('aria-expanded', 'false');
          }
        });

        // Language option click
        langOptions.forEach(option => {
          option.addEventListener('click', function() {
            const selectedLang = this.dataset.lang;
            
            // Update localStorage
            localStorage.setItem('lang', selectedLang);
            
            // Update button display
            langCode.textContent = selectedLang.toUpperCase();
            langFlag.innerHTML = flagMap[selectedLang] || '';
            
            // Update selected state
            langOptions.forEach(opt => opt.classList.remove('selected'));
            this.classList.add('selected');
            
            // Close dropdown
            langDropdown.classList.remove('open');
            langPickerBtn.setAttribute('aria-expanded', 'false');
            
            // Change language with i18next
            if (typeof i18next !== 'undefined') {
              i18next.changeLanguage(selectedLang);
            }
          });

          // Keyboard navigation
          option.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              this.click();
            }
          });
        });

        // Keyboard navigation for dropdown
        langPickerBtn.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            this.click();
          }
        });
      })();
    </script>

    <!-- Additional CSS for enhanced UI elements -->
    <style>
      /* Enhanced Call Now Button - Premium Animation */
      .call-now-btn {
        position: relative;
        overflow: hidden;
        z-index: 1;
      }

      .call-now-btn::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        transform: translate(-50%, -50%);
        transition: width 0.6s ease, height 0.6s ease;
      }

      .call-now-btn:hover::before {
        width: 300px;
        height: 300px;
      }

      .call-now-btn:hover {
        background: linear-gradient(135deg, #187bcd, #1557a0) !important;
        box-shadow: 0 8px 24px rgba(30, 144, 255, 0.45) !important;
        transform: translateY(-2px) scale(1.05) !important;
      }

      .call-now-btn:active {
        transform: translateY(0) scale(0.98) !important;
      }

      .call-now-btn i,
      .call-now-btn span {
        position: relative;
        z-index: 2;
      }

      /* Enhanced Back to Top Button */
      #back-to-top {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
        color: white;
        border-radius: 50%;
        display: none;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        box-shadow: 0 6px 24px rgba(28, 207, 201, 0.35);
        cursor: pointer;
        z-index: 9998;
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        border: 2px solid rgba(255, 255, 255, 0.2);
      }

      #back-to-top::before {
        content: '↑';
        font-size: 24px;
        font-weight: bold;
        line-height: 1;
      }

      #back-to-top:hover {
        background: linear-gradient(135deg, #17a398 0%, #138f84 100%);
        box-shadow: 0 10px 36px rgba(28, 207, 201, 0.45);
        transform: translateY(-5px) scale(1.1);
      }

      #back-to-top:active {
        transform: translateY(-3px) scale(1.05);
      }

      #back-to-top.show {
        display: flex;
        animation: backToTopFadeIn 0.4s ease;
      }

      @keyframes backToTopFadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Enhanced Preloader */
      #de-preloader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
        z-index: 99999;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: opacity 0.5s ease, visibility 0.5s ease;
      }

      #de-preloader::before {
        content: '';
        width: 80px;
        height: 80px;
        border: 6px solid rgba(28, 207, 201, 0.1);
        border-top: 6px solid #1ccfc9;
        border-radius: 50%;
        animation: preloaderSpin 1s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
        box-shadow: 0 4px 24px rgba(28, 207, 201, 0.25);
      }

      @keyframes preloaderSpin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      #de-preloader.loaded {
        opacity: 0;
        visibility: hidden;
      }

      /* Enhanced Menu Button for Mobile */
      #menu-btn {
        display: none;
        flex-direction: column;
        justify-content: space-between;
        width: 30px;
        height: 24px;
        cursor: pointer;
        position: relative;
        z-index: 1000;
        transition: all 0.3s ease;
      }

      #menu-btn span {
        display: block;
        width: 100%;
        height: 3px;
        background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
        border-radius: 3px;
        transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        box-shadow: 0 2px 4px rgba(28, 207, 201, 0.2);
      }

      #menu-btn:hover span {
        background: linear-gradient(135deg, #17a398 0%, #138f84 100%);
        box-shadow: 0 2px 8px rgba(28, 207, 201, 0.35);
      }

      #menu-btn.active span:nth-child(1) {
        transform: rotate(45deg) translate(8px, 8px);
      }

      #menu-btn.active span:nth-child(2) {
        opacity: 0;
        transform: translateX(-20px);
      }

      #menu-btn.active span:nth-child(3) {
        transform: rotate(-45deg) translate(8px, -8px);
      }

      @media (max-width: 991px) {
        #menu-btn {
          display: flex;
        }
      }

      /* Enhanced Header on Scroll */
      header.scroll-light {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      header.scroll-light.scrolled {
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
      }

      /* Enhanced Topbar */
      #topbar {
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        border-bottom: 2px solid rgba(28, 207, 201, 0.2);
        transition: all 0.3s ease;
      }

      #topbar .topbar-widget a {
        transition: all 0.3s ease;
        position: relative;
        padding-bottom: 2px;
      }

      #topbar .topbar-widget a::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 2px;
        background: #1ccfc9;
        transition: width 0.3s ease;
      }

      #topbar .topbar-widget a:hover::after {
        width: 100%;
      }

      #topbar .social-icons a {
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      }

      #topbar .social-icons a:hover {
        transform: translateY(-3px) scale(1.1);
        color: #1ccfc9;
      }

      /* Enhanced Footer */
      footer {
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        position: relative;
        overflow: hidden;
      }

      footer::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, #1ccfc9 0%, #17a398 50%, #1ccfc9 100%);
        background-size: 200% 100%;
        animation: footerGradient 3s linear infinite;
      }

      @keyframes footerGradient {
        0% {
          background-position: 0% 50%;
        }
        100% {
          background-position: 200% 50%;
        }
      }

      footer .widget h5 {
        position: relative;
        padding-bottom: 12px;
        margin-bottom: 20px;
      }

      footer .widget h5::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 50px;
        height: 3px;
        background: linear-gradient(90deg, #1ccfc9 0%, transparent 100%);
        border-radius: 3px;
      }

      footer .widget ul li a {
        transition: all 0.3s ease;
        padding-left: 0;
        position: relative;
      }

      footer .widget ul li a::before {
        content: '→';
        position: absolute;
        left: -20px;
        opacity: 0;
        transition: all 0.3s ease;
        color: #1ccfc9;
      }

      footer .widget ul li a:hover {
        padding-left: 20px;
        color: #1ccfc9;
      }

      footer .widget ul li a:hover::before {
        left: 0;
        opacity: 1;
      }

      footer .social-icons a {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        margin: 0 5px;
        border: 2px solid transparent;
      }

      footer .social-icons a:hover {
        background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
        border-color: rgba(255, 255, 255, 0.3);
        transform: translateY(-5px) scale(1.1);
        box-shadow: 0 8px 20px rgba(28, 207, 201, 0.3);
      }

      footer .subfooter {
        background: rgba(0, 0, 0, 0.2);
        border-top: 1px solid rgba(255, 255, 255, 0.1);
      }

      /* Enhanced Subheader */
      #subheader {
        position: relative;
        padding: 120px 0 80px;
        background-attachment: fixed;
        background-size: cover;
        background-position: center;
      }

      #subheader::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, 
          rgba(28, 207, 201, 0.85) 0%, 
          rgba(23, 163, 152, 0.85) 100%);
        z-index: 1;
      }

      #subheader .container {
        position: relative;
        z-index: 2;
      }

      #subheader h1 {
        font-size: 3rem;
        font-weight: 900;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        text-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        animation: subheaderTitleFadeIn 0.8s ease;
      }

      @keyframes subheaderTitleFadeIn {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @media (max-width: 768px) {
        #subheader {
          padding: 80px 0 60px;
        }

        #subheader h1 {
          font-size: 2rem;
        }
      }

      /* Enhanced Logo Animation */
      #logo img {
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      }

      #logo:hover img {
        transform: scale(1.05);
        filter: drop-shadow(0 4px 12px rgba(28, 207, 201, 0.3));
      }

      /* Enhanced Main Menu */
      #mainmenu li {
        position: relative;
      }

      #mainmenu li a {
        position: relative;
        padding: 10px 15px;
        transition: all 0.3s ease;
      }

      #mainmenu li a::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 3px;
        background: linear-gradient(90deg, #1ccfc9 0%, #17a398 100%);
        border-radius: 3px;
        transition: width 0.3s ease;
      }

      #mainmenu li a:hover::after,
      #mainmenu li a.active::after {
        width: 80%;
      }

      #mainmenu li a:hover {
        color: #1ccfc9;
      }

      /* Smooth Scroll Behavior */
      html {
        scroll-behavior: smooth;
      }

      /* Selection Color */
      ::selection {
        background: #1ccfc9;
        color: white;
      }

      ::-moz-selection {
        background: #1ccfc9;
        color: white;
      }

      /* Focus Outline Enhancement */
      *:focus {
        outline: none;
      }

      button:focus-visible,
      a:focus-visible,
      input:focus-visible,
      select:focus-visible,
      textarea:focus-visible {
        outline: 3px solid rgba(28, 207, 201, 0.5);
        outline-offset: 3px;
      }

      /* Enhanced Jarallax Effect */
      .jarallax {
        position: relative;
        z-index: 0;
      }

      .jarallax .jarallax-img {
        position: absolute;
        object-fit: cover;
        font-family: 'object-fit: cover;';
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
      }

      /* Accessibility Improvements */
      .visually-hidden {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      /* Reduced Motion Support */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          scroll-behavior: auto !important;
        }
      }

      /* High Contrast Mode Support */
      @media (prefers-contrast: high) {
        .filter-sidebar,
        .de-item.mb30,
        .price-calculator-modal {
          border-width: 3px;
        }

        .btn-main,
        .calculator-btn-primary {
          border: 3px solid currentColor;
        }
      }

      /* Dark Mode Preparation */
      @media (prefers-color-scheme: dark) {
        /* Will implement dark mode styles if needed */
      }

      /* Print Styles Enhancement */
      @media print {
        header,
        footer,
        #topbar,
        #back-to-top,
        .filter-sidebar,
        .sort-controls,
        .mobile-filter-button-container,
        .price-calculator-overlay {
          display: none !important;
        }

        .de-item.mb30 {
          break-inside: avoid;
          page-break-inside: avoid;
        }

        body {
          background: white !important;
          color: black !important;
        }

        a {
          color: black !important;
          text-decoration: underline !important;
        }
      }

      /* Performance Optimizations */
      .de-item.mb30,
      .filter-sidebar,
      .price-calculator-modal {
        will-change: transform;
        transform: translateZ(0);
        backface-visibility: hidden;
      }

      /* Touch Device Optimizations */
      @media (hover: none) and (pointer: coarse) {
        .de-item.mb30:hover,
        .filter-option-row:hover,
        .btn-main:hover {
          transform: none;
        }

        .de-item.mb30:active {
          transform: scale(0.98);
        }
      }

      /* Landscape Mobile Optimization */
      @media (max-width: 991px) and (orientation: landscape) {
        #subheader {
          padding: 60px 0 40px;
        }

        .price-calculator-modal {
          max-height: 95vh;
          overflow-y: auto;
        }
      }

      /* Extra Large Screens */
      @media (min-width: 1600px) {
        .container {
          max-width: 1400px;
        }

        .de-item.mb30 {
          min-height: 500px;
        }

        .d-img {
          min-height: 240px;
        }

        .d-img img {
          max-height: 240px;
        }
      }

      /* Small Screens Enhancement */
      @media (max-width: 360px) {
        .filter-title {
          font-size: 1.2rem;
        }

        .filter-section-title {
          font-size: 0.9rem;
        }

        .filter-option-row {
          padding: 9px 11px;
        }

        .calculator-result-price {
          font-size: 2rem;
        }

        .price-calculator-header h3 {
          font-size: 1.1rem;
        }
      }

      /* Connection Status Indicator (Optional) */
      .connection-status {
        position: fixed;
        bottom: 20px;
        left: 20px;
        padding: 10px 16px;
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
        color: white;
        border-radius: 8px;
        font-size: 0.85rem;
        font-weight: 600;
        display: none;
        align-items: center;
        gap: 8px;
        z-index: 9997;
        box-shadow: 0 4px 16px rgba(239, 68, 68, 0.3);
        animation: connectionPulse 2s ease-in-out infinite;
      }

      @keyframes connectionPulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }

      .connection-status.offline {
        display: flex;
      }

      .connection-status.online {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        display: flex;
        animation: connectionFadeOut 2s ease forwards;
      }

      @keyframes connectionFadeOut {
        0% {
          opacity: 1;
        }
        80% {
          opacity: 1;
        }
        100% {
          opacity: 0;
          display: none;
        }
      }

      /* Loading State for Images */
      .d-img img {
        background: linear-gradient(
          90deg,
          #f0f0f0 25%,
          #e8e8e8 50%,
          #f0f0f0 75%
        );
        background-size: 200% 100%;
        animation: imageLoading 1.5s ease-in-out infinite;
      }

      .d-img img.loaded {
        animation: none;
        background: none;
      }

      @keyframes imageLoading {
        0% {
          background-position: 200% 0;
        }
        100% {
          background-position: -200% 0;
        }
      }

      /* Notification Toast (Optional) */
      .notification-toast {
        position: fixed;
        top: 20px;
        right: 20px;
        max-width: 350px;
        padding: 18px 24px;
        background: linear-gradient(135deg, #1ccfc9 0%, #17a398 100%);
        color: white;
        border-radius: 12px;
        box-shadow: 0 8px 28px rgba(28, 207, 201, 0.3);
        z-index: 10001;
        display: none;
        align-items: center;
        gap: 12px;
        animation: toastSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      }

      @keyframes toastSlideIn {
        from {
          opacity: 0;
          transform: translateX(100%) translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0) translateY(0);
        }
      }

      .notification-toast.show {
        display: flex;
      }

      .notification-toast.error {
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
      }

      .notification-toast.success {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      }

      .notification-toast i {
        font-size: 1.5rem;
      }

      .notification-toast-content {
        flex: 1;
      }

      .notification-toast-title {
        font-weight: 800;
        font-size: 1rem;
        margin-bottom: 4px;
      }

      .notification-toast-message {
        font-size: 0.9rem;
        opacity: 0.95;
      }

      .notification-toast-close {
        background: rgba(255, 255, 255, 0.2);
        border: 2px solid rgba(255, 255, 255, 0.3);
        width: 28px;
        height: 28px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.9rem;
      }

      .notification-toast-close:hover {
        background: rgba(255, 255, 255, 0.3);
        border-color: rgba(255, 255, 255, 0.5);
        transform: rotate(90deg);
      }

      /* Skeleton Loading State */
      .skeleton-loader {
        background: linear-gradient(
          90deg,
          #f0f0f0 25%,
          #e8e8e8 50%,
          #f0f0f0 75%
        );
        background-size: 200% 100%;
        animation: skeletonLoading 1.5s ease-in-out infinite;
        border-radius: 8px;
      }

      @keyframes skeletonLoading {
        0% {
          background-position: 200% 0;
        }
        100% {
          background-position: -200% 0;
        }
      }

      /* Tooltip Enhancement (if needed) */
      [data-tooltip] {
        position: relative;
        cursor: help;
      }

      [data-tooltip]::after {
        content: attr(data-tooltip);
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%) translateY(-8px);
        padding: 8px 12px;
        background: rgba(44, 62, 80, 0.95);
        color: white;
        font-size: 0.85rem;
        font-weight: 600;
        border-radius: 8px;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: all 0.3s ease;
        z-index: 1000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      [data-tooltip]::before {
        content: '';
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%) translateY(-4px);
        border: 6px solid transparent;
        border-top-color: rgba(44, 62, 80, 0.95);
        opacity: 0;
        pointer-events: none;
        transition: all 0.3s ease;
        z-index: 1000;
      }

      [data-tooltip]:hover::after,
      [data-tooltip]:hover::before {
        opacity: 1;
      }

      /* Badge Styles */
      .badge-new {
        display: inline-block;
        padding: 4px 10px;
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        font-size: 0.7rem;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        border-radius: 6px;
        margin-left: 8px;
        box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        animation: badgePulse 2s ease-in-out infinite;
      }

      @keyframes badgePulse {
        0%, 100% {
          transform: scale(1);
          box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }
        50% {
          transform: scale(1.05);
          box-shadow: 0 4px 12px rgba(16, 185, 129, 0.5);
        }
      }

      /* Ripple Effect for Buttons */
      .btn-ripple {
        position: relative;
        overflow: hidden;
      }

      .btn-ripple::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
      }

      .btn-ripple:active::after {
        width: 300px;
        height: 300px;
      }

      /* Progress Bar (if needed) */
      .progress-bar-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: rgba(28, 207, 201, 0.1);
        z-index: 10002;
        display: none;
      }

      .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #1ccfc9 0%, #17a398 100%);
        width: 0;
        transition: width 0.3s ease;
        box-shadow: 0 0 10px rgba(28, 207, 201, 0.5);
      }

      .progress-bar-container.active {
        display: block;
      }

      /* Floating Labels (if needed) */
      .floating-label-group {
        position: relative;
        margin-bottom: 24px;
      }

      .floating-label-group input,
      .floating-label-group select {
        width: 100%;
        padding: 16px 16px 8px 16px;
        border: 2px solid #e8e8e8;
        border-radius: 12px;
        font-size: 15px;
        font-weight: 600;
        transition: all 0.3s ease;
        background: white;
      }

      .floating-label-group label {
        position: absolute;
        left: 16px;
        top: 16px;
        font-size: 15px;
        font-weight: 600;
        color: #999;
        pointer-events: none;
        transition: all 0.3s ease;
      }

      .floating-label-group input:focus,
      .floating-label-group select:focus,
      .floating-label-group input:not(:placeholder-shown),
      .floating-label-group select:not(:placeholder-shown) {
        border-color: #1ccfc9;
        padding-top: 20px;
        padding-bottom: 4px;
      }

      .floating-label-group input:focus + label,
      .floating-label-group select:focus + label,
      .floating-label-group input:not(:placeholder-shown) + label,
      .floating-label-group select:not(:placeholder-shown) + label {
        top: 6px;
        font-size: 11px;
        color: #1ccfc9;
        font-weight: 700;
      }
    </style>

    <!-- Enhanced JavaScript for UI interactions -->
    <script>
      // Back to Top Button
      (function() {
        const backToTopBtn = document.getElementById('back-to-top');
        
        if (backToTopBtn) {
          window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
              backToTopBtn.classList.add('show');
            } else {
              backToTopBtn.classList.remove('show');
            }
          });

          backToTopBtn.addEventListener('click', function(e) {
            e.preventDefault();
            window.scrollTo({
              top: 0,
              behavior: 'smooth'
            });
          });
        }
      })();

      // Header Scroll Effect
      (function() {
        const header = document.querySelector('header.scroll-light');
        
        if (header) {
          window.addEventListener('scroll', function() {
            if (window.pageYOffset > 100) {
              header.classList.add('scrolled');
            } else {
              header.classList.remove('scrolled');
            }
          });
        }
      })();

      // Menu Button Toggle
      (function() {
        const menuBtn = document.getElementById('menu-btn');
        
        if (menuBtn) {
          menuBtn.addEventListener('click', function() {
            this.classList.toggle('active');
            // Add your mobile menu toggle logic here
          });
        }
      })();

      // Preloader
      window.addEventListener('load', function() {
        const preloader = document.getElementById('de-preloader');
        if (preloader) {
          setTimeout(function() {
            preloader.classList.add('loaded');
          }, 500);
        }
      });

      // Image Lazy Loading Enhancement
      (function() {
        const images = document.querySelectorAll('.d-img img');
        
        images.forEach(img => {
          img.addEventListener('load', function() {
            this.classList.add('loaded');
          });

          if (img.complete) {
            img.classList.add('loaded');
          }
        });
      })();

      // Connection Status Monitoring (Optional)
      (function() {
        function updateConnectionStatus() {
          const statusDiv = document.querySelector('.connection-status');
          
          if (!statusDiv) {
            const div = document.createElement('div');
            div.className = 'connection-status';
            div.innerHTML = '<i class="fa fa-wifi"></i><span>Connection restored</span>';
            document.body.appendChild(div);
          }

          const status = document.querySelector('.connection-status');

          if (navigator.onLine) {
            status.classList.remove('offline');
            status.classList.add('online');
            status.innerHTML = '<i class="fa fa-wifi"></i><span>Connection restored</span>';
          } else {
            status.classList.remove('online');
            status.classList.add('offline');
            status.innerHTML = '<i class="fa fa-wifi-slash"></i><span>No internet connection</span>';
          }
        }

        window.addEventListener('online', updateConnectionStatus);
        window.addEventListener('offline', updateConnectionStatus);
      })();

      // Smooth Scroll for Anchor Links
      (function() {
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
          anchor.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            
            if (href !== '#' && href !== '#!') {
              e.preventDefault();
              
              const target = document.querySelector(href);
              if (target) {
                target.scrollIntoView({
                  behavior: 'smooth',
                  block: 'start'
                });
              }
            }
          });
        });
      })();

      // Form Input Enhancements
      (function() {
        const inputs = document.querySelectorAll('input, select, textarea');
        
        inputs.forEach(input => {
          // Add focus class to parent
          input.addEventListener('focus', function() {
            const parent = this.closest('.calculator-form-group, .form-group, .floating-label-group');
            if (parent) {
              parent.classList.add('focused');
            }
          });

          input.addEventListener('blur', function() {
            const parent = this.closest('.calculator-form-group, .form-group, .floating-label-group');
            if (parent) {
              parent.classList.remove('focused');
            }
          });

          // Clear error on input
          input.addEventListener('input', function() {
            const errorElement = this.closest('.calculator-form-group, .form-group')?.querySelector('.calculator-error, .error-message');
            if (errorElement) {
              errorElement.style.display = 'none';
            }
          });
        });
      })();

      // Notification Toast Function (Optional)
      function showNotification(title, message, type = 'success') {
        let toast = document.querySelector('.notification-toast');
        
        if (!toast) {
          toast = document.createElement('div');
          toast.className = 'notification-toast';
          toast.innerHTML = `
            <i class="fa fa-check-circle"></i>
            <div class="notification-toast-content">
              <div class="notification-toast-title"></div>
              <div class="notification-toast-message"></div>
            </div>
            <button class="notification-toast-close">
              <i class="fa fa-times"></i>
            </button>
          `;
          document.body.appendChild(toast);

          toast.querySelector('.notification-toast-close').addEventListener('click', function() {
            toast.classList.remove('show');
          });
        }

        const icon = toast.querySelector('i:first-child');
        const titleEl = toast.querySelector('.notification-toast-title');
        const messageEl = toast.querySelector('.notification-toast-message');

        toast.className = 'notification-toast ' + type;
        
        if (type === 'error') {
          icon.className = 'fa fa-exclamation-circle';
        } else if (type === 'success') {
          icon.className = 'fa fa-check-circle';
        } else {
          icon.className = 'fa fa-info-circle';
        }

        titleEl.textContent = title;
        messageEl.textContent = message;

        toast.classList.add('show');

        setTimeout(function() {
          toast.classList.remove('show');
        }, 5000);
      }

      // Make function globally available
      window.showNotification = showNotification;

      // Performance Monitoring (Optional)
      (function() {
        if ('performance' in window) {
          window.addEventListener('load', function() {
            setTimeout(function() {
              const perfData = window.performance.timing;
              const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;
              
              console.log('%c⚡ Page Load Time: ' + pageLoadTime + 'ms', 'color: #1ccfc9; font-weight: bold; font-size: 14px;');
              
              // You can send this data to analytics if needed
            }, 0);
          });
        }
      })();

      // Console Branding (Optional)
      console.log('%c🚗 PlusRent', 'color: #1ccfc9; font-size: 32px; font-weight: bold;');
      console.log('%cCar Rental Platform | Version 2.0', 'color: #666; font-size: 14px;');
      console.log('%c© 2025 PlusRent.md - All rights reserved', 'color: #999; font-size: 12px;');
    </script>
</body>
</html>
<!-- Enhanced Error Handling and Validation -->
    <script>
      // Global Error Handler
      window.addEventListener('error', function(e) {
        console.error('Global error caught:', e.error);
        
        // You can send error to analytics here
        // Example: sendErrorToAnalytics(e.error);
      });

      window.addEventListener('unhandledrejection', function(e) {
        console.error('Unhandled promise rejection:', e.reason);
        
        // You can send error to analytics here
        // Example: sendErrorToAnalytics(e.reason);
      });

      // Enhanced Phone Validation with International Format Support
      function validatePhoneNumberAdvanced(phone) {
        // Remove all spaces, dashes, parentheses, and plus signs for validation
        const cleaned = phone.replace(/[\s\-\(\)\+]/g, '');
        
        // Check if it contains only digits
        if (!/^\d+$/.test(cleaned)) {
          return {
            valid: false,
            message: i18next.t('errors.phone_invalid_format') || 'Invalid phone number format. Please use only digits.'
          };
        }
        
        // Check minimum length (international standard minimum is 8)
        if (cleaned.length < 8) {
          return {
            valid: false,
            message: i18next.t('errors.phone_invalid_length') || 'Phone number is too short. Please enter at least 8 digits.'
          };
        }
        
        // Check maximum length (international standard maximum is 15)
        if (cleaned.length > 15) {
          return {
            valid: false,
            message: i18next.t('errors.phone_too_long') || 'Phone number is too long. Maximum 15 digits allowed.'
          };
        }
        
        return {
          valid: true,
          message: '',
          cleaned: cleaned
        };
      }

      // Enhanced Email Validation
      function validateEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        
        if (!email) {
          return {
            valid: false,
            message: i18next.t('errors.email_required') || 'Email address is required.'
          };
        }
        
        if (!emailRegex.test(email)) {
          return {
            valid: false,
            message: i18next.t('errors.email_invalid') || 'Please enter a valid email address.'
          };
        }
        
        return {
          valid: true,
          message: ''
        };
      }

      // Enhanced Date Validation
      function validateDateRange(dateFrom, dateTo) {
        if (!dateFrom || !dateTo) {
          return {
            valid: false,
            message: i18next.t('errors.dates_required') || 'Please select both pickup and return dates.'
          };
        }
        
        const fromDate = new Date(dateFrom);
        const toDate = new Date(dateTo);
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        // Check if dates are valid
        if (isNaN(fromDate.getTime()) || isNaN(toDate.getTime())) {
          return {
            valid: false,
            message: i18next.t('errors.dates_invalid') || 'Invalid date format.'
          };
        }
        
        // Check if pickup date is in the past
        if (fromDate < today) {
          return {
            valid: false,
            message: i18next.t('errors.date_past') || 'Pickup date cannot be in the past.'
          };
        }
        
        // Check if return date is before or equal to pickup date
        if (toDate <= fromDate) {
          return {
            valid: false,
            message: i18next.t('errors.date_order') || 'Return date must be after pickup date.'
          };
        }
        
        // Calculate rental duration
        const durationDays = Math.ceil((toDate - fromDate) / (1000 * 60 * 60 * 24));
        
        // Check minimum rental period (1 day)
        if (durationDays < 1) {
          return {
            valid: false,
            message: i18next.t('errors.date_min_duration') || 'Minimum rental period is 1 day.'
          };
        }
        
        // Check maximum rental period (365 days)
        if (durationDays > 365) {
          return {
            valid: false,
            message: i18next.t('errors.date_max_duration') || 'Maximum rental period is 365 days.'
          };
        }
        
        return {
          valid: true,
          message: '',
          durationDays: durationDays
        };
      }

      // Update Calculator Phone Validation to use Enhanced Version
      document.getElementById('calc-phone').addEventListener('input', function() {
        const validation = validatePhoneNumberAdvanced(this.value);
        const errorElement = document.getElementById('calc-phone-error');
        
        if (this.value && !validation.valid) {
          showCalculatorError('calc-phone-error', validation.message);
        } else {
          hideCalculatorError('calc-phone-error');
        }
      });

      // Format Phone Number Input (optional visual enhancement)
      function formatPhoneNumber(input) {
        const cleaned = input.replace(/\D/g, '');
        
        // Format as: +373 XX XXX XXX
        if (cleaned.length <= 3) {
          return '+' + cleaned;
        } else if (cleaned.length <= 5) {
          return '+' + cleaned.slice(0, 3) + ' ' + cleaned.slice(3);
        } else if (cleaned.length <= 8) {
          return '+' + cleaned.slice(0, 3) + ' ' + cleaned.slice(3, 5) + ' ' + cleaned.slice(5);
        } else {
          return '+' + cleaned.slice(0, 3) + ' ' + cleaned.slice(3, 5) + ' ' + cleaned.slice(5, 8) + ' ' + cleaned.slice(8, 11);
        }
      }

      // Auto-format phone input (optional)
      document.getElementById('calc-phone').addEventListener('keyup', function(e) {
        // Only format on input, not on backspace or delete
        if (e.key !== 'Backspace' && e.key !== 'Delete') {
          const cursorPosition = this.selectionStart;
          const formatted = formatPhoneNumber(this.value);
          const diff = formatted.length - this.value.length;
          
          this.value = formatted;
          
          // Maintain cursor position
          this.setSelectionRange(cursorPosition + diff, cursorPosition + diff);
        }
      });

      // Debounce Function for Performance
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      // Throttle Function for Performance
      function throttle(func, limit) {
        let inThrottle;
        return function(...args) {
          if (!inThrottle) {
            func.apply(this, args);
            inThrottle = true;
            setTimeout(() => inThrottle = false, limit);
          }
        };
      }

      // Enhanced Fetch with Retry Logic
      async function fetchWithRetry(url, options = {}, retries = 3) {
        for (let i = 0; i < retries; i++) {
          try {
            const response = await fetch(url, options);
            
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            return response;
          } catch (error) {
            console.error(`Fetch attempt ${i + 1} failed:`, error);
            
            if (i === retries - 1) {
              throw error;
            }
            
            // Wait before retrying (exponential backoff)
            await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000));
          }
        }
      }

      // Local Storage Helper with Expiration
      const storage = {
        set: function(key, value, expirationMinutes = null) {
          const item = {
            value: value,
            timestamp: Date.now()
          };
          
          if (expirationMinutes) {
            item.expiration = Date.now() + (expirationMinutes * 60 * 1000);
          }
          
          try {
            localStorage.setItem(key, JSON.stringify(item));
            return true;
          } catch (e) {
            console.error('Error saving to localStorage:', e);
            return false;
          }
        },
        
        get: function(key) {
          try {
            const itemStr = localStorage.getItem(key);
            
            if (!itemStr) {
              return null;
            }
            
            const item = JSON.parse(itemStr);
            
            // Check if item has expired
            if (item.expiration && Date.now() > item.expiration) {
              localStorage.removeItem(key);
              return null;
            }
            
            return item.value;
          } catch (e) {
            console.error('Error reading from localStorage:', e);
            return null;
          }
        },
        
        remove: function(key) {
          try {
            localStorage.removeItem(key);
            return true;
          } catch (e) {
            console.error('Error removing from localStorage:', e);
            return false;
          }
        },
        
        clear: function() {
          try {
            localStorage.clear();
            return true;
          } catch (e) {
            console.error('Error clearing localStorage:', e);
            return false;
          }
        }
      };

      // Cookie Helper Functions
      const cookies = {
        set: function(name, value, days = 30) {
          const expires = new Date();
          expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
          document.cookie = `${name}=${encodeURIComponent(value)};expires=${expires.toUTCString()};path=/;SameSite=Lax`;
        },
        
        get: function(name) {
          const nameEQ = name + "=";
          const ca = document.cookie.split(';');
          
          for(let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) === ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) === 0) {
              return decodeURIComponent(c.substring(nameEQ.length, c.length));
            }
          }
          
          return null;
        },
        
        remove: function(name) {
          document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/`;
        }
      };

      // URL Parameter Helper
      const urlParams = {
        get: function(param) {
          const params = new URLSearchParams(window.location.search);
          return params.get(param);
        },
        
        getAll: function() {
          const params = new URLSearchParams(window.location.search);
          const result = {};
          
          for (const [key, value] of params) {
            result[key] = value;
          }
          
          return result;
        },
        
        set: function(param, value, pushState = true) {
          const params = new URLSearchParams(window.location.search);
          params.set(param, value);
          
          const newUrl = `${window.location.pathname}?${params.toString()}`;
          
          if (pushState) {
            window.history.pushState({}, '', newUrl);
          } else {
            window.history.replaceState({}, '', newUrl);
          }
        },
        
        remove: function(param, pushState = true) {
          const params = new URLSearchParams(window.location.search);
          params.delete(param);
          
          const newUrl = params.toString() 
            ? `${window.location.pathname}?${params.toString()}`
            : window.location.pathname;
          
          if (pushState) {
            window.history.pushState({}, '', newUrl);
          } else {
            window.history.replaceState({}, '', newUrl);
          }
        }
      };

      // Device Detection
      const device = {
        isMobile: function() {
          return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        },
        
        isTablet: function() {
          return /(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(navigator.userAgent);
        },
        
        isDesktop: function() {
          return !this.isMobile() && !this.isTablet();
        },
        
        isIOS: function() {
          return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        },
        
        isAndroid: function() {
          return /Android/.test(navigator.userAgent);
        },
        
        isTouchDevice: function() {
          return 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        },
        
        getOrientation: function() {
          return window.innerHeight > window.innerWidth ? 'portrait' : 'landscape';
        },
        
        getViewportSize: function() {
          return {
            width: window.innerWidth,
            height: window.innerHeight
          };
        }
      };

      // Browser Detection
      const browser = {
        isChrome: function() {
          return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
        },
        
        isFirefox: function() {
          return /Firefox/.test(navigator.userAgent);
        },
        
        isSafari: function() {
          return /Safari/.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor);
        },
        
        isEdge: function() {
          return /Edg/.test(navigator.userAgent);
        },
        
        isIE: function() {
          return /MSIE|Trident/.test(navigator.userAgent);
        },
        
        getVersion: function() {
          const ua = navigator.userAgent;
          let match;
          
          if (this.isChrome()) {
            match = ua.match(/Chrome\/(\d+)/);
          } else if (this.isFirefox()) {
            match = ua.match(/Firefox\/(\d+)/);
          } else if (this.isSafari()) {
            match = ua.match(/Version\/(\d+)/);
          } else if (this.isEdge()) {
            match = ua.match(/Edg\/(\d+)/);
          } else if (this.isIE()) {
            match = ua.match(/(?:MSIE |rv:)(\d+)/);
          }
          
          return match ? parseInt(match[1]) : null;
        }
      };

      // Network Status Monitor
      const network = {
        isOnline: function() {
          return navigator.onLine;
        },
        
        getSpeed: function() {
          if ('connection' in navigator) {
            const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            return {
              effectiveType: connection.effectiveType,
              downlink: connection.downlink,
              rtt: connection.rtt,
              saveData: connection.saveData
            };
          }
          return null;
        },
        
        isSlow: function() {
          const speed = this.getSpeed();
          if (speed) {
            return speed.effectiveType === 'slow-2g' || speed.effectiveType === '2g';
          }
          return false;
        }
      };

      // Animation Observer (Intersection Observer)
      const animationObserver = {
        observer: null,
        
        init: function(options = {}) {
          const defaultOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.1
          };
          
          const observerOptions = { ...defaultOptions, ...options };
          
          this.observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                entry.target.classList.add('animated');
                
                // Optionally unobserve after animation
                if (entry.target.dataset.animateOnce === 'true') {
                  this.observer.unobserve(entry.target);
                }
              }
            });
          }, observerOptions);
        },
        
        observe: function(selector) {
          if (!this.observer) {
            this.init();
          }
          
          const elements = document.querySelectorAll(selector);
          elements.forEach(el => this.observer.observe(el));
        },
        
        unobserve: function(element) {
          if (this.observer && element) {
            this.observer.unobserve(element);
          }
        },
        
        disconnect: function() {
          if (this.observer) {
            this.observer.disconnect();
          }
        }
      };

      // Initialize animation observer for car cards
      document.addEventListener('DOMContentLoaded', function() {
        if ('IntersectionObserver' in window) {
          setTimeout(() => {
            animationObserver.observe('.de-item.mb30');
          }, 500);
        }
      });

      // Price Formatter
      function formatPrice(price, currency = '€', locale = 'ro-RO') {
        try {
          return new Intl.NumberFormat(locale, {
            style: 'currency',
            currency: currency === '€' ? 'EUR' : currency,
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
          }).format(price);
        } catch (e) {
          // Fallback if Intl is not supported
          return `${price}${currency}`;
        }
      }

      // Date Formatter
      function formatDate(date, locale = 'ro-RO', options = {}) {
        const defaultOptions = {
          year: 'numeric',
          month: 'long',
          day: 'numeric'
        };
        
        const formatOptions = { ...defaultOptions, ...options };
        
        try {
          return new Intl.DateTimeFormat(locale, formatOptions).format(new Date(date));
        } catch (e) {
          // Fallback
          return new Date(date).toLocaleDateString();
        }
      }

      // Number Formatter
      function formatNumber(number, locale = 'ro-RO') {
        try {
          return new Intl.NumberFormat(locale).format(number);
        } catch (e) {
          return number.toString();
        }
      }

      // Copy to Clipboard
      async function copyToClipboard(text) {
        try {
          if (navigator.clipboard && window.isSecureContext) {
            await navigator.clipboard.writeText(text);
            return true;
          } else {
            // Fallback for older browsers
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
              document.execCommand('copy');
              textArea.remove();
              return true;
            } catch (err) {
              console.error('Fallback copy failed:', err);
              textArea.remove();
              return false;
            }
          }
        } catch (err) {
          console.error('Copy to clipboard failed:', err);
          return false;
        }
      }

      // Share API
      async function shareContent(data) {
        if (navigator.share) {
          try {
            await navigator.share(data);
            return true;
          } catch (err) {
            console.error('Share failed:', err);
            return false;
          }
        } else {
          // Fallback: Copy to clipboard
          const shareText = `${data.title}\n${data.text}\n${data.url}`;
          const copied = await copyToClipboard(shareText);
          
          if (copied) {
            showNotification(
              i18next.t('share.copied_title') || 'Copied!',
              i18next.t('share.copied_message') || 'Link copied to clipboard',
              'success'
            );
          }
          
          return copied;
        }
      }

      // Print Page
      function printPage() {
        window.print();
      }

      // Download as PDF (requires browser support)
      function downloadAsPDF() {
        window.print();
      }

      // Generate Unique ID
      function generateUniqueId(prefix = 'id') {
        return `${prefix}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
      }

      // Sanitize HTML to prevent XSS
      function sanitizeHTML(html) {
        const temp = document.createElement('div');
        temp.textContent = html;
        return temp.innerHTML;
      }

      // Escape HTML
      function escapeHTML(text) {
        const map = {
          '&': '&amp;',
          '<': '&lt;',
          '>': '&gt;',
          '"': '&quot;',
          "'": '&#039;'
        };
        return text.replace(/[&<>"']/g, m => map[m]);
      }

      // Get Query String as Object
      function getQueryParams() {
        const params = {};
        const queryString = window.location.search.substring(1);
        const queries = queryString.split('&');
        
        queries.forEach(query => {
          const [key, value] = query.split('=');
          if (key) {
            params[decodeURIComponent(key)] = decodeURIComponent(value || '');
          }
        });
        
        return params;
      }

      // Build Query String from Object
      function buildQueryString(params) {
        return Object.keys(params)
          .filter(key => params[key] !== null && params[key] !== undefined && params[key] !== '')
          .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`)
          .join('&');
      }

      // Deep Clone Object
      function deepClone(obj) {
        if (obj === null || typeof obj !== 'object') {
          return obj;
        }
        
        if (obj instanceof Date) {
          return new Date(obj.getTime());
        }
        
        if (obj instanceof Array) {
          return obj.map(item => deepClone(item));
        }
        
        if (obj instanceof Object) {
          const clonedObj = {};
          for (const key in obj) {
            if (obj.hasOwnProperty(key)) {
              clonedObj[key] = deepClone(obj[key]);
            }
          }
          return clonedObj;
        }
      }

      // Check if Object is Empty
      function isEmpty(obj) {
        if (obj === null || obj === undefined) return true;
        if (typeof obj === 'string' || Array.isArray(obj)) return obj.length === 0;
        if (typeof obj === 'object') return Object.keys(obj).length === 0;
        return false;
      }

      // Capitalize First Letter
      function capitalizeFirstLetter(string) {
        if (!string) return '';
        return string.charAt(0).toUpperCase() + string.slice(1);
      }

      // Truncate String
      function truncateString(str, maxLength = 100, suffix = '...') {
        if (!str || str.length <= maxLength) return str;
        return str.substring(0, maxLength - suffix.length) + suffix;
      }

      // Sleep/Delay Function
      function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
      }

      // Random Number Generator
      function randomNumber(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

      // Random String Generator
      function randomString(length = 10) {
        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        let result = '';
        for (let i = 0; i < length; i++) {
          result += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        return result;
      }

      // Check if Element is in Viewport
      function isInViewport(element, offset = 0) {
        if (!element) return false;
        
        const rect = element.getBoundingClientRect();
        return (
          rect.top >= -offset &&
          rect.left >= -offset &&
          rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) + offset &&
          rect.right <= (window.innerWidth || document.documentElement.clientWidth) + offset
        );
      }

      // Scroll to Element
      function scrollToElement(element, offset = 0, behavior = 'smooth') {
        if (!element) return;
        
        const elementPosition = element.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - offset;
        
        window.scrollTo({
          top: offsetPosition,
          behavior: behavior
        });
      }

      // Get Element Offset
      function getElementOffset(element) {
        if (!element) return { top: 0, left: 0 };
        
        const rect = element.getBoundingClientRect();
        return {
          top: rect.top + window.pageYOffset,
          left: rect.left + window.pageXOffset
        };
      }

      // Add Event Listener with Options
      function addEventListenerWithOptions(element, event, handler, options = {}) {
        if (!element) return;
        
        const defaultOptions = {
          capture: false,
          once: false,
          passive: true
        };
        
        const eventOptions = { ...defaultOptions, ...options };
        element.addEventListener(event, handler, eventOptions);
        
        // Return function to remove listener
        return () => element.removeEventListener(event, handler, eventOptions);
      }

      // Delegate Event
      function delegate(parent, eventType, selector, handler) {
        if (!parent) return;
        
        parent.addEventListener(eventType, function(event) {
          const targetElement = event.target.closest(selector);
          
          if (targetElement && parent.contains(targetElement)) {
            handler.call(targetElement, event);
          }
        });
      }

      // Polyfill for Element.closest() if needed
      if (!Element.prototype.closest) {
        Element.prototype.closest = function(selector) {
          let el = this;
          while (el) {
            if (el.matches(selector)) {
              return el;
            }
            el = el.parentElement;
          }
          return null;
        };
      }

      // Polyfill for Element.matches() if needed
      if (!Element.prototype.matches) {
        Element.prototype.matches = 
          Element.prototype.matchesSelector ||
          Element.prototype.mozMatchesSelector ||
          Element.prototype.msMatchesSelector ||
          Element.prototype.oMatchesSelector ||
          Element.prototype.webkitMatchesSelector ||
          function(s) {
            const matches = (this.document || this.ownerDocument).querySelectorAll(s);
            let i = matches.length;
            while (--i >= 0 && matches.item(i) !== this) {}
            return i > -1;
          };
      }

      // Analytics Event Tracking (if needed)
      function trackEvent(category, action, label = '', value = 0) {
        // Google Analytics
        if (typeof gtag !== 'undefined') {
          gtag('event', action, {
            'event_category': category,
            'event_label': label,
            'value': value
          });
        }
        
        // Facebook Pixel
        if (typeof fbq !== 'undefined') {
          fbq('trackCustom', action, {
            category: category,
            label: label,
            value: value
          });
        }
        
        // Console log for development
        console.log('Event tracked:', { category, action, label, value });
      }

      // Log Page View (if needed)
      function logPageView(page) {
        // Google Analytics
        if (typeof gtag !== 'undefined') {
          gtag('config', 'GA_MEASUREMENT_ID', {
            'page_path': page
          });
        }
        
        // Facebook Pixel
        if (typeof fbq !== 'undefined') {
          fbq('track', 'PageView');
        }
        
        console.log('Page view logged:', page);
      }

      // Console log with styling
      function log(message, type = 'info') {
        const styles = {
          info: 'color: #1ccfc9; font-weight: bold;',
          success: 'color: #10b981; font-weight: bold;',
          warning: 'color: #f59e0b; font-weight: bold;',
          error: 'color: #ef4444; font-weight: bold;'
        };
        
        console.log(`%c${message}`, styles[type] || styles.info);
      }

      // Make utility functions globally available
      window.utils = {
        validatePhoneNumberAdvanced,
        validateEmail,
        validateDateRange,
        formatPhoneNumber,
        debounce,
        throttle,
        fetchWithRetry,
        storage,
        cookies,
        urlParams,
        device,
        browser,
        network,
        animationObserver,
        formatPrice,
        formatDate,
        formatNumber,
        copyToClipboard,
        shareContent,
        printPage,
        downloadAsPDF,
        generateUniqueId,
        sanitizeHTML,
        escapeHTML,
        getQueryParams,
        buildQueryString,
        deepClone,
        isEmpty,
        capitalizeFirstLetter,
        truncateString,
        sleep,
        randomNumber,
        randomString,
        isInViewport,
        scrollToElement,
        getElementOffset,
        addEventListenerWithOptions,
        delegate,
        trackEvent,
        logPageView,
        log
      };

      // Development mode detection
      const isDevelopment = window.location.hostname === 'localhost' || 
                           window.location.hostname === '127.0.0.1' ||
                           window.location.hostname === '';

      if (isDevelopment) {
        console.log('%c🔧 Development Mode', 'color: #f59e0b; font-size: 16px; font-weight: bold;');
        console.log('%cUtils available at window.utils', 'color: #999; font-size: 12px;');
      }
    </script>

    <!-- Enhanced i18n Translation Updates -->
    <script>
      // Add translation keys for new error messages
      if (typeof i18next !== 'undefined') {
        i18next.on('initialized', function() {
          // Add missing translation keys
          const additionalTranslations = {
            ro: {
              errors: {
                phone_invalid_format: 'Format de număr de telefon invalid. Vă rugăm să folosiți doar cifre.',
                phone_invalid_length: 'Numărul de telefon este prea scurt. Introduceți cel puțin 8 cifre.',
                phone_too_long: 'Numărul de telefon este prea lung. Maximum 15 cifre permise.',
                email_required: 'Adresa de email este obligatorie.',
                email_invalid: 'Vă rugăm să introduceți o adresă de email validă.',
                dates_required: 'Vă rugăm să selectați datele de ridicare și returnare.',
                dates_invalid: 'Format de dată invalid.',
                date_past: 'Data ridicării nu poate fi în trecut.',
                date_order: 'Data returnării trebuie să fie după data ridicării.',
                date_min_duration: 'Perioada minimă de închiriere este 1 zi.',
                date_max_duration: 'Perioada maximă de închiriere este 365 de zile.'
              },
              share: {
                copied_title: 'Copiat!',
                copied_message: 'Link copiat în clipboard'
              },
              calculator: {
                title: 'Calculator Preț',
                pickup_date: 'Data Ridicării',
                return_date: 'Data Returnării',
                phone: 'Număr de Telefon',
                phone_placeholder: '+373 60 000 500',
                select_pickup: 'Selectați data ridicării',
                select_return: 'Selectați data returnării',
                calculate_btn: 'Calculează Prețul',
                calculating: 'Se calculează prețul...',
                total_price: 'Preț Total',
                rental_days: 'Zile de Închiriere',
                daily_rate: 'Tarif Zilnic',
                error_pickup: 'Vă rugăm să selectați data ridicării',
                error_return: 'Vă rugăm să selectați data returnării',
                error_phone: 'Vă rugăm să introduceți un număr de telefon valid (minim 8 cifre)'
              }
            },
            ru: {
              errors: {
                phone_invalid_format: 'Неверный формат номера телефона. Пожалуйста, используйте только цифры.',
                phone_invalid_length: 'Номер телефона слишком короткий. Введите не менее 8 цифр.',
                phone_too_long: 'Номер телефона слишком длинный. Максимум 15 цифр.',
                email_required: 'Адрес электронной почты обязателен.',
                email_invalid: 'Пожалуйста, введите действительный адрес электронной почты.',
                dates_required: 'Пожалуйста, выберите даты получения и возврата.',
                dates_invalid: 'Неверный формат даты.',
                date_past: 'Дата получения не может быть в прошлом.',
                date_order: 'Дата возврата должна быть после даты получения.',
                date_min_duration: 'Минимальный период аренды - 1 день.',
                date_max_duration: 'Максимальный период аренды - 365 дней.'
              },
              share: {
                copied_title: 'Скопировано!',
                copied_message: 'Ссылка скопирована в буфер обмена'
              },
              calculator: {
                title: 'Калькулятор Цены',
                pickup_date: 'Дата Получения',
                return_date: 'Дата Возврата',
                phone: 'Номер Телефона',
                phone_placeholder: '+373 60 000 500',
                select_pickup: 'Выберите дату получения',
                select_return: 'Выберите дату возврата',
                calculate_btn: 'Рассчитать Цену',
                calculating: 'Рассчитываем цену...',
                total_price: 'Общая Цена',
                rental_days: 'Дни Аренды',
                daily_rate: 'Дневной Тариф',
                error_pickup: 'Пожалуйста, выберите дату получения',
                error_return: 'Пожалуйста, выберите дату возврата',
                error_phone: 'Пожалуйста, введите действительный номер телефона (минимум 8 цифр)'
              }
            },
            en: {
              errors: {
                phone_invalid_format: 'Invalid phone number format. Please use only digits.',
                phone_invalid_length: 'Phone number is too short. Please enter at least 8 digits.',
                phone_too_long: 'Phone number is too long. Maximum 15 digits allowed.',
                email_required: 'Email address is required.',
                email_invalid: 'Please enter a valid email address.',
                dates_required: 'Please select both pickup and return dates.',
                dates_invalid: 'Invalid date format.',
                date_past: 'Pickup date cannot be in the past.',
                date_order: 'Return date must be after pickup date.',
                date_min_duration: 'Minimum rental period is 1 day.',
                date_max_duration: 'Maximum rental period is 365 days.'
              },
              share: {
                copied_title: 'Copied!',
                copied_message: 'Link copied to clipboard'
              },
              calculator: {
                title: 'Price Calculator',
                pickup_date: 'Pickup Date',
                return_date: 'Return Date',
                phone: 'Phone Number',
                phone_placeholder: '+373 60 000 500',
                select_pickup: 'Select pickup date',
                select_return: 'Select return date',
                calculate_btn: 'Calculate Price',
                calculating: 'Calculating price...',
                total_price: 'Total Price',
                rental_days: 'Rental Days',
                daily_rate: 'Daily Rate',
                error_pickup: 'Please select a pickup date',
                error_return: 'Please select a return date',
                error_phone: 'Please enter a valid phone number (minimum 8 digits)'
              }
            }
          };

          // Merge translations
          Object.keys(additionalTranslations).forEach(lang => {
            i18next.addResourceBundle(lang, 'translation', additionalTranslations[lang], true, true);
          });
        });
      }
    </script>
</body>
</html>
