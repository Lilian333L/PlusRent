<!DOCTYPE html>
<html lang="ro">

<head>
  <title>PlusRent – Chirie Auto Chișinău 24/7 | Livrare Rapidă la Aeroport</title>
  
  <!-- Favicon - Optimized for Search Engines -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
  
  <!-- Additional Favicon Formats -->
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/images/android-chrome-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/images/android-chrome-512x512.png">
  
  <!-- Microsoft -->
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-config" content="/browserconfig.xml">
  
  <!-- Theme Color for Mobile Browsers -->
  <meta name="theme-color" content="#ffffff">
  
  <!-- Meta base -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Content Security Policy -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://code.jquery.com https://stackpath.bootstrapcdn.com https://unpkg.com; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://fonts.googleapis.com https://stackpath.bootstrapcdn.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com data:; img-src 'self' data: https: blob:; connect-src 'self' https://api.telegram.org https://*.supabase.co https://*.vercel.app; object-src 'none'; media-src 'self'; frame-src 'self'; base-uri 'self'; form-action 'self';">
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="Închirieri auto în Chișinău cu PlusRent. Mașini moderne, prețuri accesibile și livrare direct la aeroport 24/7. Rezervă rapid și sigur!">
  <meta name="keywords" content="închirieri auto Chișinău, chirie auto Chișinău, chirie mașină Chișinău, mașini de închiriat Chișinău, rent a car Moldova, car rental Moldova, închirieri mașini aeroport Chișinău, rent car Chișinău airport, auto de închiriat Moldova, închirieri auto ieftine Chișinău, chirie auto non stop Chișinău, închirieri auto aeroport, închirieri auto cu livrare, închirieri auto 24/7 Chișinău, rent a car cheap Moldova, car hire Chisinau, best car rental Moldova, PlusRent, plusrent.md, cea mai bună chirie auto, mașină de închiriat Moldova, rezervare mașină online Moldova, car hire Chisinau airport, rent cheap car Moldova, car rental Chisinau center, inchirieri auto pe termen lung Moldova, chirie auto fără card, chirie auto fără depozit, прокат авто Кишинёв, аренда машин Кишинёв, прокат машин Молдова, аренда авто Молдова, аренда авто Кишинёв аэропорт, прокат автомобилей Кишинёв центр, аренда машины Молдова дешево, аренда авто Chisinau airport, авто напрокат Молдова, аренда авто круглосуточно Кишинёв, аренда авто без депозита Кишинёв, прокат машин Chisinau 24/7, car rental Chisinau, rent a car Chisinau, Chisinau airport car rental, Moldova car hire, rent car in Chisinau, car hire Moldova, cheap car rental Moldova, Chisinau rent car 24/7, best car rental Chisinau, Moldova airport car hire, rent a car Chisinau city center, affordable car rental Chisinau, long term car rental Moldova">
  <meta name="author" content="PlusRent.md">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://plusrent.md/">
  
  <!-- Open Graph (Facebook, WhatsApp, LinkedIn) -->
  <meta property="og:title" content="PlusRent – Chirie Auto Chișinău 24/7 | Livrare Rapidă">
  <meta property="og:description" content="Chirie auto sigură și rapidă în Chișinău, disponibil 24/7! Rezervă instant mașina ta online și bucură-te de livrare direct la aeroport fără stres!">
  <meta property="og:image" content="https://plusrent.md/images/LOGO-5-demo.png">
  <meta property="og:url" content="https://plusrent.md">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="PlusRent">
  <meta property="og:locale" content="ro_RO">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="PlusRent – Chirie Auto Chișinău 24/7 | Livrare Rapidă">
  <meta name="twitter:description" content="Chirie auto sigură și rapidă în Chișinău, disponibil 24/7! Rezervă instant mașina ta online și bucură-te de livrare direct la aeroport fără stres!">
  <meta name="twitter:image" content="https://plusrent.md/images/LOGO-5-demo.png">
  <meta name="twitter:site" content="@plusrent">
  
  <!-- CSS Files -->
  <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" id="bootstrap">
  <link href="css/mdb.min.css" rel="stylesheet" type="text/css" id="mdb">
  <link href="css/plugins.css" rel="stylesheet" type="text/css">
  <link href="css/style.css" rel="stylesheet" type="text/css">
  <link href="css/coloring.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
  <link id="colors" href="css/colors/scheme-01.css" rel="stylesheet" type="text/css">
  <!-- API Configuration -->

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CarRental",
    "name": "PlusRent",
    "url": "https://plusrent.md",
    "logo": "https://plusrent.md/images/icon.png",
    "image": "https://plusrent.md/images/LOGO-4-demo.png",
    "description": "Închirieri auto în Chișinău, livrare aeroport 24/7, rezervări rapide și prețuri accesibile cu PlusRent.",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Chișinău",
      "addressCountry": "MD"
    },
    "telephone": "+37360000500"
  }
  </script>
  <script>
    // Global API configuration for Vercel deployment
    window.API_BASE_URL = '';

    // Cache busting for development
    window.API_VERSION = Date.now();

    // Log API configuration

    // Global function to ensure API_BASE_URL is always available
    window.ensureApiConfig = function () {
      if (typeof window.API_BASE_URL === 'undefined' || window.API_BASE_URL === null) {

        window.API_BASE_URL = '';
      }
      return window.API_BASE_URL;
    };

    // Ensure API_BASE_URL is available globally
    window.API_BASE_URL = '';
  </script>

  <!-- Custom Language Picker Styles -->
  <style>


    .lang-picker-wrapper {
      position: relative;
      display: inline-block;
      vertical-align: middle;
    }

    /* Enhanced Booking Form Styles */
    .vehicle-select {
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 12px 15px;
      font-size: 16px;
      transition: all 0.3s ease;
      background: #fff;
    }

    /* Ensure submit button is always visible */
    #send_message {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
      background: #f0c040 !important;
      color: #fff !important;
      border: none !important;
      padding: 12px 30px !important;
      font-size: 16px !important;
      font-weight: 600 !important;
      border-radius: 8px !important;
      cursor: pointer !important;
      transition: all 0.3s ease !important;
      width: 100% !important;
      margin-top: 20px !important;
    }

    #send_message:hover {
      background: #e6b800 !important;
      transform: translateY(-2px) !important;
      box-shadow: 0 4px 12px rgba(240, 192, 64, 0.3) !important;
    }

    #send_message:disabled {
      background: #ccc !important;
      cursor: not-allowed !important;
      transform: none !important;
      box-shadow: none !important;
    }

    /* Ensure field-set and submit container are properly styled */
    .field-set {
      margin-bottom: 20px;
    }

    #submit {
      margin-top: 20px;
      text-align: center;
    }

    /* Loading spinner for submit button */
    .loading-spinner {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid #ffffff;
      border-radius: 50%;
      border-top-color: transparent;
      animation: spin 1s ease-in-out infinite;
      margin-right: 8px;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    .vehicle-select:focus {
      border-color: #f0c040;
      box-shadow: 0 0 0 0.2rem rgba(240, 192, 64, 0.25);
      outline: none;
    }

    .vehicle-card {
      border: 1px solid #e0e0e0;
      transition: all 0.3s ease;
    }

    .vehicle-card:hover {
      border-color: #f0c040;
      box-shadow: 0 4px 12px rgba(240, 192, 64, 0.15);
    }

    .date-time-field {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .date-time-field input[type="text"] {
      flex: 1;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 12px 15px;
    }

    /* Enhanced Error Message Styling */
    #error_message {
      background: linear-gradient(135deg, #ff6b6b, #ee5a52) !important;
      color: white !important;
      border: none !important;
      border-radius: 8px !important;
      padding: 15px 20px !important;
      margin: 15px 0 20px 0 !important;
      font-size: 14px !important;
      font-weight: 500 !important;
      box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3) !important;
      position: relative !important;
      overflow: hidden !important;
    }

    #error_message:before {
      content: "⚠️";
      margin-right: 8px;
      font-size: 16px;
    }

    #error_message.show {
      animation: slideInDown 0.3s ease-out;
    }

    @keyframes slideInDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Location Information Styling */
    .location-info {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 6px;
      padding: 12px 15px;
      margin-top: 10px;
    }

    .location-info small {
      color: #6c757d;
      font-size: 13px;
      line-height: 1.4;
    }

    .location-info i {
      color: #f0c040;
    }

    .vehicle-select:focus {
      border-color: #f0c040;
      box-shadow: 0 0 0 0.2rem rgba(240, 192, 64, 0.25);
      outline: none;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    .date-time-field input[type="text"]:focus {
      border-color: #f0c040;
      box-shadow: 0 0 0 0.2rem rgba(240, 192, 64, 0.25);
      outline: none;
    }

    .date-time-field select {
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 12px 15px;
      font-size: 16px;
      transition: all 0.3s ease;
      background: #fff;
    }

    .date-time-field select:focus {
      border-color: #f0c040;
      box-shadow: 0 0 0 0.2rem rgba(240, 192, 64, 0.25);
      outline: none;
    }

    .field-set input,
    .field-set textarea {
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 12px 15px;
      font-size: 16px;
      transition: all 0.3s ease;
      background: #fff;
    }

    .field-set input:focus,
    .field-set textarea:focus {
      border-color: #f0c040;
      box-shadow: 0 0 0 0.2rem rgba(240, 192, 64, 0.25);
      outline: none;
    }

    .error_input {
      border-color: #dc3545 !important;
      box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25) !important;
    }

    .field-error {
      color: #dc3545;
      font-size: 12px;
      margin-top: 5px;
      display: block;
    }

    /* Radio Button Styles */
    .radio-group {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      padding: 15px;
      margin-top: 10px;
    }

    .radio-option {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
      cursor: pointer;
      font-size: 14px;
      color: #495057;
      transition: all 0.3s ease;
      padding: 8px 12px;
      border-radius: 6px;
      position: relative;
    }

    .radio-option:last-child {
      margin-bottom: 0;
    }

    .radio-option:hover {
      background: rgba(240, 192, 64, 0.1);
      color: #333;
    }

    .radio-option input[type="radio"] {
      position: absolute;
      opacity: 0;
      cursor: pointer;
      height: 0;
      width: 0;
    }

    .radio-custom {
      position: relative;
      height: 18px;
      width: 18px;
      background-color: #fff;
      border: 2px solid #dee2e6;
      border-radius: 50%;
      margin-right: 12px;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }

    .radio-option input[type="radio"]:checked~.radio-custom {
      background-color: #f0c040;
      border-color: #f0c040;
    }

    .radio-option input[type="radio"]:checked~.radio-custom:after {
      content: "";
      position: absolute;
      display: block;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: white;
    }

    .radio-option input[type="radio"]:focus~.radio-custom {
      box-shadow: 0 0 0 3px rgba(240, 192, 64, 0.25);
    }

    .radio-option input[type="radio"]:checked~span:not(.radio-custom) {
      color: #333;
      font-weight: 500;
    }

    .radio-group.error_input {
      border-color: #dc3545;
      box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
    }

    /* Location Card Styling */
    .location-card {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      padding: 12px;
    }

    .location-card .fw-bold {
      color: #495057;
      font-size: 13px;
    }

    .btn-main {
      background: linear-gradient(135deg, #f0c040 0%, #e6b800 100%);
      border: none;
      border-radius: 8px;
      padding: 15px 30px;
      font-size: 16px;
      font-weight: 600;
      color: #fff;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .btn-main:hover {
      background: linear-gradient(135deg, #e6b800 0%, #d4a600 100%);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(240, 192, 64, 0.3);
      color: #fff;
    }

    .btn-main:disabled {
      background: #6c757d;
      transform: none;
      box-shadow: none;
      cursor: not-allowed;
    }

    .success {
      background: #d4edda;
      border: 1px solid #c3e6cb;
      color: #155724;
      padding: 30px;
      border-radius: 12px;
      margin-top: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .success-icon {
      animation: bounceIn 0.6s ease-out;
    }

    @keyframes bounceIn {
      0% {
        transform: scale(0.3);
        opacity: 0;
      }

      50% {
        transform: scale(1.05);
      }

      70% {
        transform: scale(0.9);
      }

      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    .booking-details {
      background: #f8f9fa;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }

    .booking-details h5 {
      color: #333;
      margin-bottom: 15px;
      font-weight: 600;
    }

    .booking-details p {
      margin-bottom: 8px;
      color: #666;
    }

    .booking-details strong {
      color: #333;
    }

    /* Booking Info Alert */
    .booking-info .alert {
      border-radius: 8px;
      border: none;
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
      color: #1565c0;
      padding: 15px 20px;
    }

    .booking-info .alert i {
      margin-right: 8px;
    }

    .booking-info .alert ul {
      padding-left: 20px;
    }

    .booking-info .alert li {
      margin-bottom: 5px;
      font-size: 14px;
    }

    .error {
      background: #f8d7da;
      border: 1px solid #f5c6cb;
      color: #721c24;
      padding: 15px;
      border-radius: 8px;
      margin-top: 10px;
    }

    /* Loading animation */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid #f3f3f3;
      border-top: 3px solid #f0c040;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 10px;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    /* Price Summary Styles */
    .price-summary {
      background: #f8f9fa;
      border: 1px solid #e0e0e0;
      border-radius: 12px;
      padding: 15px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }

    .price-summary h5 {
      color: #333;
      font-weight: 600;
      margin-bottom: 12px;
      font-size: 16px;
    }

    .price-breakdown {
      font-size: 13px;
    }

    .price-item {
      color: #666;
      margin-bottom: 8px !important;
    }

    .price-item.fw-bold {
      color: #333;
      font-size: 15px;
      margin-top: 10px;
    }

    .price-item .text-primary {
      color: #f0c040 !important;
      font-weight: 700;
    }

    .price-summary hr {
      margin: 10px 0;
      border-color: #e0e0e0;
    }

    /* Compact Price Summary */
    .price-summary-compact {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 12px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08);
      margin-bottom: 15px;
    }

    .price-summary-compact h6 {
      color: #495057;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .price-breakdown-compact {
      font-size: 12px;
    }

    .price-item-compact {
      color: #6c757d;
      margin-bottom: 4px !important;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .price-item-compact.total {
      color: #495057;
      font-weight: 600;
      font-size: 14px;
      margin-top: 8px;
      padding-top: 8px;
      border-top: 1px solid #dee2e6;
    }

    .price-item-compact .text-primary {
      color: #f0c040 !important;
      font-weight: 700;
    }

    /* Quick Book Button */
    .quick-book-btn {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 13px;
      margin-bottom: 15px;
      width: 100%;
    }

    .quick-book-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
    }

    /* Modal body styles */
    body.modal-open {
      overflow: hidden;
    }

    /* Ensure modal can be closed */
    .modal-backdrop {
      z-index: 1040;
    }

    .modal {
      z-index: 1050;
    }

    /* Force modal close button to work */
    .close-modal,
    .btn-close-calc {
      cursor: pointer !important;
      z-index: 1060 !important;
      position: relative !important;
    }

    /* Ensure modal content is clickable */
    .price-calculator-content {
      pointer-events: auto !important;
    }

    /* Ensure smooth scrolling for modal content */
    .price-calculator-content {
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
      /* For iOS smooth scrolling */
    }

    .modal-body {
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
    }

    /* Responsive adjustments for modal */
    @media (max-width: 768px) {
      .price-calculator-content {
        width: 95%;
        margin: 5% auto;
        max-height: 90vh;
      }

      .modal-body {
        max-height: calc(90vh - 60px);
        padding: 15px;
      }

      .btn-calculate,
      .btn-close-calc {
        width: 100%;
        margin: 5px 0;
      }
    }

    .lang-picker-btn {
      display: flex;
      align-items: center;
      gap: 7px;
      padding: 4px 12px;
      border-radius: 4px;
      border: 1px solid #e0e0e0;
      background: #f6f6f6;
      cursor: pointer;
      font-weight: 500;
      font-size: 14px;
      min-width: 80px;
      height: 36px;
      line-height: 1.2;
      transition: border 0.2s, box-shadow 0.2s;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.02);
      margin-left: 0;
    }

    .lang-picker-btn:focus,
    .lang-picker-btn[aria-expanded="true"] {
      outline: none;
      border-color: #f0c040;
      box-shadow: 0 2px 12px rgba(240, 192, 64, 0.08);
    }

    .lang-picker-dropdown {
      display: none;
      position: absolute;
      top: 110%;
      left: 0;
      z-index: 1000;
      background: #fff;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
      padding: 0;
      margin: 0;
      min-width: 120px;
      list-style: none;
    }

    .lang-picker-dropdown.open {
      display: block;
    }

    .lang-option {
      display: flex;
      align-items: center;
      gap: 7px;
      padding: 7px 14px;
      cursor: pointer;
      font-size: 14px;
      background: none;
      border: none;
      transition: background 0.15s, color 0.15s;
      height: 32px;
      line-height: 1.2;
    }

    .lang-option:focus,
    .lang-option:hover {
      background: #f0c04022;
      color: #031B4E;
      outline: none;
    }

    .lang-option.selected {
      background: #f0c04044;
      color: #031B4E;
      font-weight: 600;
    }

    .lang-flag {
      font-size: 18px;
      width: 20px;
      display: inline-block;
      text-align: center;
    }

    .lang-globe {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 20px;
      height: 20px;
      margin-right: 3px;
    }

    .lang-code {
      font-weight: 600;
      margin: 0 2px 0 2px;
    }

    @media (max-width: 600px) {
      .lang-picker-btn {
        font-size: 12px;
        padding: 3px 7px;
        min-width: 60px;
        height: 30px;
      }

      .lang-picker-dropdown {
        min-width: 80px;
      }

      .lang-option {
        font-size: 12px;
        padding: 6px 8px;
        height: 26px;
      }

      .lang-flag {
        font-size: 15px;
        width: 15px;
      }
    }

    /* --- Fleet Car Grid: Match Cars Page --- */
    .fleet-car-grid.car-list-row {
      display: flex;
      flex-wrap: wrap;
      margin-left: 0;
      margin-right: 0;
      gap: 1.5rem 0;
      justify-content: center;
    }

    .fleet-car-grid .col-xl-4,
    .fleet-car-grid .col-lg-4 {
      padding-left: 10px;
      padding-right: 10px;
      margin-bottom: 24px;
      max-width: 320px;
      flex: 1 1 260px;

      display: flex;
    }

    .de-item.mb30 {
      transition: box-shadow 0.25s, transform 0.25s;
      margin-bottom: 0 !important;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      padding: 0.7rem 0.7rem 1.1rem 0.7rem;
      background: #fff;
      width: 100%;
      display: flex;
      flex-direction: column;
      height: 100%;
      min-height: 420px;
    }

    .car-unavailable {
      opacity: 0.6;
      pointer-events: none;
      filter: grayscale(0.7);
    }

    .img-unavailable img {
      filter: grayscale(0.22) brightness(0.96);
    }

    .unavailable-badge {
      position: absolute;
      top: 0px;
      right: 0;
      background: #ff6b5b;
      color: #fff;
      font-size: 0.52rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      padding: 5px 14px 4px 14px;
      border-radius: 7px;
      z-index: 2;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.10);
      pointer-events: none;
      border: none;
    }

    .btn-unavailable {
      background: #ececec !important;
      color: #888 !important;
      border: 2px solid #ececec !important;
      cursor: not-allowed !important;
      pointer-events: none;
      font-weight: 700;
      border-radius: 8px;
      display: inline-block;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
      transition: background 0.2s, color 0.2s, border 0.2s;
    }

    .d-img {
      position: relative;
      margin-bottom: 1rem;
      border-radius: 8px;
      overflow: hidden;
      background: #f8f9fa;
      height: 200px;
      /* Fixed height instead of min-height */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .car-gallery .d-img {
      height: 200px;
    }

    .car-gallery .d-img img {
      height: 100%;
      object-fit: cover;
      max-height: 200px;
    }

    .d-img img {
      width: 100%;
      height: auto;
      object-fit: cover;
    }

    .d-info {
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .d-text {
      flex: 1 1 auto;
    }

    .d-item_like {
      margin-bottom: 0.5rem;
    }

    .d-atr-group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem 1rem;
      margin-bottom: 0.7rem;
      font-size: 0.98rem;
    }

    .d-atr img {
      width: 18px;
      height: 18px;
      margin-right: 4px;
      vertical-align: middle;
    }

    .d-price {
      font-weight: 600;
      margin-bottom: 0.7rem;
      color: #1976d2;
    }

    .btn-main {
      margin-top: 0.5rem;
      width: 100%;
      text-align: center;
    }

    @media (max-width: 991px) {
      .fleet-car-grid.car-list-row {
        flex-direction: row;
      }
    }

    @media (max-width: 600px) {
      .fleet-car-grid {
        grid-template-columns: 1fr;
      }

      .fleet-car-card {
        padding: 1rem 0.5rem 1.2rem 0.5rem;
      }
    }

    /* --- Fleet Car Grid: Scoped to Fleet Section Only --- */
    #section-cars .fleet-car-grid.car-list-row {
      display: flex;
      flex-wrap: wrap;
      margin-left: 0;
      margin-right: 0;
      gap: 1.5rem 0;
      justify-content: center;
    }

    #section-cars .fleet-car-grid .col-xl-4,
    #section-cars .fleet-car-grid .col-lg-4 {
      padding-left: 10px;
      padding-right: 10px;
      margin-bottom: 24px;
      max-width: 320px;
      flex: 1 1 260px;

      display: flex;
    }

    #section-cars .de-item.mb30 {
      transition: box-shadow 0.25s, transform 0.25s;
      margin-bottom: 0 !important;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      padding: 0.7rem 0.7rem 1.1rem 0.7rem;
      background: #fff;
      width: 100%;
      display: flex;
      flex-direction: column;
      height: 100%;
      min-height: 420px;
    }

    #section-cars .car-unavailable {
      opacity: 0.6;
      pointer-events: none;
      filter: grayscale(0.7);
    }

    #section-cars .img-unavailable img {
      filter: grayscale(0.22) brightness(0.96);
    }

    #section-cars .unavailable-badge {
      position: absolute;
      top: 0px;
      right: 0;
      background: #ff6b5b;
      color: #fff;
      font-size: 0.52rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      padding: 5px 14px 4px 14px;
      border-radius: 7px;
      z-index: 2;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.10);
      pointer-events: none;
      border: none;
    }

    #section-cars .d-img {
      position: relative;
      margin-bottom: 1rem;
      border-radius: 8px;
      overflow: hidden;
      background: #f8f9fa;
      /* min-height: 160px; */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #section-cars .d-img img {
      width: 100%;
      height: 100%;
      /* Fill the container */
      object-fit: contain;
      /* Changed from 'contain' to 'cover' */
      max-width: 100%;
      max-height: 200px;
      /* Match container height */

    }

    #section-cars .d-info {
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    #section-cars .d-text {
      display: flex;
      flex-direction: column;
      height: 100%;
      min-height: 200px;
    }

    #section-cars .d-text .btn-main {
      margin-top: auto;
      align-self: flex-start;
    }

    #section-cars .d-text .btn-unavailable {
      margin-top: auto;
      align-self: flex-start;
    }

    #section-cars .d-item_like {
      margin-bottom: 0.5rem;
    }

    #section-cars .d-atr-group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem 1rem;
      margin-bottom: 0.7rem;
      font-size: 0.98rem;
    }

    #section-cars .d-atr img {
      width: 18px;
      height: 18px;
      margin-right: 4px;
      vertical-align: middle;
    }

    #section-cars .d-price {
      font-weight: 600;
      margin-bottom: 0.7rem;
      color: #031B4E;
    }

    #section-cars .btn-main {
      margin-top: 0.5rem;
      width: 100%;
      text-align: center;
    }

    @media (max-width: 991px) {
      #section-cars .fleet-car-grid.car-list-row {
        flex-direction: row;
      }
    }

    @media (max-width: 600px) {

      #section-cars .fleet-car-grid .col-xl-4,
      #section-cars .fleet-car-grid .col-lg-4 {
        min-width: 100%;
        max-width: 100%;
        padding-left: 0;
        padding-right: 0;
      }

      #section-cars .de-item.mb30 {
        padding: 1rem 0.5rem 1.2rem 0.5rem;
      }
    }

    /* Premium car highlighting for homepage */
    .de-item.premium {
      border: 3px solid #ffd700;
      box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);
      transform: scale(1.02);
      transition: all 0.3s ease;
    }

    .de-item.premium:hover {
      transform: scale(1.05);
      box-shadow: 0 12px 35px rgba(255, 215, 0, 0.4);
    }

    .premium-badge {
      position: absolute;
      top: 0px;
      left: 0px;
      background: linear-gradient(135deg, #ffd700, #ffed4e);
      color: #333;
      font-size: 0.6rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      padding: 6px 12px 5px 12px;
      border-radius: 0 0 7px 0;
      z-index: 3;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      border: none;
      max-width: 120px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Call Now Button styles are now in global CSS */

    /* Contact Pop-up Module Styles */
    .contact-popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      backdrop-filter: blur(5px);
    }

    .contact-popup {
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      border-radius: 20px;
      padding: 0;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      position: relative;
      animation: popupSlideIn 0.3s ease-out;
    }

    @keyframes popupSlideIn {
      from {
        opacity: 0;
        transform: translateY(-50px) scale(0.9);
      }

      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .contact-popup-header {
      background: linear-gradient(135deg, #2c3e50, #34495e);
      padding: 20px 25px 20px 25px;
      text-align: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
    }

    .contact-popup-header h3 {
      color: #ffffff;
      margin: 0 0 5px 0;
      font-size: 18px;
      font-weight: 600;
    }

    .contact-popup-header p {
      color: #bdc3c7;
      margin: 0;
      font-size: 14px;
    }

    .contact-popup-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.15);
      border: none;
      color: #ffffff;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      z-index: 10;
    }

    .contact-popup-close:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: scale(1.1);
    }

    .contact-popup-close i {
      font-size: 16px;
    }

    .contact-popup-body {
      padding: 20px;
    }

    .contact-option {
      display: flex;
      align-items: center;
      padding: 15px 20px;
      margin-bottom: 10px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .contact-option:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: translateX(5px);
      border-color: rgba(255, 255, 255, 0.2);
    }

    .contact-option:last-child {
      margin-bottom: 0;
    }

    .contact-option-icon {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 1.5vw;
      font-size: 18px;
      color: #ffffff;
      background: linear-gradient(135deg, #3498db, #2980b9);
    }

    .contact-option:nth-child(1) .contact-option-icon {
      background: linear-gradient(135deg, #25d366, #128c7e);
    }

    .contact-option:nth-child(2) .contact-option-icon {
      background: linear-gradient(135deg, #7360f2, #5b4bc4);
    }

    .contact-option:nth-child(3) .contact-option-icon {
      background: linear-gradient(135deg, #0088cc, #006699);
    }

    .contact-option:nth-child(4) .contact-option-icon {
      background: linear-gradient(135deg, #e74c3c, #c0392b);
    }

    .contact-option-content {
      flex: 1;
    }

    .contact-option-title {
      color: #ffffff;
      font-weight: 600;
      font-size: 16px;
      margin-bottom: 2px;
    }

    .contact-option-subtitle {
      color: #bdc3c7;
      font-size: 13px;
    }

    /* Floating Contact Button */
    .floating-contact-btn {
      position: fixed;
      bottom: 80px;
      right: 30px;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #1E90FF, #187bcd);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(30, 144, 255, 0.4);
      z-index: 1000;
      transition: all 0.3s ease;
      animation: bounce 2s infinite;
    }

    .floating-contact-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 25px rgba(30, 144, 255, 0.6);
    }

    .floating-contact-btn i {
      color: #ffffff;
      font-size: 24px;
    }

    @keyframes bounce {

      0%,
      20%,
      50%,
      80%,
      100% {
        transform: translateY(0);
      }

      40% {
        transform: translateY(-10px);
      }

      60% {
        transform: translateY(-5px);
      }
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      .contact-popup {
        width: 85%;
        max-width: 350px;
        max-height: 75vh;
        margin-right: 10px;
      }

      .contact-popup-header {
        padding: 15px 20px;
      }

      .contact-popup-header h3 {
        font-size: 16px;
        padding-right: 40px;
      }

      .contact-popup-header p {
        font-size: 13px;
        padding-right: 40px;
      }

      .contact-popup-close {
        top: 15px;
        right: 15px;
        width: 30px;
        height: 30px;
      }

      .contact-popup-close i {
        font-size: 14px;
      }

      .floating-contact-btn {
        bottom: 70px;
        right: 20px;
        width: 55px;
        height: 55px;
        font-size: 20px;
      }

      .contact-option {
        padding: 12px 15px;
      }

      .contact-option-icon {
        width: 40px;
        height: 40px;
      }

      .contact-option-icon i {
        font-size: 16px;
      }

      .contact-option-title {
        font-size: 14px;
      }

      .contact-option-subtitle {
        font-size: 12px;
      }
    }

    /*modal date picker*/
    .modal-return-date-picker {
      right: 0 !important;
    }

    .flatpickr-calendar.animate.static.arrowBottom.arrowLeft.open:after {
      display: none !important;
    }

    .flatpickr-calendar.animate.static.arrowBottom.arrowLeft.open:before {
      display: none !important;
    }
  </style>
  <!-- MODERN PRICE CALCULATOR MODAL WITH GLASSMORPHISM -->
  <style>
    /* ========== PRICE CALCULATOR MODAL - WORLD-CLASS DESIGN ========== */
    
    /* Modal Overlay with Blur Effect */
    .price-calculator-modal {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(15, 23, 42, 0.85);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    /* Modern Calculator Content Container */
    .price-calculator-content {
      background: linear-gradient(145deg, 
        rgba(255, 255, 255, 0.95) 0%, 
        rgba(248, 250, 252, 0.98) 100%);
      margin: 3% auto;
      padding: 0;
      border-radius: 24px;
      width: 90%;
      max-width: 680px;
      box-shadow: 
        0 25px 50px -12px rgba(0, 0, 0, 0.25),
        0 0 0 1px rgba(255, 255, 255, 0.1),
        inset 0 1px 0 0 rgba(255, 255, 255, 0.8);
      animation: slideUpFadeIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      max-height: 90vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    @keyframes slideUpFadeIn {
      from {
        opacity: 0;
        transform: translateY(40px) scale(0.96);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    /* Glassmorphism Header */
    .modal-header {
      background: linear-gradient(135deg, 
        #667eea 0%, 
        #764ba2 100%);
      color: #fff;
      padding: 28px 32px;
      position: relative;
      border-radius: 24px 24px 0 0;
      box-shadow: 
        0 4px 20px rgba(102, 126, 234, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }

    .modal-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(180deg, 
        rgba(255, 255, 255, 0.1) 0%, 
        transparent 100%);
      border-radius: 24px 24px 0 0;
      pointer-events: none;
    }

    .modal-header h4 {
      margin: 0;
      font-weight: 700;
      font-size: 24px;
      letter-spacing: -0.5px;
      display: flex;
      align-items: center;
      gap: 12px;
      position: relative;
      z-index: 1;
    }

    .modal-header h4 i {
      font-size: 28px;
      opacity: 0.95;
    }

    /* Modern Close Button */
    .close-modal {
      position: absolute;
      right: 24px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: #fff;
      width: 40px;
      height: 40px;
      border-radius: 12px;
      font-size: 20px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2;
    }

    .close-modal:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-50%) rotate(90deg);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .close-modal:active {
      transform: translateY(-50%) scale(0.95);
    }

    /* Scrollable Modal Body */
    .modal-body {
      padding: 32px;
      overflow-y: auto;
      overflow-x: hidden;
      max-height: calc(90vh - 200px);
      scrollbar-width: thin;
      scrollbar-color: rgba(102, 126, 234, 0.3) transparent;
    }

    .modal-body::-webkit-scrollbar {
      width: 6px;
    }

    .modal-body::-webkit-scrollbar-track {
      background: transparent;
    }

    .modal-body::-webkit-scrollbar-thumb {
      background: rgba(102, 126, 234, 0.3);
      border-radius: 3px;
    }

    .modal-body::-webkit-scrollbar-thumb:hover {
      background: rgba(102, 126, 234, 0.5);
    }

    /* Modern Info Card */
    .tariff-info {
      background: linear-gradient(135deg, 
        rgba(102, 126, 234, 0.08) 0%, 
        rgba(118, 75, 162, 0.08) 100%);
      border: 1px solid rgba(102, 126, 234, 0.2);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 24px;
      position: relative;
      overflow: hidden;
    }

    .tariff-info::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 4px;
      background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
      border-radius: 16px 0 0 16px;
    }

    .tariff-info h6 {
      color: #1e293b;
      font-weight: 700;
      margin-bottom: 16px;
      font-size: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .tariff-info h6 i {
      color: #667eea;
      font-size: 18px;
    }

    .tariff-details {
      font-size: 14px;
      color: #475569;
      line-height: 1.8;
    }

    .tariff-details > div {
      padding: 8px 0;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }

    .tariff-details > div:last-child {
      border-bottom: none;
    }

    .working-hours {
      color: #10b981;
      font-weight: 600;
    }

    .outside-hours {
      color: #f59e0b;
      font-weight: 600;
    }

    .location-fees {
      color: #3b82f6;
      font-weight: 600;
    }

    /* Calculator Section */
    .calculator-section {
      margin-bottom: 28px;
    }

    .calculator-section h5 {
      color: #1e293b;
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 10px;
      letter-spacing: -0.3px;
    }

    .calculator-section h5 i {
      color: #667eea;
      font-size: 20px;
    }

    /* Modern Form Controls */
    .form-control-sm {
      padding: 12px 16px;
      font-size: 14px;
      border-radius: 12px;
      border: 2px solid #e2e8f0;
      transition: all 0.3s ease;
      background: #fff;
      font-weight: 500;
    }

    .form-control-sm:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
      outline: none;
      background: #fff;
    }

    .form-control-sm:hover {
      border-color: #cbd5e1;
    }

    .form-label.small {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 8px;
      color: #475569;
      display: block;
      letter-spacing: 0.3px;
    }

    /* Modern Vehicle Card */
    .vehicle-card {
      background: linear-gradient(135deg, 
        rgba(240, 192, 64, 0.05) 0%, 
        rgba(255, 255, 255, 0.8) 100%);
      border: 2px solid rgba(240, 192, 64, 0.2);
      border-radius: 16px;
      padding: 16px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .vehicle-card:hover {
      border-color: rgba(240, 192, 64, 0.4);
      box-shadow: 0 8px 24px rgba(240, 192, 64, 0.15);
      transform: translateY(-2px);
    }

    .vehicle-card img {
      border-radius: 10px;
      transition: transform 0.3s ease;
    }

    .vehicle-card:hover img {
      transform: scale(1.05);
    }

    .vehicle-card h6 {
      color: #1e293b;
      font-weight: 700;
      font-size: 16px;
      margin-bottom: 4px;
    }

    .vehicle-card p {
      color: #64748b;
      font-size: 13px;
      margin-bottom: 8px;
    }

    .vehicle-price {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .vehicle-price .text-primary {
      color: #667eea !important;
      font-weight: 700;
      font-size: 18px;
    }

    /* Location Card */
    .location-card {
      background: linear-gradient(135deg, 
        rgba(59, 130, 246, 0.05) 0%, 
        rgba(147, 197, 253, 0.05) 100%);
      border: 1px solid rgba(59, 130, 246, 0.2);
      border-radius: 12px;
      padding: 16px;
    }

    .location-card .fw-bold {
      color: #1e293b;
      font-size: 14px;
      font-weight: 600;
    }

    .location-card small {
      color: #64748b;
      font-size: 12px;
    }

    /* Premium Price Summary */
    .modal-price-summary {
      background: linear-gradient(145deg, 
        rgba(16, 185, 129, 0.05) 0%, 
        rgba(167, 243, 208, 0.08) 100%);
      border: 2px solid rgba(16, 185, 129, 0.2);
      border-radius: 20px;
      padding: 24px;
      margin-top: 28px;
      position: relative;
      overflow: hidden;
    }

    .modal-price-summary::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 200px;
      height: 200px;
      background: radial-gradient(circle, 
        rgba(16, 185, 129, 0.1) 0%, 
        transparent 70%);
      border-radius: 50%;
      transform: translate(50%, -50%);
    }

    .modal-price-summary h5 {
      color: #1e293b;
      font-weight: 700;
      margin-bottom: 20px;
      text-align: center;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      position: relative;
      z-index: 1;
    }

    .modal-price-summary h5 i {
      color: #10b981;
      font-size: 20px;
    }

    .modal-price-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      font-size: 15px;
      color: #475569;
      border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      position: relative;
      z-index: 1;
    }

    .modal-price-item:last-child {
      border-bottom: none;
    }

    .modal-price-item span:first-child {
      font-weight: 500;
    }

    .modal-price-item span:last-child {
      font-weight: 600;
      color: #1e293b;
    }

    .modal-price-item.total {
      color: #1e293b;
      font-weight: 700;
      font-size: 20px;
      margin-top: 8px;
      padding-top: 16px;
      border-top: 2px solid rgba(16, 185, 129, 0.3);
      border-bottom: none;
    }

    .modal-price-item.total .text-primary {
      color: #10b981 !important;
      font-size: 24px;
      letter-spacing: -0.5px;
    }

    /* Modern Action Buttons */
    .modal-actions {
      text-align: center;
      margin-top: 28px;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .btn-calculate {
      flex: 1;
      min-width: 180px;
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: #fff;
      border: none;
      padding: 16px 32px;
      border-radius: 14px;
      font-weight: 700;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 14px rgba(16, 185, 129, 0.3);
      letter-spacing: 0.3px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-calculate:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
      background: linear-gradient(135deg, #059669 0%, #047857 100%);
    }

    .btn-calculate:active {
      transform: translateY(0);
    }

    .btn-close-calc {
      flex: 1;
      min-width: 140px;
      background: linear-gradient(135deg, #64748b 0%, #475569 100%);
      color: #fff;
      border: none;
      padding: 16px 28px;
      border-radius: 14px;
      font-weight: 600;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 14px rgba(100, 116, 139, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-close-calc:hover {
      background: linear-gradient(135deg, #475569 0%, #334155 100%);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(100, 116, 139, 0.3);
    }

    .btn-close-calc:active {
      transform: translateY(0);
    }

    /* Mobile Responsive Design */
    @media (max-width: 768px) {
      .price-calculator-content {
        margin: 2% auto;
        width: 96%;
        max-width: none;
        max-height: 95vh;
        border-radius: 20px;
      }

      .modal-header {
        padding: 20px 24px;
        border-radius: 20px 20px 0 0;
      }

      .modal-header h4 {
        font-size: 20px;
        padding-right: 40px;
      }

      .close-modal {
        right: 20px;
        width: 36px;
        height: 36px;
        font-size: 18px;
      }

      .modal-body {
        padding: 24px 20px;
        max-height: calc(95vh - 180px);
      }

      .calculator-section {
        margin-bottom: 20px;
      }

      .calculator-section h5 {
        font-size: 16px;
        margin-bottom: 12px;
      }

      .tariff-info {
        padding: 16px;
        margin-bottom: 20px;
      }

      .tariff-info h6 {
        font-size: 14px;
        margin-bottom: 12px;
      }

      .tariff-details {
        font-size: 13px;
      }

      .modal-price-summary {
        padding: 20px;
        margin-top: 20px;
        border-radius: 16px;
      }

      .modal-price-summary h5 {
        font-size: 16px;
        margin-bottom: 16px;
      }

      .modal-price-item {
        font-size: 14px;
        padding: 10px 0;
      }

      .modal-price-item.total {
        font-size: 18px;
        padding-top: 14px;
      }

      .modal-price-item.total .text-primary {
        font-size: 20px;
      }

      .modal-actions {
        margin-top: 20px;
        flex-direction: column;
        gap: 10px;
      }

      .btn-calculate,
      .btn-close-calc {
        width: 100%;
        min-width: 100%;
        padding: 14px 24px;
        font-size: 14px;
      }
    }

    @media (max-width: 480px) {
      .price-calculator-content {
        width: 98%;
        max-height: 96vh;
        border-radius: 16px;
      }

      .modal-header {
        padding: 18px 20px;
        border-radius: 16px 16px 0 0;
      }

      .modal-header h4 {
        font-size: 18px;
      }

      .modal-header h4 i {
        font-size: 22px;
      }

      .close-modal {
        right: 16px;
        width: 32px;
        height: 32px;
        font-size: 16px;
      }

      .modal-body {
        padding: 20px 16px;
      }

      .calculator-section h5 {
        font-size: 15px;
      }

      .calculator-section h5 i {
        font-size: 18px;
      }

      .tariff-info {
        padding: 14px;
      }

      .form-control-sm {
        padding: 10px 14px;
        font-size: 13px;
      }

      .vehicle-card {
        padding: 12px;
      }

      .modal-price-summary {
        padding: 16px;
      }
    }

    /* Landscape Mode Adjustments */
    @media (max-width: 768px) and (orientation: landscape) {
      .price-calculator-content {
        max-height: 98vh;
        margin: 1% auto;
      }

      .modal-body {
        max-height: calc(98vh - 160px);
      }

      .calculator-section {
        margin-bottom: 16px;
      }

      .tariff-info {
        padding: 12px;
        margin-bottom: 16px;
      }

      .modal-price-summary {
        padding: 16px;
        margin-top: 16px;
      }

      .modal-actions {
        margin-top: 16px;
      }
    }

    /* High Contrast Mode Support */
    @media (prefers-contrast: high) {
      .price-calculator-content {
        border: 3px solid #1e293b;
      }

      .modal-header {
        border-bottom: 2px solid rgba(255, 255, 255, 0.3);
      }

      .form-control-sm:focus {
        border-width: 3px;
      }
    }

    /* Reduced Motion Support */
    @media (prefers-reduced-motion: reduce) {
      .price-calculator-modal,
      .price-calculator-content,
      .btn-calculate,
      .btn-close-calc,
      .vehicle-card {
        animation: none;
        transition: none;
      }

      .close-modal:hover {
        transform: translateY(-50%);
      }
    }
  </style>

  <!-- MODERN FLATPICKR CALENDAR STYLES -->
  <style>
    /* ========== FLATPICKR CALENDAR - MODERN WORLD-CLASS DESIGN ========== */

    /* Base Calendar Container */
    .flatpickr-calendar {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 20px;
      box-shadow: 
        0 25px 50px -12px rgba(0, 0, 0, 0.25),
        0 0 0 1px rgba(0, 0, 0, 0.05),
        inset 0 1px 0 0 rgba(255, 255, 255, 0.9);
      border: none;
      overflow: visible !important;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      font-size: 14px;
      max-height: 420px !important;
      transform: translate3d(0, 0, 0);
      will-change: transform;
      animation: calendarFadeIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    }

    @keyframes calendarFadeIn {
      from {
        opacity: 0;
        transform: translateY(-10px) scale(0.98);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    /* Touch and Interaction Protection */
    .flatpickr-calendar,
    .flatpickr-calendar * {
      touch-action: manipulation !important;
      -webkit-tap-highlight-color: transparent !important;
      -webkit-touch-callout: none !important;
      -webkit-user-select: none !important;
      -moz-user-select: none !important;
      user-select: none !important;
    }

    /* Modern Header with Gradient */
    .flatpickr-months {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px 60px !important;
      border-radius: 20px 20px 0 0;
      position: relative !important;
      min-height: 60px !important;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 5 !important;
      box-shadow: 
        0 4px 20px rgba(102, 126, 234, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }

    .flatpickr-months::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(180deg, 
        rgba(255, 255, 255, 0.15) 0%, 
        transparent 100%);
      border-radius: 20px 20px 0 0;
      pointer-events: none;
    }

    /* Current Month Display */
    .flatpickr-current-month {
      color: white;
      font-weight: 700;
      font-size: 17px;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
      padding: 0;
      letter-spacing: 0.3px;
      position: relative;
      z-index: 1;
    }

    /* Month Dropdown */
    .flatpickr-current-month .flatpickr-monthDropdown-months {
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(10px);
      color: white;
      font-weight: 700;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 12px;
      padding: 6px 12px;
      font-size: 16px !important;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      appearance: none;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    .flatpickr-current-month .flatpickr-monthDropdown-months:hover {
      background: rgba(255, 255, 255, 0.35);
      border-color: rgba(255, 255, 255, 0.5);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .flatpickr-current-month .flatpickr-monthDropdown-months:focus {
      outline: none;
      box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.2);
    }

    .flatpickr-current-month .flatpickr-monthDropdown-months option {
      background: #ffffff;
      color: #1e293b;
      font-weight: 600;
      padding: 10px 14px;
      font-size: 16px !important;
    }

    /* Year Input Wrapper */
    .flatpickr-current-month .numInputWrapper {
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 12px;
      padding: 5px 8px;
      margin-left: 10px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .flatpickr-current-month .numInputWrapper:hover {
      background: rgba(255, 255, 255, 0.35);
      border-color: rgba(255, 255, 255, 0.5);
      transform: translateY(-1px);
    }

    .flatpickr-current-month .numInputWrapper:focus-within {
      box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.2);
    }

    .flatpickr-current-month .numInputWrapper input {
      color: white;
      font-weight: 700;
      font-size: 16px !important;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
      width: 54px;
    }

    .flatpickr-current-month .numInputWrapper span {
      border-color: rgba(255, 255, 255, 0.4);
      transition: all 0.2s ease;
    }

    .flatpickr-current-month .numInputWrapper span:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .flatpickr-current-month .numInputWrapper span.arrowUp:after {
      border-bottom-color: white;
    }

    .flatpickr-current-month .numInputWrapper span.arrowDown:after {
      border-top-color: white;
    }

    /* Modern Navigation Arrows */
    .flatpickr-prev-month,
    .flatpickr-next-month {
      fill: white;
      position: absolute !important;
      top: 50% !important;
      transform: translateY(-50%) !important;
      z-index: 10 !important;
      width: 44px !important;
      height: 44px !important;
      padding: 0 !important;
      background: rgba(255, 255, 255, 0.2) !important;
      backdrop-filter: blur(10px) !important;
      border-radius: 12px !important;
      opacity: 1 !important;
      visibility: visible !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .flatpickr-prev-month {
      left: 8px !important;
    }

    .flatpickr-next-month {
      right: 8px !important;
    }

    .flatpickr-prev-month::after,
    .flatpickr-next-month::after {
      font-size: 24px !important;
      color: white !important;
      font-weight: 700 !important;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
    }

    .flatpickr-prev-month::after {
      content: '‹' !important;
    }

    .flatpickr-next-month::after {
      content: '›' !important;
    }

    .flatpickr-prev-month svg,
    .flatpickr-next-month svg {
      display: none !important;
    }

    .flatpickr-prev-month:hover,
    .flatpickr-next-month:hover {
      background: rgba(255, 255, 255, 0.3) !important;
      transform: translateY(-50%) scale(1.05) !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .flatpickr-prev-month:active,
    .flatpickr-next-month:active {
      transform: translateY(-50%) scale(0.95) !important;
    }

    /* Weekdays Header */
    .flatpickr-weekdays {
      background: linear-gradient(180deg, #f8fafc 0%, #ffffff 100%);
      padding: 16px 10px 12px;
      border-bottom: 2px solid #f1f5f9;
    }

    .flatpickr-weekday {
      color: #667eea;
      font-weight: 700;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Days Container */
    .flatpickr-days {
      padding: 12px;
      background: #ffffff;
    }

    .dayContainer {
      min-width: 100%;
      max-width: 100%;
    }

    /* Individual Day Cells - Desktop */
    .flatpickr-day {
      border-radius: 12px;
      margin: 3px;
      font-weight: 600;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      width: 40px;
      height: 40px;
      line-height: 40px;
      font-size: 14px;
      color: #334155;
      border: 2px solid transparent;
    }

    .flatpickr-day:hover:not(.flatpickr-disabled):not(.occupied) {
      background: linear-gradient(135deg, #e0e7ff, #ddd6fe);
      border-color: #667eea;
      transform: scale(1.08);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.25);
      color: #1e293b;
    }

    /* Selected Day */
    .flatpickr-day.selected,
    .flatpickr-day.startRange,
    .flatpickr-day.endRange {
      background: linear-gradient(135deg, #667eea, #764ba2) !important;
      border-color: transparent !important;
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
      font-weight: 700;
      color: white !important;
      transform: scale(1.05);
    }

    /* Today */
    .flatpickr-day.today {
      border-color: #667eea;
      font-weight: 700;
      background: linear-gradient(135deg, #e0e7ff, #f5f3ff);
      color: #667eea;
    }

    .flatpickr-day.today:not(.selected):hover {
      background: linear-gradient(135deg, #ddd6fe, #e0e7ff);
    }

    /* Occupied Days */
    .flatpickr-day.occupied {
      background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
      border: 2px solid #ef4444 !important;
      color: #991b1b !important;
      cursor: not-allowed;
      font-weight: 600;
      position: relative;
    }

    .flatpickr-day.occupied::before {
      content: '🚗';
      position: absolute;
      top: 2px;
      right: 2px;
      font-size: 10px;
    }

    .flatpickr-day.occupied:hover {
      background: linear-gradient(135deg, #fecaca 0%, #fca5a5 100%) !important;
      transform: none;
    }

    /* Disabled Days */
    .flatpickr-day.flatpickr-disabled,
    .flatpickr-day.prevMonthDay,
    .flatpickr-day.nextMonthDay {
      color: #cbd5e1 !important;
      background: #f8fafc;
      cursor: not-allowed;
    }

    /* Mobile Optimizations */
    @media (pointer: coarse), (max-width: 767px) {
      .flatpickr-calendar {
        border-radius: 16px;
        max-width: 100vw;
      }

      .flatpickr-months {
        padding: 16px 50px !important;
        border-radius: 16px 16px 0 0;
      }

      .flatpickr-prev-month,
      .flatpickr-next-month {
        width: 40px !important;
        height: 40px !important;
        border-radius: 10px !important;
      }

      .flatpickr-prev-month {
        left: 6px !important;
      }

      .flatpickr-next-month {
        right: 6px !important;
      }

      .flatpickr-day {
        width: 44px !important;
        height: 44px !important;
        line-height: 44px !important;
        margin: 2px !important;
        border-radius: 10px;
      }
    }

    /* Android Specific Fixes */
    @media (pointer: coarse) and (hover: none) {
      .flatpickr-day.prevMonthDay,
      .flatpickr-day.nextMonthDay {
        display: none !important;
      }

      .dayContainer {
        display: grid !important;
        grid-template-columns: repeat(7, 1fr) !important;
        gap: 4px !important;
        padding: 8px !important;
      }

      .flatpickr-day {
        width: 100% !important;
        max-width: 44px !important;
        height: 44px !important;
        line-height: 44px !important;
        margin: 0 !important;
      }
    }

    /* iOS Specific Fixes */
    @supports (-webkit-touch-callout: none) {
      .flatpickr-day.prevMonthDay,
      .flatpickr-day.nextMonthDay {
        display: none !important;
      }

      .flatpickr-calendar input,
      .flatpickr-calendar select {
        font-size: 16px !important;
      }
    }

    /* Small Screens */
    @media (max-width: 480px) {
      .flatpickr-calendar {
        font-size: 13px;
        max-width: calc(100vw - 20px);
        border-radius: 14px;
      }

      .flatpickr-months {
        padding: 14px 46px !important;
        min-height: 50px !important;
        border-radius: 14px 14px 0 0;
      }

      .flatpickr-current-month {
        font-size: 15px;
      }

      .flatpickr-prev-month,
      .flatpickr-next-month {
        width: 36px !important;
        height: 36px !important;
      }

      .flatpickr-day {
        font-size: 13px;
        width: 40px !important;
        height: 40px !important;
        line-height: 40px !important;
      }
    }
  </style>
</head>

<body>
  <!-- Global API Configuration Check -->
  <script>
    // Ensure API_BASE_URL is always available globally
    if (typeof window.API_BASE_URL === 'undefined' || window.API_BASE_URL === null) {
      window.API_BASE_URL = '';
    }
  </script>

  <div id="wrapper">

    <!-- page preloader begin -->
    <div id="de-preloader"></div>
    <!-- page preloader close -->

    <!-- header begin -->
    <header class="transparent scroll-light has-topbar">
      <div id="topbar" class="topbar-dark text-light">
        <div class="container">
          <div class="topbar-left xs-hide">
            <div class="topbar-widget">
              <div class="topbar-widget"><a href="tel:+37360000500"><i class="fa fa-phone"></i>+373 60 000 500</a></div>
              <div class="topbar-widget"><a href="mailto:contact@plusrent.md"><i class="fa fa-envelope"></i>contact@plusrent.md</a></div>
              <div class="topbar-widget"><i class="fa fa-clock-o"></i>24/7</div>
            </div>
          </div>

          <div class="topbar-right">
            <div class="social-icons">
              <a href="https://www.instagram.com/plusrent.md/" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram fa-lg"></i></a>
              <a href="https://tiktok.me/plusrent" target="_blank" rel="noopener noreferrer"><i class="fab fa-tiktok fa-lg"></i></a>
            </div>
          </div>
          <div class="clearfix"></div>
        </div>
      </div>
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="de-flex sm-pt10">
              <div class="de-flex-col">
                <div class="de-flex-col">
                  <!-- logo begin -->
                  <div id="logo">
                    <a href="/">
                      <img class="logo-1" src="images/LOGO-4-demo.png" alt="">
                      <img class="logo-2" src="images/LOGO-5-demo.png" alt="">
                    </a>
                  </div>
                  <!-- logo close -->
                </div>
              </div>

              <div class="de-flex-col">
                <!-- Main Menu - Now inside the flexbox for proper desktop alignment -->
                <ul id="mainmenu">
                  <li><a class="menu-item" href="/" data-i18n="menu.home"></a></li>
                  <li><a class="menu-item" href="/cars" data-i18n="menu.cars"></a></li>
                  <li><a class="menu-item" href="/about" data-i18n="menu.about"></a></li>
                  <li><a class="menu-item" href="/contact" data-i18n="menu.contact"></a></li>
                  <li><a class="menu-item" href="/sofer-treaz" data-i18n="menu.sober_driver"></a></li>
                </ul>
              </div>

              <div class="de-flex-col">
                <div class="menu_side_area"
                  style="display: flex; align-items: center; justify-content: flex-end; gap: 12px; ">
                  <!-- Call Now Button -->
                  <div class="call-now-wrapper" style="align-self:center; margin-right: 2vw;">
                    <a href="tel:+37360000500" class="call-now-btn"
                      style="display: flex; align-items: center; gap: 8px; background: linear-gradient(135deg, #1E90FF, #187bcd); color: white; padding: 10px 16px; border-radius: 25px; text-decoration: none; font-weight: 600; font-size: 14px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(30, 144, 255, 0.3); position: relative; overflow: hidden;">
                      <i class="fa fa-phone" style="font-size: 12px;"></i>
                      <span data-i18n="call_now">Call Now</span>
                    </a>
                  </div>
                  <!-- Language Picker -->
                  <div class="lang-picker-wrapper" style="min-width:120px;align-self:center;">
                    <button id="langPickerBtn" class="lang-picker-btn" aria-haspopup="listbox" aria-expanded="false"
                      style="height:36px;display:flex;align-items:center;">
                      <span class="lang-globe" id="langGlobe"
                        style="display:inline-flex;align-items:center;justify-content:center;width:20px;height:20px;margin-right:3px;">
                        <svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <circle cx="10" cy="10" r="9" stroke="#1ccfc9" stroke-width="2" />
                          <ellipse cx="10" cy="10" rx="5" ry="9" stroke="#1ccfc9" stroke-width="2" />
                          <path d="M1 10h18" stroke="#1ccfc9" stroke-width="2" />
                          <path d="M3 4.5h14" stroke="#1ccfc9" stroke-width="1.2" />
                          <path d="M3 15.5h14" stroke="#1ccfc9" stroke-width="1.2" />
                        </svg>
                      </span>
                      <span class="lang-flag" id="langFlag"></span>
                      <span id="langCode" style="font-weight:600;margin:0 2px 0 2px;">RO</span>
                      <svg width="14" height="14" viewBox="0 0 20 20" style="margin-left:6px;">
                        <path d="M5.5 8l4.5 4.5L14.5 8" stroke="#888" stroke-width="2" fill="none"
                          stroke-linecap="round" />
                      </svg>
                    </button>
                    <ul id="langDropdown" class="lang-picker-dropdown" tabindex="-1">
                      <li class="lang-option" data-lang="ro" tabindex="0"><span class="lang-flag"><img
                            src="images/flags/romania.png" alt="RO"
                            style="width: 20px; height: 15px; border-radius: 2px; object-fit: cover;"></span> <span
                          class="lang-code">RO</span></li>
                      <li class="lang-option" data-lang="en" tabindex="0"><span class="lang-flag"><img
                            src="images/flags/united-kingdom.png" alt="EN"
                            style="width: 20px; height: 15px; border-radius: 2px; object-fit: cover;"></span> <span
                          class="lang-code">EN</span></li>
                      <li class="lang-option" data-lang="ru" tabindex="0"><span class="lang-flag"><img
                            src="images/flags/russia.png" alt="RU"
                            style="width: 20px; height: 15px; border-radius: 2px; object-fit: cover;"></span> <span
                          class="lang-code">RU</span></li>
                    </ul>
                  </div>
                </div>
              </div>

              <div id="menu-btn">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header><!-- header close -->
<!-- content begin -->
    <div class="no-bottom no-top" id="content">
      <div id="top"></div>
      <section id="section-hero" aria-label="section" class="jarallax">
        <img src="images/background/3-copy.jpg" class="jarallax-img" alt="">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-lg-12 text-light">
              <div class="spacer-double mobile-hidden"></div>
              <div class="spacer-double mobile-hidden"></div>
              <h1 class="mb-2" data-i18n="hero.title"></h1>
              <div class="spacer-single"></div>
            </div>

            <div class="col-lg-12">
              <div class="spacer-single sm-hide"></div>
              <div class="padding40 rounded-5 shadow-soft" data-bgcolor="#ffffff">

                <form name="contactForm" id='booking_form' class="form-s2 row g-4 on-submit-hide" method="post">

                  <div class="col-lg-6 d-light car-picker-window">
                    <h4 data-i18n="booking.booking_title"></h4>

                    <!-- Vehicle Selection with Enhanced UI -->
                    <div class="vehicle-selection-wrapper mb-4">
                      <select name='vehicle_type' id="vehicle_type" class="form-control vehicle-select">
                        <option value="" disabled selected data-i18n="booking.loading_cars"></option>
                      </select>
                      <div id="selected-vehicle-info" class="selected-vehicle-info mt-3" style="display: none;">
                        <div class="vehicle-card p-3 bg-light rounded">
                          <div class="row align-items-center">
                            <div class="col-3">
                              <img id="vehicle-image" src="" alt="Vehicle" class="img-fluid rounded">
                            </div>
                            <div class="col-9">
                              <h6 id="vehicle-name" class="mb-1"></h6>
                              <p id="vehicle-details" class="text-muted small mb-1"></p>
                              <div class="vehicle-price">
                                <span class="text-primary fw-bold" id="vehicle-price"></span>
                                <small class="text-muted">/day</small>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="row g-4">
                      <div class="col-lg-6">
                        <h5 data-i18n="booking.pickup_location"></h5>
                        <div class="radio-group">
                          <!-- Pickup Location -->
                          <label class="radio-option">
                            <input type="radio" name="pickup_location" value="Chisinau Airport" id="pickup_chisinau">
                            <span class="radio-custom"></span>
                            <span data-i18n="cars.chisinau_airport">Chisinau Airport</span>
                          </label>
                          <label class="radio-option">
                            <input type="radio" name="pickup_location" value="Our Office" id="pickup_office">
                            <span class="radio-custom"></span>
                            <span data-i18n="cars.our_office">Our Office</span>
                          </label>
                          <label class="radio-option">
                            <input type="radio" name="pickup_location" value="Iasi Airport" id="pickup_iasi" checked>
                            <span class="radio-custom"></span>
                            <span data-i18n="cars.iasi_airport">Iasi Airport</span>
                          </label>
                        </div>
                      </div>

                      <div class="col-lg-6">
                        <h5 data-i18n="booking.destination"></h5>
                        <div class="radio-group">
                          <!-- Dropoff Location -->
                          <label class="radio-option">
                            <input type="radio" name="destination" value="Chisinau Airport" id="dropoff_chisinau">
                            <span class="radio-custom"></span>
                            <span data-i18n="cars.chisinau_airport">Chisinau Airport</span>
                          </label>
                          <label class="radio-option">
                            <input type="radio" name="destination" value="Our Office" id="dropoff_office" checked>
                            <span class="radio-custom"></span>
                            <span data-i18n="cars.our_office">Our Office</span>
                          </label>
                          <label class="radio-option">
                            <input type="radio" name="destination" value="Iasi Airport" id="dropoff_iasi">
                            <span class="radio-custom"></span>
                            <span data-i18n="cars.iasi_airport">Iasi Airport</span>
                          </label>
                        </div>
                      </div>
                    </div>

                    <!-- Location Information -->
                    <div class="row mt-3">
                      <div class="col-12">
                        <div class="location-info">
                          <small class="text-muted">
                            <i class="fa fa-exclamation-circle me-1"></i>
                            <span data-i18n="booking.location_warning">Select your preferred pickup and return
                              locations. Airport delivery and outside working hours may incur additional fees.</span>
                          </small>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- customer details -->

                  <div class="col-lg-6 customer-details-window">
                    <h4 data-i18n="booking.enter_details_title"></h4>

                    <!-- Error message positioned right after title -->
                    <div id="error_message" class='error' data-i18n="booking.form_error"
                      style="display: none; margin-top: 15px; margin-bottom: 20px;">
                      Sorry there was an error sending your form.
                    </div>

                    <div class="row g-4">
                      <div class="col-lg-12">
                        <div class="field-set"> <input type="text" name="name" id="name" class="form-control" placeholder="Your Name" data-i18n-placeholder="booking.name_placeholder" autocomplete="name" > </div>
                      </div>
                      <div class="col-lg-12">
                        <div class="field-set"> <input type="email" name="email" id="email" class="form-control" placeholder="Your Email" data-i18n-placeholder="booking.email_placeholder" autocomplete="email" > </div>
                      </div>
                      <div class="col-lg-12">
                        <div class="field-set"> <input type="tel" name="phone" id="phone" class="form-control" placeholder="Your Phone" data-i18n-placeholder="booking.phone_placeholder" autocomplete="tel" required > </div>
                      </div>

                      <div class="col-lg-12">
                        <div class="field-set">
                          <textarea name="message" id="message" class="form-control"
                            data-i18n-placeholder="booking.message_placeholder"
                            placeholder="Do you have any request?"></textarea>
                        </div>
                      </div>

                      <!-- Hidden field for total price from calculator -->
                      <input type="hidden" name="total_price" id="total_price" value="0">

                      <div class="col-lg-12">
                        <div class="field-set">
                          <p id='submit'>
                            <button type='submit' id='send_message' class="btn-main btn-fullwidth"
                              data-i18n="booking.submit">Submit</button>
                          </p>
                        </div>
                      </div>
                    </div>

                  </div>

                  <div class="col-lg-3">
                    <!-- Compact Price Summary - Hidden by default, only shown in modal -->
                    <div id="price-summary" class="price-summary-compact" style="display: none;">
                      <h6>Price Summary</h6>
                      <div class="price-breakdown-compact">
                        <div class="price-item-compact">
                          <span>Daily Rate:</span>
                          <span id="daily-rate">€0</span>
                        </div>
                        <div class="price-item-compact">
                          <span>Duration:</span>
                          <span id="rental-duration">0 <span data-i18n="price_calculator.days">days</span></span>
                        </div>
                        <div class="price-item-compact">
                          <span>Insurance:</span>
                          <span id="insurance-cost">€0</span>
                        </div>
                        <div class="price-item-compact total">
                          <span>Total Estimate:</span>
                          <span id="total-estimate" class="text-primary">€0</span>
                        </div>
                      </div>
                    </div>
                    <div id='mail_success' class='success' data-i18n="booking.success_message">Your message has been
                      sent successfully.</div>
                    <div id='mail_fail' class='error' data-i18n="booking.error_message">Sorry, error occured this time
                      sending your message.</div>
                  </div>
                </form>

                <div id="success_message" class='success s2'>
                  <div class="row">
                    <div class="col-lg-8 offset-lg-2 text-center">
                      <div class="success-icon mb-3">
                        <i class="fa fa-check-circle" style="font-size: 4rem; color: #28a745;"></i>
                      </div>
                      <h3 class="mb-3" data-i18n="booking.congratulations">Congratulations! Your booking has been
                        submitted successfully.</h3>
                      <p class="mb-3" data-i18n="booking.confirmation_message">We have received your booking request and
                        will contact you within 24 hours to confirm your reservation.</p>
                      <div class="booking-details mb-4">
                        <h5 data-i18n="booking.booking_summary">Booking Summary</h5>
                        <div id="booking-summary" class="text-left">
                          <!-- Booking details will be populated here -->
                        </div>
                      </div>
                      <div class="spacer-20"></div>
                      <button class="btn-main" onclick="location.reload()" data-i18n="booking.book_another">Book Another
                        Vehicle</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="spacer-double"></div>

            <div class="row">
              <div class="col-lg-12 text-light">
                <div class="container-timeline">
                  <ul>
                    <li>
                      <h4 data-i18n="timeline.choose_vehicle"></h4>
                      <p data-i18n="timeline.choose_vehicle_desc"></p>
                    </li>
                    <li>
                      <h4 data-i18n="timeline.pick_location"></h4>
                      <p data-i18n="timeline.pick_location_desc"></p>
                    </li>
                    <li>
                      <h4 data-i18n="timeline.make_booking"></h4>
                      <p data-i18n="timeline.make_booking_desc"></p>
                    </li>
                    <li>
                      <h4 data-i18n="timeline.sit_back"></h4>
                      <p data-i18n="timeline.sit_back_desc"></p>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section aria-label="section" class="pt40 pb40 text-light" data-bgcolor="#111111">
        <div class="wow fadeInRight d-flex" data-wow-duration="infinite">
          <div class="de-marquee-list">
            <div class="d-item">
              <span class="d-item-txt" data-i18n="car_makes.bmw"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
              <span class="d-item-txt" data-i18n="car_makes.audi"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
              <span class="d-item-txt" data-i18n="car_makes.mercedes"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
              <span class="d-item-txt" data-i18n="car_makes.porsche"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
              <span class="d-item-txt" data-i18n="car_makes.volkswagen"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
              <span class="d-item-txt" data-i18n="car_makes.hyundai"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
              <span class="d-item-txt" data-i18n="car_makes.honda"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
              <span class="d-item-txt" data-i18n="car_makes.toyota"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
              <span class="d-item-txt" data-i18n="car_makes.bmw"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
              <span class="d-item-txt" data-i18n="car_makes.audi"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
              <span class="d-item-txt" data-i18n="car_makes.mercedes"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
              <span class="d-item-txt" data-i18n="car_makes.porsche"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
              <span class="d-item-txt" data-i18n="car_makes.volkswagen"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
              <span class="d-item-txt" data-i18n="car_makes.hyundai"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
              <span class="d-item-txt" data-i18n="car_makes.honda"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
              <span class="d-item-txt" data-i18n="car_makes.toyota"></span>
              <span class="d-item-display">
                <i class="d-item-dot"></i>
              </span>
            </div>
          </div>
        </div>
      </section>

      <section id="section-cars">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-lg-6 offset-lg-3 text-center">
              <h2 data-i18n="fleet.title"></h2>
              <p data-i18n="fleet.description"></p>
              <div class="spacer-20"></div>
            </div>
            <div class="clearfix"></div>
            <!-- Dynamic car grid will be rendered here -->
            <div id="fleet-car-grid" class="fleet-car-grid">
              <div style="text-align:center;padding:2em;">
                <p>Loading vehicle fleet...</p>
                <p><small>If this doesn't load, please ensure the server is running and refresh the page.</small></p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="text-light jarallax" aria-label="section">
        <img src="images/background/3.jpg" alt="" class="jarallax-img">
        <div class="container">
          <div class="row">
            <div class="col-lg-3">
              <h1 data-i18n="adventure.title"></h1>
              <div class="spacer-20"></div>
            </div>
            <div class="col-md-3">
              <i class="fa fa-trophy de-icon mb20"></i>
              <h4 data-i18n="features.first_class_services"></h4>
              <p data-i18n="features.first_class_services_desc"></p>
            </div>
            <div class="col-md-3">
              <i class="fa fa-road de-icon mb20"></i>
              <h4 data-i18n="features.road_assistance"></h4>
              <p data-i18n="features.road_assistance_desc"></p>
            </div>
            <div class="col-md-3">
              <i class="fa fa-map-pin de-icon mb20"></i>
              <h4 data-i18n="features.free_pickup"></h4>
              <p data-i18n="features.free_pickup_desc"></p>
            </div>
          </div>
        </div>
      </section>

      <section aria-label="section">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-lg-6 offset-lg-3 text-center">
              <h2 data-i18n="features.our_features"></h2>
              <p data-i18n="features.our_features_desc"></p>
              <div class="spacer-20"></div>
            </div>
            <div class="clearfix"></div>
            <div class="col-lg-3">
              <div class="box-icon s2 p-small mb20 wow fadeInRight" data-wow-delay=".5s">
                <i class="fa bg-color fa-trophy"></i>
                <div class="d-inner">
                  <h4 data-i18n="features.first_class_services"></h4>
                  <span data-i18n="features.first_class_services_desc"></span>
                </div>
              </div>
              <div class="box-icon s2 p-small mb20 wow fadeInL fadeInRight" data-wow-delay=".75s">
                <i class="fa bg-color fa-road"></i>
                <div class="d-inner">
                  <h4 data-i18n="features.road_assistance"></h4>
                  <span data-i18n="features.road_assistance_desc"></span>
                </div>
              </div>
            </div>

            <div class="col-lg-6">
              <img src="images/misc/car.png" alt="" class="img-fluid wow fadeInUp">
            </div>

            <div class="col-lg-3">
              <div class="box-icon s2 d-invert p-small mb20 wow fadeInL fadeInLeft" data-wow-delay="1s">
                <i class="fa bg-color fa-tag"></i>
                <div class="d-inner">
                  <h4 data-i18n="features.quality_min_expense"></h4>
                  <span data-i18n="features.quality_min_expense_desc"></span>
                </div>
              </div>
              <div class="box-icon s2 d-invert p-small mb20 wow fadeInL fadeInLeft" data-wow-delay="1.25s">
                <i class="fa bg-color fa-map-pin"></i>
                <div class="d-inner">
                  <h4 data-i18n="features.free_pickup"></h4>
                  <span data-i18n="features.free_pickup_desc"></span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="text-light jarallax">
        <img src="images/background/2.jpg" class="jarallax-img" alt="">
        <div class="container">
          <div class="row g-5">
            <div class="col-lg-6 wow fadeInRight">
              <h2 data-i18n="about.offer"></h2>
            </div>
            <div class="col-lg-6 wow fadeInLeft">
              <span data-i18n="about.description"></span>
            </div>
          </div>
          <div class="spacer-double"></div>
          <div class="row text-center">
            <div class="col-md-3 col-sm-6 mb-sm-30">
              <div class="de_count transparent text-light wow fadeInUp">
                <h3 class="timer" data-to="164" data-speed="3000">0</h3>
                <span data-i18n="about.completed_orders"></span>
              </div>
            </div>
            <div class="col-md-3 col-sm-6 mb-sm-30">
              <div class="de_count transparent text-light wow fadeInUp">
                <h3 class="timer" data-to="80" data-speed="3000">0</h3>
                <span data-i18n="about.happy_customers"></span>
              </div>
            </div>
            <div class="col-md-3 col-sm-6 mb-sm-30">
              <div class="de_count transparent text-light wow fadeInUp">
                <h3 class="timer" data-to="7" data-speed="3000">0</h3>
                <span data-i18n="about.vehicles_fleet"></span>
              </div>
            </div>
            <div class="col-md-3 col-sm-6 mb-sm-30">
              <div class="de_count transparent text-light wow fadeInUp">
                <h3 class="timer" data-to="1" data-speed="3000">0</h3>
                <span data-i18n="about.years_experience"></span>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section id="section-call-to-action" class="bg-color-2 pt60 pb60 text-light">
        <div class="container">
          <div class="container">
            <div class="row">

              <div class="col-lg-4 offset-lg-2">
                <span class="subtitle text-white" data-i18n="cta.call_us"></span>
                <h2 class="s2" data-i18n="cta.customer_care"></h2>
              </div>

              <div class="col-lg-4 text-lg-center text-sm-center">
                <div class="phone-num-big">
                  <i class="fa fa-phone"></i>
                  <span class="pnb-text" data-i18n="cta.call_us_now">
                  </span>
                  <span class="pnb-num">
                    +37360000500
                  </span>
                </div>
                <a href="tel:+37360000500" class="btn-main" data-i18n="cta.contact_us"></a>
              </div>
            </div>
          </div>
        </div>
      </section>

    </div>
    <!-- content close -->
    <a href="#" id="back-to-top"></a>
    <!-- footer begin -->
    <footer class="text-light">
      <div class="container">
        <div class="row g-custom-x">
          <div class="col-lg-3">
            <div class="widget">
              <h5 data-i18n="footer.about"></h5>
              <p data-i18n="footer.about_desc"></p>
            </div>
          </div>

          <div class="col-lg-3">
            <div class="widget">
              <h5 data-i18n="footer.contact_info"></h5>
              <address class="s1">
                <span data-i18n="footer.address"><i class="id-color fa fa-map-marker fa-lg"></i>Meșterul Manole 20, Chișinău, Republica Moldova</span>
                <a href="tel:+37360000500"> <i class="id-color fa fa-phone fa-lg" style="margin-right:15px;"></i> +373 60 000 500 </a>
                <span data-i18n="footer.email"><i class="id-color fa fa-envelope-o fa-lg"></i><a href="mailto:contact@plusrent.md">contact@plusrent.md</a></span>
              </address>
            </div>
          </div>

          <div class="col-lg-3">
            <h5 data-i18n="footer.quick_links"></h5>
            <div class="widget">
              <ul>
                <li><a href="/" data-i18n="menu.home"></a></li>
                <li><a href="/cars" data-i18n="menu.cars"></a></li>
                <li><a href="/about" data-i18n="menu.about"></a></li>
                <li><a href="/contact" data-i18n="menu.contact"></a></li>
                <li><a href="/sofer-treaz" data-i18n="menu.sober_driver"></a></li>
              </ul>
            </div>
          </div>

          <div class="col-lg-3">
            <div class="widget">
              <h5 data-i18n="footer.social_network"></h5>
              <div class="social-icons">
                <a href="https://www.instagram.com/plusrent.md/" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram fa-lg"></i></a>
                <a href="https://tiktok.me/plusrent" target="_blank" rel="noopener noreferrer"><i class="fab fa-tiktok fa-lg"></i></a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="subfooter">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="de-flex">
                        <div class="de-flex-col">
                            <a href="/">
                                Copyright 2025 - PlusRent
                            </a>
                        </div>
                                <ul class="menu-simple">
                                    <li><a href="/terms" data-i18n="terms.footer_terms">Terms &amp; Conditions</a></li>
                                </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    </footer>
    <!-- footer close -->
  </div>

  <!-- Javascript Files
    ================================================== -->
  <script src="js/plugins.js"></script>
  <script src="js/designesia.js"></script>
  <script src="js/config.js"></script>
  <script src="js/dynamic-cars-loader.js"></script>
  <!-- Flatpickr JS -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="js/date-picker-manager.js"></script>
  <script src="js/validation-booking.js"></script>
  <!-- Google Maps API removed to prevent errors -->
  <!-- i18next CDN -->
  <script src="https://unpkg.com/i18next@21.6.16/dist/umd/i18next.min.js"></script>
  <script src="https://unpkg.com/i18next-http-backend@1.4.3/i18nextHttpBackend.min.js"></script>
  <script src="js/i18n-init.js"></script>

  <script>
    // Global formatting function
    function formatDisplayText(rawKey) {
      if (!rawKey) return '';
      return rawKey
        .split('_')
        .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())
        .join(' ');
    }

    document.addEventListener('DOMContentLoaded', function () {

      const grid = document.getElementById('fleet-car-grid');
      if (!grid) {

        return;
      }

      // Ensure API configuration is available
      window.ensureApiConfig();

      grid.className = 'fleet-car-grid car-list-row';
      grid.innerHTML = '<div style="text-align:center;padding:2em;">Loading...</div>';

      const apiUrl = window.API_BASE_URL + '/api/cars';

      fetch(apiUrl)
        .then(res => {

          if (!res.ok) {
            throw new Error(`HTTP ${res.status}: ${res.statusText}`);
          }
          return res.json();
        })
        .then(cars => {

          if (!cars.length) {
            grid.innerHTML = '<div data-i18n="cars.no_cars">No cars available.</div>';
            return;
          }

          const carsHtml = cars.map(car => {
            const isPremium = car.is_premium === 1 || car.is_premium === true;
            const rentNowUrl = `car-single?id=${car.id}`;

            // Calculate the lowest price from price policy
            let lowestPrice = '';
            if (car.price_policy) {
              const pricePolicy = typeof car.price_policy === 'string' ? JSON.parse(car.price_policy) : car.price_policy;
              const prices = Object.values(pricePolicy).map(price => parseInt(price));
              lowestPrice = Math.min(...prices).toString();
            }
 
            return `
                <div class=\"col-xl-4 col-lg-4 col-md-6\">
                  <div class=\"de-item mb30${isPremium ? ' premium' : ''}\">
                    <div class=\"d-img\">
                      <img src=\"${car.head_image && car.head_image.startsWith('http') ? car.head_image : (car.head_image ? window.API_BASE_URL + car.head_image : window.API_BASE_URL + '/uploads/placeholder.png')}\" class=\"img-fluid\" alt=\"\">
                      ${isPremium ? '<div class=\"premium-badge\">HOT</div>' : ''}
                    </div>
                    <div class=\"d-info\">
                      <div class=\"d-text\">
                        <h4>${formatDisplayText(car.make_name)}</h4>
                        <p>${formatDisplayText(car.model_name)}</p>
                        <div class=\"d-item_like\">
                          <i class=\"fa fa-heart\"></i><span>${car.likes || 0}</span>
                        </div>
                        <div class=\"d-atr-group\">
                          <span class="d-atr"><img src="images/icons/1-green.svg" alt=""><span ></span> ${car.num_passengers || '-'}</span>
                <span class="d-atr"><img src="images/icons/2-green.svg" alt=""><span ></span> ${car.luggage || '-'}</span>
                <span class="d-atr"><img src="images/icons/3-green.svg" alt="">${ car.num_doors|| '-'}</span>
                <span class="d-atr"><img src="images/icons/4-green.svg" alt=""><span ></span> ${car.car_type || '-'}</span>
                        </div>
                        <div class=\"d-price\" data-i18n=\"cars.daily_rate\">Daily rate from <span>${lowestPrice ? lowestPrice + '€' : 'N/A'}</span></div>
                        <a class=\"btn-main\" href=\"${rentNowUrl}\" data-i18n=\"cars.rent_now\">Rent Now</a>
                      </div>
                    </div>
                  </div>
                </div>
              `;
          }).join('');
          
          grid.innerHTML = carsHtml;

        })
        .catch((error) => {

          grid.innerHTML = `<div style="color:red;text-align:center;">Failed to load cars: ${error.message.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</div>`;
        });
    });
  </script>

  <!-- Price Calculator Modal -->
  <div id="price-calculator-modal" class="price-calculator-modal">
    <div class="price-calculator-content">
      <div class="modal-header">
        <h4><i class="fa fa-calculator"></i> <span data-i18n="price_calculator.title">Price Calculator</span></h4>
        <button type="button" class="close-modal" onclick="closePriceCalculator()">&times;</button>
      </div>
      <div class="modal-body">
        <!-- Tariff Information -->
        <div class="tariff-info">
          <h6><i class="fa fa-info-circle"></i> <span data-i18n="price_calculator.working_hours_info">Working Hours &
              Location Fees</span></h6>
          <div class="tariff-details">
            <div><span class="working-hours" data-i18n="price_calculator.working_hours">Working Hours (8:00 AM - 6:00
                PM):</span> <span data-i18n="price_calculator.standard_pricing">Standard pricing</span></div>
            <div><span class="outside-hours" data-i18n="price_calculator.outside_hours">Outside Working Hours:</span>
              +<span id="index-outside-hours-fee">€15</span> <span data-i18n="price_calculator.outside_hours_fee">fee
                per pickup/return</span></div>
            <div><span class="location-fees" data-i18n="price_calculator.airport_delivery">Airport Delivery:</span>
              Chisinau +<span id="index-chisinau-fee">€25</span>, Iasi +<span id="index-iasi-fee">€35</span></div>
            <div><i class="fa fa-clock-o"></i> <span data-i18n="price_calculator.minimum_rental">Minimum rental: 24
                hours</span></div>
          </div>
        </div>

        <!-- Calculator Section -->
        <div class="calculator-section">
          <h5><i class="fa fa-calendar"></i> <span data-i18n="price_calculator.rental_period">Rental Period</span></h5>
          <div class="row g-2">
            <div class="col-6">
              <label class="form-label small" data-i18n="price_calculator.pickup_date" for="modal-pickup-date">Pickup Date:</label>
              <input type="text" id="modal-pickup-date" class="form-control form-control-sm mobile-date-input">
            </div>
            <div class="col-6">
              <label class="form-label small" data-i18n="price_calculator.return_date" for="modal-return-date">Return Date:</label>
              <input type="text" id="modal-return-date" class="form-control form-control-sm mobile-date-input">
            </div>
          </div>
          <div class="row g-2 mt-2">
            <div class="col-6">
              <label class="form-label small" data-i18n="price_calculator.pickup_time" for="modal-pickup-time">Pickup Time:</label>
              <select id="modal-pickup-time" class="form-control form-control-sm">
                <option value="00:00">00:00</option>
                <option value="01:00">01:00</option>
                <option value="02:00">02:00</option>
                <option value="03:00">03:00</option>
                <option value="04:00">04:00</option>
                <option value="05:00">05:00</option>
                <option value="06:00">06:00</option>
                <option value="07:00">07:00</option>
                <option value="08:00" selected>08:00</option>
                <option value="09:00">09:00</option>
                <option value="10:00">10:00</option>
                <option value="11:00">11:00</option>
                <option value="12:00">12:00</option>
                <option value="13:00">13:00</option>
                <option value="14:00">14:00</option>
                <option value="15:00">15:00</option>
                <option value="16:00">16:00</option>
                <option value="17:00">17:00</option>
                <option value="18:00">18:00</option>
                <option value="19:00">19:00</option>
                <option value="20:00">20:00</option>
                <option value="21:00">21:00</option>
                <option value="22:00">22:00</option>
                <option value="23:00">23:00</option>
              </select>
            </div>
            <div class="col-6">
              <label class="form-label small" data-i18n="price_calculator.return_time" for="modal-return-time">Return Time:</label>
              <select id="modal-return-time" class="form-control form-control-sm">
                <option value="00:00">00:00</option>
                <option value="01:00">01:00</option>
                <option value="02:00">02:00</option>
                <option value="03:00">03:00</option>
                <option value="04:00">04:00</option>
                <option value="05:00">05:00</option>
                <option value="06:00">06:00</option>
                <option value="07:00">07:00</option>
                <option value="08:00">08:00</option>
                <option value="09:00">09:00</option>
                <option value="10:00">10:00</option>
                <option value="11:00">11:00</option>
                <option value="12:00">12:00</option>
                <option value="13:00">13:00</option>
                <option value="14:00">14:00</option>
                <option value="15:00">15:00</option>
                <option value="16:00">16:00</option>
                <option value="17:00" selected>17:00</option>
                <option value="18:00">18:00</option>
                <option value="19:00">19:00</option>
                <option value="20:00">20:00</option>
                <option value="21:00">21:00</option>
                <option value="22:00">22:00</option>
                <option value="23:00">23:00</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Location Information -->
        <div class="calculator-section">
          <h5><i class="fa fa-map-marker"></i> <span data-i18n="price_calculator.selected_locations">Selected
              Locations</span></h5>
          <div class="location-card p-2 bg-light rounded">
            <div class="row g-2">
              <div class="col-6">
                <small class="text-muted" data-i18n="price_calculator.pickup_location">Pickup Location:</small>
                <div class="fw-bold small" id="modal-pickup-location" data-i18n="cars.chisinau_airport">-</div>
              </div>
              <div class="col-6">
                <small class="text-muted" data-i18n="price_calculator.dropoff_location">Drop-off Location:</small>
                <div class="fw-bold small" id="modal-dropoff-location" data-i18n="cars.our_office">-</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Vehicle Selection -->
        <div class="calculator-section">
          <h5><i class="fa fa-car"></i> <span data-i18n="price_calculator.selected_vehicle">Selected Vehicle</span></h5>
          <div id="modal-vehicle-info" class="vehicle-card p-2 bg-light rounded">
            <div class="row align-items-center g-2">
              <div class="col-3">
                <img id="modal-vehicle-image" src="" alt="Vehicle" class="img-fluid rounded"
                  style="max-height: 60px; object-fit: cover;">
              </div>
              <div class="col-9">
                <h6 id="modal-vehicle-name" class="mb-1 small"></h6>
                <p id="modal-vehicle-details" class="text-muted small mb-1"></p>
                <div class="vehicle-price">
                  <span class="text-primary fw-bold small" id="modal-vehicle-price"></span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Customer Age -->
        <div class="calculator-section">
          <h5><i class="fa fa-user"></i> <span data-i18n="price_calculator.customer_age">Customer Age</span></h5>
          <div class="row g-2">
            <div class="col-12">
              <label class="form-label small" data-i18n="price_calculator.age" for="modal-customer-age">Age:</label>
              <input type="number" id="modal-customer-age" class="form-control form-control-sm" min="18" max="100"
                placeholder="25" required>
            </div>
          </div>
        </div>

        <!-- Coupon Code Section -->
        <div class="calculator-section">
          <h5><i class="fa fa-ticket"></i> <span data-i18n="price_calculator.discount_code">Discount Code</span></h5>
          <div class="row g-2">
            <div class="col-12">
              <input type="text" id="modal-discount-code" class="form-control form-control-sm"
                data-i18n-placeholder="cars.discount_code_placeholder" placeholder="Enter discount code">
            </div>
          </div>
        </div>


        <!-- Price Summary -->
        <div class="modal-price-summary">
          <h5><i class="fa fa-euro"></i> <span data-i18n="price_calculator.price_breakdown">Price Breakdown</span></h5>
          <div class="modal-price-item">
            <span data-i18n="price_calculator.daily_rate">Daily Rate:</span>
            <span id="modal-daily-rate">€0</span>
          </div>
          <div class="modal-price-item">
            <span data-i18n="price_calculator.duration">Duration:</span>
            <span id="modal-rental-duration">0 <span data-i18n="price_calculator.days">days</span></span>
          </div>
          <div class="modal-price-item">
            <span data-i18n="price_calculator.location_fees">Location Fees:</span>
            <span id="modal-location-fees">€0</span>
          </div>
          <div class="modal-price-item">
            <span data-i18n="price_calculator.outside_hours_fees">Outside Hours Fees:</span>
            <span id="modal-night-premium">€0</span>
          </div>
          <div class="modal-price-item total">
            <span data-i18n="price_calculator.total_estimate">Total Estimate:</span>
            <span id="modal-total-estimate" class="text-primary">€0</span>
          </div>
        </div>

        <!-- Modal Actions -->
        <div class="modal-actions">
          <button type="button" class="btn-calculate" onclick="applyModalCalculation()">
            <i class="fa fa-check"></i> <span data-i18n="price_calculator.apply_to_booking">Apply to Booking</span>
          </button>
          <button type="button" class="btn-close-calc" onclick="closePriceCalculator()">
            <i class="fa fa-times"></i> <span data-i18n="price_calculator.close">Close</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Price calculator functions are defined in validation-booking.js -->

  <!-- Contact Pop-up Module -->
  <div id="contactPopup" class="contact-popup-overlay">
    <div class="contact-popup">
      <div class="contact-popup-header">
        <button class="contact-popup-close" onclick="closeContactPopup()">
          <i class="fa fa-times"></i>
        </button>
        <h3 data-i18n="contact_popup.title">Contact Us 24/7</h3>
        <p data-i18n="contact_popup.subtitle">Choose your preferred way to get in touch</p>
      </div>
      <div class="contact-popup-body">
        <div class="contact-option" onclick="openWhatsApp()">
          <div class="contact-option-icon">
            <i class="fab fa-whatsapp fa-lg"></i>
          </div>
          <div class="contact-option-content">
            <div class="contact-option-title" data-i18n="contact_popup.whatsapp">WhatsApp</div>
            <div class="contact-option-subtitle" data-i18n="contact_popup.whatsapp_desc">Quick chat support</div>
          </div>
        </div>

        <div class="contact-option" onclick="openViber()">
          <div class="contact-option-icon">
            <i class="fa fa-phone"></i>
          </div>
          <div class="contact-option-content">
            <div class="contact-option-title" data-i18n="contact_popup.viber">Viber</div>
            <div class="contact-option-subtitle" data-i18n="contact_popup.viber_desc">Voice and text messages</div>
          </div>
        </div>

        <div class="contact-option" onclick="openTelegram()">
          <div class="contact-option-icon">
            <i class="fa fa-paper-plane"></i>
          </div>
          <div class="contact-option-content">
            <div class="contact-option-title" data-i18n="contact_popup.telegram">Telegram</div>
            <div class="contact-option-subtitle" data-i18n="contact_popup.telegram_desc">Fast messaging</div>
          </div>
        </div>

        <div class="contact-option" onclick="makeDirectCall()">
          <div class="contact-option-icon">
            <i class="fa fa-phone"></i>
          </div>
          <div class="contact-option-content">
            <div class="contact-option-title" data-i18n="contact_popup.direct_call">Direct Call</div>
            <div class="contact-option-subtitle" data-i18n="contact_popup.direct_call_desc">Call us now</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Floating Contact Button -->
  <div class="floating-contact-btn" onclick="openContactPopup()">
    <i class="fa fa-comments"></i>
  </div>

  <script>
    // Contact pop-up functionality
    function openContactPopup() {
      document.getElementById('contactPopup').style.display = 'flex';
    }

    function closeContactPopup() {
      document.getElementById('contactPopup').style.display = 'none';
    }

    function openWhatsApp() {
      window.open('https://wa.me/+37360000500?text=Bună ziua! Am nevoie de ajutor cu închirierea unei mașini.', '_blank');
    }

    function openViber() {
      window.open('viber://chat?number=+37360000500', '_blank');
    }

    function openTelegram() {
      window.open('https://t.me/plusrent', '_blank');
    }

    function makeDirectCall() {
      window.location.href = 'tel:+37360000500';
    }

    // Close popup when clicking outside
    document.getElementById('contactPopup').addEventListener('click', function (e) {
      if (e.target === this) {
        closeContactPopup();
      }
    });
  </script>
  <!-- API Fallback Configuration -->
  <script>
    // Ensure API_BASE_URL is always available
    if (typeof window.API_BASE_URL === 'undefined') {
      window.API_BASE_URL = '';
    }

    // Log final API configuration

    // Test API configuration
    setTimeout(() => {
      // Test a simple API call
      const testUrl = window.API_BASE_URL + '/api/health';
    }, 1000);
  </script>

  <!-- Spinning Wheel Modal Trigger -->
  <script>
    // Load and update dynamic fee displays
    async function updateIndexFeeDisplays() {
      try {
        // Ensure API configuration is available
        window.ensureApiConfig();

        const response = await fetch(`${window.API_BASE_URL}/api/fee-settings/public`);
        if (response.ok) {
          const fees = await response.json();

          // Update outside hours fee displays
          const outsideHoursFeeElements = [
            document.getElementById('index-outside-hours-fee'),
          ];
          outsideHoursFeeElements.forEach(element => {
            if (element && fees.outside_hours_fee !== undefined) {
              element.textContent = `€${fees.outside_hours_fee}`;
            }
          });

          // Update airport fee displays (using dropoff fees for display as they're typically higher)
          const chisinauFeeElement = document.getElementById('index-chisinau-fee');
          if (chisinauFeeElement && fees.chisinau_airport_dropoff !== undefined) {
            chisinauFeeElement.textContent = `€${fees.chisinau_airport_dropoff}`;
          }

          const iasiFeeElement = document.getElementById('index-iasi-fee');
          if (iasiFeeElement && fees.iasi_airport_dropoff !== undefined) {
            iasiFeeElement.textContent = `€${fees.iasi_airport_dropoff}`;
          }

        } else {
          console.warn('Failed to load fee settings');
        }
      } catch (error) {
        console.error('Error loading fee settings:', error);
      }
    }

    // Load fees when page is ready
    document.addEventListener('DOMContentLoaded', function () {
      // Wait a bit for API_BASE_URL to be initialized
      setTimeout(updateIndexFeeDisplays, 500);
    });

    // Enhanced error display function with i18n support
    window.showError = function (message, errorType = 'validation') {
      console.log('showError called with:', message, errorType);
      
      // Hide success notification if it's showing
      const successNotification = document.getElementById('booking-success-notification');
      if (successNotification) {
        successNotification.style.display = 'none';
      }

      // Get error message element
      const errorMessage = document.getElementById('error_message');
      
      if (errorMessage) {
        // Check if message is a translation key
        let displayMessage = message;
        
        // Handle translation keys for validation errors
        if (typeof window.i18next !== 'undefined' && window.i18next.exists(message)) {
          displayMessage = window.i18next.t(message);
        } else if (message.startsWith('errors.')) {
          // If it's an error key but translation doesn't exist, provide fallback
          const errorKey = message.replace('errors.', '');
          const fallbackMessages = {
            'phone_invalid_length': 'Invalid phone number format. Phone number must contain at least 8 digits.',
            'phone_invalid_format': 'Invalid phone number format. Please enter a valid phone number.',
            'name_required': 'Please enter your name.',
            'email_required': 'Please enter your email address.',
            'email_invalid': 'Please enter a valid email address.',
            'phone_required': 'Please enter your phone number.',
            'vehicle_required': 'Please select a vehicle.',
            'pickup_location_required': 'Please select a pickup location.',
            'destination_required': 'Please select a destination.',
            'pickup_date_required': 'Please select a pickup date.',
            'return_date_required': 'Please select a return date.',
            'pickup_time_required': 'Please select a pickup time.',
            'return_time_required': 'Please select a return time.',
            'invalid_date_range': 'Return date must be after pickup date.',
            'minimum_rental_24h': 'Minimum rental period is 24 hours.',
            'form_validation_failed': 'Please fill in all required fields correctly.'
          };
          
          displayMessage = fallbackMessages[errorKey] || message;
        }

        // Add icon and styling based on error type
        let iconHtml = '⚠️';
        if (errorType === 'phone') {
          iconHtml = '📱';
        } else if (errorType === 'email') {
          iconHtml = '✉️';
        } else if (errorType === 'date') {
          iconHtml = '📅';
        }

        errorMessage.innerHTML = `<span style="margin-right: 8px;">${iconHtml}</span>${displayMessage}`;
        errorMessage.style.display = 'block';
        errorMessage.classList.add('show');

        // Scroll to error message smoothly
        setTimeout(() => {
          errorMessage.scrollIntoView({ 
            behavior: 'smooth', 
            block: 'center',
            inline: 'nearest'
          });
        }, 100);

        // Auto-hide after 8 seconds
        setTimeout(() => {
          errorMessage.style.display = 'none';
          errorMessage.classList.remove('show');
        }, 8000);
      } else {
        console.error('Error message element not found');
        // Fallback to alert if error elements not found
        alert(displayMessage || message);
      }
    };

    // Mobile Date Picker Fixes
    document.addEventListener('DOMContentLoaded', function () {
      // Fix for iOS date picker issues
      const dateInputs = document.querySelectorAll('.mobile-date-input');

      dateInputs.forEach(input => {
        // Prevent zoom on iOS by setting font-size to 16px or larger
        input.addEventListener('focus', function () {
          // Ensure proper positioning for iOS date picker
          this.style.position = 'relative';
          this.style.zIndex = '9999';
        });

        // Reset positioning after date picker closes
        input.addEventListener('blur', function () {
          this.style.position = '';
          this.style.zIndex = '';
        });

        // Handle iOS date picker change event
        input.addEventListener('change', function () {
          // Ensure the value is properly set
          if (this.value) {
            console.log('Date changed:', this.value);
            // Trigger any necessary validation or updates
            this.dispatchEvent(new Event('input', { bubbles: true }));
          }
        });
      });
    });

    // Enhanced validation error messages with better UX
    window.showValidationError = function(fieldName, errorKey) {
      console.log('showValidationError:', fieldName, errorKey);
      
      // Map field names to user-friendly labels
      const fieldLabels = {
        'phone': 'Phone Number',
        'name': 'Name',
        'email': 'Email',
        'vehicle_type': 'Vehicle',
        'pickup_location': 'Pickup Location',
        'destination': 'Destination',
        'pickup_date': 'Pickup Date',
        'return_date': 'Return Date',
        'pickup_time': 'Pickup Time',
        'return_time': 'Return Time'
      };

      const fieldLabel = fieldLabels[fieldName] || fieldName;

      // Get translated error message if available
      let errorMessage = errorKey;
      if (typeof window.i18next !== 'undefined' && window.i18next.exists(errorKey)) {
        errorMessage = window.i18next.t(errorKey);
      }

      // Show enhanced error with field context
      const contextMessage = `${fieldLabel}: ${errorMessage}`;
      
      // Determine error type for appropriate icon
      let errorType = 'validation';
      if (fieldName === 'phone') errorType = 'phone';
      else if (fieldName === 'email') errorType = 'email';
      else if (fieldName.includes('date') || fieldName.includes('time')) errorType = 'date';

      window.showError(contextMessage, errorType);

      // Also highlight the field
      const fieldElement = document.getElementById(fieldName) || document.querySelector(`[name="${fieldName}"]`);
      if (fieldElement) {
        fieldElement.classList.add('error_input');
        fieldElement.focus();
        
        // Remove error styling after user interacts
        const removeError = () => {
          fieldElement.classList.remove('error_input');
          fieldElement.removeEventListener('input', removeError);
          fieldElement.removeEventListener('change', removeError);
        };
        
        fieldElement.addEventListener('input', removeError);
        fieldElement.addEventListener('change', removeError);
      }
    };
  </script>

  <!-- Universal Spinning Wheel -->
  <script src="js/universal-include.js"></script>

  <!-- Auto-Apply Coupon -->
  <script src="js/auto-apply-coupon.js"></script>

  <!-- Enhanced Universal Error Popup with Modern Design -->
  <style>
    .universal-error-popup {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 10000;
      max-width: 400px;
      animation: slideInRight 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    }

    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(100%);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .universal-error-content {
      background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
      border: 2px solid #ef4444;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 
        0 20px 25px -5px rgba(239, 68, 68, 0.3),
        0 10px 10px -5px rgba(239, 68, 68, 0.2);
      display: flex;
      align-items: flex-start;
      gap: 16px;
      position: relative;
      backdrop-filter: blur(10px);
    }

    .universal-error-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, #ef4444, #dc2626);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
    }

    .universal-error-icon i {
      color: white;
      font-size: 20px;
    }

    .universal-error-text {
      flex: 1;
      color: #7f1d1d;
      font-size: 14px;
      font-weight: 500;
      line-height: 1.6;
      padding-top: 2px;
    }

    .universal-error-close {
      position: absolute;
      top: 12px;
      right: 12px;
      width: 28px;
      height: 28px;
      background: rgba(127, 29, 29, 0.1);
      border: none;
      border-radius: 8px;
      color: #7f1d1d;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      font-size: 16px;
    }

    .universal-error-close:hover {
      background: rgba(127, 29, 29, 0.2);
      transform: scale(1.1);
    }

    .universal-error-close:active {
      transform: scale(0.95);
    }

    @media (max-width: 768px) {
      .universal-error-popup {
        top: 10px;
        right: 10px;
        left: 10px;
        max-width: none;
      }

      .universal-error-content {
        padding: 16px;
        gap: 12px;
      }

      .universal-error-icon {
        width: 36px;
        height: 36px;
      }

      .universal-error-icon i {
        font-size: 18px;
      }

      .universal-error-text {
        font-size: 13px;
      }
    }
  </style>

  <div id="universal-error-popup" class="universal-error-popup" style="display: none;">
    <div class="universal-error-content">
      <div class="universal-error-icon">
        <i class="fa fa-exclamation-triangle"></i>
      </div>
      <div class="universal-error-text">
        <span id="universal-error-message"></span>
      </div>
      <button type="button" class="universal-error-close" onclick="hideUniversalError()">
        <i class="fa fa-times"></i>
      </button>
    </div>
  </div>

  <script>
    // Enhanced universal error handler
    function showUniversalError(message) {
      const popup = document.getElementById('universal-error-popup');
      const messageEl = document.getElementById('universal-error-message');
      
      if (popup && messageEl) {
        // Check if message is a translation key
        let displayMessage = message;
        if (typeof window.i18next !== 'undefined' && window.i18next.exists(message)) {
          displayMessage = window.i18next.t(message);
        }
        
        messageEl.textContent = displayMessage;
        popup.style.display = 'block';
        
        // Auto-hide after 8 seconds
        setTimeout(() => {
          hideUniversalError();
        }, 8000);
      }
    }

    function hideUniversalError() {
      const popup = document.getElementById('universal-error-popup');
      if (popup) {
        popup.style.display = 'none';
      }
    }

    // Make it globally available
    window.showUniversalError = showUniversalError;
    window.hideUniversalError = hideUniversalError;
  </script>

  <!-- Enhanced Phone Validation Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const phoneInput = document.getElementById('phone');
      
      if (phoneInput) {
        // Real-time phone validation
        phoneInput.addEventListener('input', function(e) {
          // Remove non-digit characters for validation
          const digitsOnly = this.value.replace(/\D/g, '');
          
          // Visual feedback
          if (digitsOnly.length > 0 && digitsOnly.length < 8) {
            this.classList.add('error_input');
          } else {
            this.classList.remove('error_input');
          }
        });

        // Validation on blur
        phoneInput.addEventListener('blur', function(e) {
          const digitsOnly = this.value.replace(/\D/g, '');
          
          if (this.value && digitsOnly.length < 8) {
            window.showValidationError('phone', 'errors.phone_invalid_length');
          }
        });
      }
    });
  </script>

  <!-- Enhanced Form Validation Integration -->
  <script>
    // Override or enhance existing validation
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('booking_form');
      
      if (form) {
        // Add custom validation before form submission
        form.addEventListener('submit', function(e) {
          const phoneInput = document.getElementById('phone');
          
          if (phoneInput && phoneInput.value) {
            const digitsOnly = phoneInput.value.replace(/\D/g, '');
            
            if (digitsOnly.length < 8) {
              e.preventDefault();
              window.showValidationError('phone', 'errors.phone_invalid_length');
              return false;
            }
          }
        });
      }
    });
  </script>

  <!-- Price Calculator Enhancement Script -->
  <script>
    // Enhanced price calculator with better error handling
    window.openPriceCalculator = function() {
      const modal = document.getElementById('price-calculator-modal');
      if (modal) {
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        
        // Animate modal entrance
        setTimeout(() => {
          const content = modal.querySelector('.price-calculator-content');
          if (content) {
            content.style.opacity = '1';
            content.style.transform = 'translateY(0) scale(1)';
          }
        }, 10);
      }
    };

    window.closePriceCalculator = function() {
      const modal = document.getElementById('price-calculator-modal');
      if (modal) {
        const content = modal.querySelector('.price-calculator-content');
        if (content) {
          content.style.opacity = '0';
          content.style.transform = 'translateY(40px) scale(0.96)';
        }
        
        setTimeout(() => {
          modal.style.display = 'none';
          document.body.style.overflow = '';
        }, 300);
      }
    };

    window.applyModalCalculation = function() {
      // Apply calculation logic here
      console.log('Applying modal calculation');
      
      // Get all the values from modal
      const pickupDate = document.getElementById('modal-pickup-date')?.value;
      const returnDate = document.getElementById('modal-return-date')?.value;
      const pickupTime = document.getElementById('modal-pickup-time')?.value;
      const returnTime = document.getElementById('modal-return-time')?.value;
      const customerAge = document.getElementById('modal-customer-age')?.value;
      const discountCode = document.getElementById('modal-discount-code')?.value;
      
      // Validate inputs
      if (!pickupDate || !returnDate) {
        window.showUniversalError('errors.date_required');
        return;
      }
      
      if (!pickupTime || !returnTime) {
        window.showUniversalError('errors.time_required');
        return;
      }
      
      // Get calculated total
      const totalElement = document.getElementById('modal-total-estimate');
      const totalPrice = totalElement ? totalElement.textContent.replace(/[^0-9.]/g, '') : '0';
      
      // Store total price in hidden field
      const totalPriceInput = document.getElementById('total_price');
      if (totalPriceInput) {
        totalPriceInput.value = totalPrice;
      }
      
      // Update main form summary if exists
      const mainSummary = document.getElementById('price-summary');
      if (mainSummary) {
        mainSummary.style.display = 'block';
        
        // Copy values to main summary
        const dailyRate = document.getElementById('modal-daily-rate')?.textContent;
        const duration = document.getElementById('modal-rental-duration')?.textContent;
        const insurance = document.getElementById('insurance-cost')?.textContent;
        
        if (document.getElementById('daily-rate')) {
          document.getElementById('daily-rate').textContent = dailyRate || '€0';
        }
        if (document.getElementById('rental-duration')) {
          document.getElementById('rental-duration').textContent = duration || '0 days';
        }
        if (document.getElementById('insurance-cost')) {
          document.getElementById('insurance-cost').textContent = insurance || '€0';
        }
        if (document.getElementById('total-estimate')) {
          document.getElementById('total-estimate').textContent = '€' + totalPrice;
        }
      }
      
      // Show success message
      if (typeof window.i18next !== 'undefined') {
        const successMsg = window.i18next.t('price_calculator.applied_success') || 'Price calculation applied successfully!';
        window.showUniversalError(successMsg);
      }
      
      // Close modal
      window.closePriceCalculator();
    };

    // Close modal when clicking outside
    document.addEventListener('DOMContentLoaded', function() {
      const modal = document.getElementById('price-calculator-modal');
      if (modal) {
        modal.addEventListener('click', function(e) {
          if (e.target === this) {
            window.closePriceCalculator();
          }
        });
      }
    });

    // ESC key to close modal
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        const modal = document.getElementById('price-calculator-modal');
        if (modal && modal.style.display === 'flex') {
          window.closePriceCalculator();
        }
      }
    });
  </script>

  <!-- Flatpickr Enhancement Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Wait for flatpickr to be loaded
      if (typeof flatpickr !== 'undefined') {
        // Initialize flatpickr on modal date inputs with modern options
        const modalPickupDate = document.getElementById('modal-pickup-date');
        const modalReturnDate = document.getElementById('modal-return-date');
        
        if (modalPickupDate) {
          flatpickr(modalPickupDate, {
            dateFormat: 'Y-m-d',
            minDate: 'today',
            enableTime: false,
            locale: {
              firstDayOfWeek: 1 // Monday
            },
            onChange: function(selectedDates, dateStr, instance) {
              // Update return date minimum
              if (modalReturnDate && modalReturnDate._flatpickr) {
                modalReturnDate._flatpickr.set('minDate', dateStr);
              }
            }
          });
        }
        
        if (modalReturnDate) {
          flatpickr(modalReturnDate, {
            dateFormat: 'Y-m-d',
            minDate: 'today',
            enableTime: false,
            locale: {
              firstDayOfWeek: 1 // Monday
            }
          });
        }
      }
    });
  </script>

  <!-- Loading State Management -->
  <script>
    // Show loading state for async operations
    window.showLoadingState = function(button) {
      if (button) {
        button.disabled = true;
        button.dataset.originalText = button.innerHTML;
        button.innerHTML = '<span class="loading-spinner"></span> Loading...';
      }
    };

    window.hideLoadingState = function(button) {
      if (button && button.dataset.originalText) {
        button.disabled = false;
        button.innerHTML = button.dataset.originalText;
        delete button.dataset.originalText;
      }
    };
  </script>

  <!-- Accessibility Enhancements -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Add ARIA labels dynamically
      const modalContent = document.querySelector('.price-calculator-content');
      if (modalContent) {
        modalContent.setAttribute('role', 'dialog');
        modalContent.setAttribute('aria-modal', 'true');
        modalContent.setAttribute('aria-labelledby', 'calculator-title');
      }

      // Trap focus within modal when open
      const modal = document.getElementById('price-calculator-modal');
      if (modal) {
        modal.addEventListener('keydown', function(e) {
          if (e.key === 'Tab' && modal.style.display === 'flex') {
            const focusableElements = modal.querySelectorAll(
              'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
            );
            const firstElement = focusableElements[0];
            const lastElement = focusableElements[focusableElements.length - 1];

            if (e.shiftKey && document.activeElement === firstElement) {
              e.preventDefault();
              lastElement.focus();
            } else if (!e.shiftKey && document.activeElement === lastElement) {
              e.preventDefault();
              firstElement.focus();
            }
          }
        });
      }
    });
  </script>

  <!-- Performance Optimization -->
  <script>
    // Debounce function for performance
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }

    // Lazy load images
    if ('IntersectionObserver' in window) {
      const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            if (img.dataset.src) {
              img.src = img.dataset.src;
              img.removeAttribute('data-src');
              observer.unobserve(img);
            }
          }
        });
      });

      document.querySelectorAll('img[data-src]').forEach(img => {
        imageObserver.observe(img);
      });
    }
  </script>

  <!-- Analytics Integration Point -->
  <script>
    // Track important user interactions
    function trackEvent(category, action, label) {
      // Placeholder for analytics integration
      console.log('Event tracked:', { category, action, label });
      
      // Add your analytics code here (Google Analytics, etc.)
      if (typeof gtag !== 'undefined') {
        gtag('event', action, {
          'event_category': category,
          'event_label': label
        });
      }
    }

    // Track calculator opens
    document.addEventListener('DOMContentLoaded', function() {
      const calculatorTriggers = document.querySelectorAll('[onclick*="openPriceCalculator"]');
      calculatorTriggers.forEach(trigger => {
        trigger.addEventListener('click', function() {
          trackEvent('Calculator', 'open', 'Price Calculator Modal');
        });
      });
    });
  </script>
<!-- Fix: Load Vehicle Data into Price Calculator Modal -->
<script>
  // Enhanced openPriceCalculator to load vehicle data
  (function() {
    const originalOpenCalculator = window.openPriceCalculator;
    
    window.openPriceCalculator = function() {
      // Call original function to open modal
      if (originalOpenCalculator) {
        originalOpenCalculator();
      } else {
        const modal = document.getElementById('price-calculator-modal');
        if (modal) {
          modal.style.display = 'flex';
          document.body.style.overflow = 'hidden';
        }
      }
      
      // Load vehicle data into modal
      loadVehicleDataIntoModal();
    };
    
    function loadVehicleDataIntoModal() {
      // Get selected vehicle from main form
      const vehicleSelect = document.getElementById('vehicle_type');
      
      if (!vehicleSelect || !vehicleSelect.value) {
        console.warn('No vehicle selected');
        return;
      }
      
      const selectedOption = vehicleSelect.options[vehicleSelect.selectedIndex];
      
      // Get vehicle data from the main form's vehicle card
      const mainVehicleImage = document.getElementById('vehicle-image');
      const mainVehicleName = document.getElementById('vehicle-name');
      const mainVehicleDetails = document.getElementById('vehicle-details');
      const mainVehiclePrice = document.getElementById('vehicle-price');
      
      // Get modal elements
      const modalVehicleImage = document.getElementById('modal-vehicle-image');
      const modalVehicleName = document.getElementById('modal-vehicle-name');
      const modalVehicleDetails = document.getElementById('modal-vehicle-details');
      const modalVehiclePrice = document.getElementById('modal-vehicle-price');
      
      // Copy data from main form to modal
      if (mainVehicleImage && modalVehicleImage && mainVehicleImage.src) {
        modalVehicleImage.src = mainVehicleImage.src;
        modalVehicleImage.alt = mainVehicleImage.alt || 'Vehicle';
      }
      
      if (mainVehicleName && modalVehicleName && mainVehicleName.textContent) {
        modalVehicleName.textContent = mainVehicleName.textContent;
      }
      
      if (mainVehicleDetails && modalVehicleDetails && mainVehicleDetails.textContent) {
        modalVehicleDetails.textContent = mainVehicleDetails.textContent;
      }
      
      if (mainVehiclePrice && modalVehiclePrice && mainVehiclePrice.textContent) {
        modalVehiclePrice.textContent = mainVehiclePrice.textContent;
      }
      
      // Alternative: Get data from selected option's data attributes
      if (!modalVehicleImage.src || modalVehicleImage.src === window.location.href) {
        if (selectedOption.dataset.image) {
          modalVehicleImage.src = selectedOption.dataset.image;
        }
        
        if (selectedOption.dataset.name) {
          modalVehicleName.textContent = selectedOption.dataset.name;
        }
        
        if (selectedOption.dataset.details) {
          modalVehicleDetails.textContent = selectedOption.dataset.details;
        }
        
        if (selectedOption.dataset.price) {
          modalVehiclePrice.textContent = selectedOption.dataset.price + ' /день';
        }
      }
      
      // Get pickup and dropoff locations
      const pickupLocation = document.querySelector('input[name="pickup_location"]:checked');
      const dropoffLocation = document.querySelector('input[name="destination"]:checked');
      
      const modalPickupLocation = document.getElementById('modal-pickup-location');
      const modalDropoffLocation = document.getElementById('modal-dropoff-location');
      
      if (pickupLocation && modalPickupLocation) {
        // Get the label text
        const pickupLabel = pickupLocation.parentElement.textContent.trim();
        modalPickupLocation.textContent = pickupLabel;
      }
      
      if (dropoffLocation && modalDropoffLocation) {
        // Get the label text
        const dropoffLabel = dropoffLocation.parentElement.textContent.trim();
        modalDropoffLocation.textContent = dropoffLabel;
      }
      
      console.log('Vehicle data loaded into modal');
    }
  })();
  
  // Also ensure vehicle data is loaded when vehicle selection changes
  document.addEventListener('DOMContentLoaded', function() {
    const vehicleSelect = document.getElementById('vehicle_type');
    
    if (vehicleSelect) {
      vehicleSelect.addEventListener('change', function() {
        // Store current selection for modal
        const selectedOption = this.options[this.selectedIndex];
        
        if (selectedOption && selectedOption.value) {
          // Store in data attributes for easy access
          this.dataset.selectedImage = document.getElementById('vehicle-image')?.src || '';
          this.dataset.selectedName = document.getElementById('vehicle-name')?.textContent || '';
          this.dataset.selectedDetails = document.getElementById('vehicle-details')?.textContent || '';
          this.dataset.selectedPrice = document.getElementById('vehicle-price')?.textContent || '';
        }
      });
    }
  });
</script>

<!-- Additional: Ensure validation-booking.js also updates modal data -->
<script>
  // Hook into the existing openPriceCalculator if defined in validation-booking.js
  document.addEventListener('DOMContentLoaded', function() {
    // Wait for all scripts to load
    setTimeout(function() {
      // Check if calculator button exists
      const calculatorButtons = document.querySelectorAll('[onclick*="openPriceCalculator"]');
      
      calculatorButtons.forEach(button => {
        button.addEventListener('click', function(e) {
          // Small delay to ensure modal is open
          setTimeout(function() {
            // Re-load vehicle data
            const vehicleSelect = document.getElementById('vehicle_type');
            
            if (vehicleSelect && vehicleSelect.value) {
              // Trigger change event to update stored data
              vehicleSelect.dispatchEvent(new Event('change'));
              
              // Then load into modal
              setTimeout(function() {
                const modalImage = document.getElementById('modal-vehicle-image');
                const modalName = document.getElementById('modal-vehicle-name');
                const modalDetails = document.getElementById('modal-vehicle-details');
                const modalPrice = document.getElementById('modal-vehicle-price');
                
                const mainImage = document.getElementById('vehicle-image');
                const mainName = document.getElementById('vehicle-name');
                const mainDetails = document.getElementById('vehicle-details');
                const mainPrice = document.getElementById('vehicle-price');
                
                if (mainImage && modalImage && mainImage.src) {
                  modalImage.src = mainImage.src;
                }
                
                if (mainName && modalName && mainName.textContent) {
                  modalName.textContent = mainName.textContent;
                }
                
                if (mainDetails && modalDetails && mainDetails.textContent) {
                  modalDetails.textContent = mainDetails.textContent;
                }
                
                if (mainPrice && modalPrice && mainPrice.textContent) {
                  modalPrice.textContent = mainPrice.textContent;
                }
              }, 100);
            } else {
              console.warn('Please select a vehicle before opening calculator');
            }
          }, 150);
        });
      });
    }, 500);
  });
</script>

<!-- Debug: Log modal vehicle data -->
<script>
  if (window.DEBUG) {
    document.addEventListener('DOMContentLoaded', function() {
      const modal = document.getElementById('price-calculator-modal');
      
      if (modal) {
        const observer = new MutationObserver(function(mutations) {
          if (modal.style.display === 'flex') {
            console.log('=== MODAL VEHICLE DATA ===');
            console.log('Image:', document.getElementById('modal-vehicle-image')?.src);
            console.log('Name:', document.getElementById('modal-vehicle-name')?.textContent);
            console.log('Details:', document.getElementById('modal-vehicle-details')?.textContent);
            console.log('Price:', document.getElementById('modal-vehicle-price')?.textContent);
            console.log('=========================');
          }
        });
        
        observer.observe(modal, {
          attributes: true,
          attributeFilter: ['style']
        });
      }
    });
  }
</script>
  
</body>
</html>
<!-- Enhanced i18n Integration for Error Messages -->
  <script>
    // Wait for i18next to be fully initialized
    document.addEventListener('DOMContentLoaded', function() {
      // Check if i18next is available
      if (typeof window.i18next !== 'undefined') {
        // Listen for language changes
        window.i18next.on('languageChanged', function(lng) {
          console.log('Language changed to:', lng);
          
          // Update any visible error messages
          const errorMessage = document.getElementById('error_message');
          if (errorMessage && errorMessage.style.display !== 'none') {
            const currentText = errorMessage.textContent;
            // Check if it's a translation key
            Object.keys(window.i18next.store.data[lng]?.errors || {}).forEach(key => {
              if (currentText.includes(key)) {
                errorMessage.innerHTML = window.i18next.t('errors.' + key);
              }
            });
          }
        });
      }

      // Add validation messages to translation namespace
      const validationMessages = {
        ro: {
          errors: {
            phone_invalid_length: 'Număr de telefon invalid. Numărul trebuie să conțină cel puțin 8 cifre.',
            phone_invalid_format: 'Format număr de telefon invalid. Vă rugăm introduceți un număr valid.',
            name_required: 'Vă rugăm introduceți numele dvs.',
            email_required: 'Vă rugăm introduceți adresa de email.',
            email_invalid: 'Vă rugăm introduceți o adresă de email validă.',
            phone_required: 'Vă rugăm introduceți numărul de telefon.',
            vehicle_required: 'Vă rugăm selectați un vehicul.',
            pickup_location_required: 'Vă rugăm selectați locația de ridicare.',
            destination_required: 'Vă rugăm selectați destinația.',
            pickup_date_required: 'Vă rugăm selectați data de ridicare.',
            return_date_required: 'Vă rugăm selectați data de returnare.',
            pickup_time_required: 'Vă rugăm selectați ora de ridicare.',
            return_time_required: 'Vă rugăm selectați ora de returnare.',
            invalid_date_range: 'Data de returnare trebuie să fie după data de ridicare.',
            minimum_rental_24h: 'Perioada minimă de închiriere este de 24 ore.',
            form_validation_failed: 'Vă rugăm completați corect toate câmpurile obligatorii.',
            date_required: 'Vă rugăm selectați data.',
            time_required: 'Vă rugăm selectați ora.'
          }
        },
        en: {
          errors: {
            phone_invalid_length: 'Invalid phone number. The number must contain at least 8 digits.',
            phone_invalid_format: 'Invalid phone number format. Please enter a valid phone number.',
            name_required: 'Please enter your name.',
            email_required: 'Please enter your email address.',
            email_invalid: 'Please enter a valid email address.',
            phone_required: 'Please enter your phone number.',
            vehicle_required: 'Please select a vehicle.',
            pickup_location_required: 'Please select a pickup location.',
            destination_required: 'Please select a destination.',
            pickup_date_required: 'Please select a pickup date.',
            return_date_required: 'Please select a return date.',
            pickup_time_required: 'Please select a pickup time.',
            return_time_required: 'Please select a return time.',
            invalid_date_range: 'Return date must be after pickup date.',
            minimum_rental_24h: 'Minimum rental period is 24 hours.',
            form_validation_failed: 'Please fill in all required fields correctly.',
            date_required: 'Please select a date.',
            time_required: 'Please select a time.'
          }
        },
        ru: {
          errors: {
            phone_invalid_length: 'Неверный номер телефона. Номер должен содержать минимум 8 цифр.',
            phone_invalid_format: 'Неверный формат номера телефона. Пожалуйста, введите действительный номер.',
            name_required: 'Пожалуйста, введите ваше имя.',
            email_required: 'Пожалуйста, введите адрес электронной почты.',
            email_invalid: 'Пожалуйста, введите действительный адрес электронной почты.',
            phone_required: 'Пожалуйста, введите номер телефона.',
            vehicle_required: 'Пожалуйста, выберите автомобиль.',
            pickup_location_required: 'Пожалуйста, выберите место получения.',
            destination_required: 'Пожалуйста, выберите пункт назначения.',
            pickup_date_required: 'Пожалуйста, выберите дату получения.',
            return_date_required: 'Пожалуйста, выберите дату возврата.',
            pickup_time_required: 'Пожалуйста, выберите время получения.',
            return_time_required: 'Пожалуйста, выберите время возврата.',
            invalid_date_range: 'Дата возврата должна быть после даты получения.',
            minimum_rental_24h: 'Минимальный период аренды составляет 24 часа.',
            form_validation_failed: 'Пожалуйста, правильно заполните все обязательные поля.',
            date_required: 'Пожалуйста, выберите дату.',
            time_required: 'Пожалуйста, выберите время.'
          }
        }
      };

      // Add translations when i18next is ready
      if (window.i18next && window.i18next.isInitialized) {
        Object.keys(validationMessages).forEach(lang => {
          if (validationMessages[lang].errors) {
            window.i18next.addResourceBundle(lang, 'translation', validationMessages[lang], true, true);
          }
        });
      } else {
        // Wait for initialization
        const checkI18next = setInterval(() => {
          if (window.i18next && window.i18next.isInitialized) {
            clearInterval(checkI18next);
            Object.keys(validationMessages).forEach(lang => {
              if (validationMessages[lang].errors) {
                window.i18next.addResourceBundle(lang, 'translation', validationMessages[lang], true, true);
              }
            });
          }
        }, 100);
        
        // Stop checking after 5 seconds
        setTimeout(() => clearInterval(checkI18next), 5000);
      }
    });
  </script>

  <!-- Form Validation Enhancement with Real-time Feedback -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('booking_form');
      
      if (form) {
        // Real-time validation for all inputs
        const inputs = form.querySelectorAll('input, select, textarea');
        
        inputs.forEach(input => {
          // Add validation on blur (when user leaves field)
          input.addEventListener('blur', function() {
            validateField(this);
          });

          // Remove error styling on input
          input.addEventListener('input', function() {
            if (this.classList.contains('error_input')) {
              this.classList.remove('error_input');
            }
          });
        });

        // Validate individual field
        function validateField(field) {
          const fieldName = field.name || field.id;
          const fieldValue = field.value.trim();

          // Name validation
          if (fieldName === 'name' && fieldValue && fieldValue.length < 2) {
            field.classList.add('error_input');
            return false;
          }

          // Email validation
          if (fieldName === 'email' && fieldValue) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(fieldValue)) {
              field.classList.add('error_input');
              return false;
            }
          }

          // Phone validation
          if (fieldName === 'phone' && fieldValue) {
            const digitsOnly = fieldValue.replace(/\D/g, '');
            if (digitsOnly.length < 8) {
              field.classList.add('error_input');
              return false;
            }
          }

          // Remove error if validation passed
          field.classList.remove('error_input');
          return true;
        }
      }
    });
  </script>

  <!-- Enhanced Tooltip System -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Add tooltips to form fields
      const tooltips = {
        'phone': 'Enter your phone number with country code (e.g., +373XXXXXXXX)',
        'email': 'We will send booking confirmation to this email',
        'pickup_location': 'Select where you want to pick up the vehicle',
        'destination': 'Select where you will return the vehicle',
        'vehicle_type': 'Choose your preferred vehicle from our fleet'
      };

      Object.keys(tooltips).forEach(fieldName => {
        const field = document.getElementById(fieldName) || document.querySelector(`[name="${fieldName}"]`);
        if (field) {
          field.setAttribute('title', tooltips[fieldName]);
          field.setAttribute('data-tooltip', tooltips[fieldName]);
        }
      });
    });
  </script>

  <!-- Smooth Scroll Enhancement -->
  <script>
    // Enhanced smooth scrolling for all anchor links
    document.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          const href = this.getAttribute('href');
          if (href === '#' || href === '#top') {
            e.preventDefault();
            window.scrollTo({
              top: 0,
              behavior: 'smooth'
            });
          } else {
            const target = document.querySelector(href);
            if (target) {
              e.preventDefault();
              target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
              });
            }
          }
        });
      });
    });
  </script>

  <!-- Local Storage Manager for Form Data -->
  <script>
    // Auto-save form data to prevent data loss
    (function() {
      const STORAGE_KEY = 'plusrent_booking_draft';
      const form = document.getElementById('booking_form');
      
      if (form) {
        // Load saved data on page load
        function loadSavedData() {
          try {
            const savedData = localStorage.getItem(STORAGE_KEY);
            if (savedData) {
              const data = JSON.parse(savedData);
              Object.keys(data).forEach(key => {
                const field = form.querySelector(`[name="${key}"]`);
                if (field && field.type !== 'radio') {
                  field.value = data[key];
                } else if (field && field.type === 'radio') {
                  const radioButton = form.querySelector(`[name="${key}"][value="${data[key]}"]`);
                  if (radioButton) {
                    radioButton.checked = true;
                  }
                }
              });
            }
          } catch (error) {
            console.error('Error loading saved form data:', error);
          }
        }

        // Save form data on input
        function saveFormData() {
          try {
            const formData = new FormData(form);
            const data = {};
            for (let [key, value] of formData.entries()) {
              data[key] = value;
            }
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
          } catch (error) {
            console.error('Error saving form data:', error);
          }
        }

        // Clear saved data on successful submission
        function clearSavedData() {
          try {
            localStorage.removeItem(STORAGE_KEY);
          } catch (error) {
            console.error('Error clearing saved data:', error);
          }
        }

        // Debounced save function
        const debouncedSave = debounce(saveFormData, 1000);

        // Load saved data
        loadSavedData();

        // Auto-save on input
        form.addEventListener('input', debouncedSave);
        form.addEventListener('change', debouncedSave);

        // Clear on successful submission
        form.addEventListener('submit', function(e) {
          // Only clear if form is valid and submission is successful
          setTimeout(() => {
            const successMessage = document.getElementById('success_message');
            if (successMessage && successMessage.style.display !== 'none') {
              clearSavedData();
            }
          }, 1000);
        });
      }
    })();
  </script>

  <!-- Print Booking Summary Feature -->
  <script>
    window.printBookingSummary = function() {
      const summaryContent = document.getElementById('booking-summary');
      if (summaryContent) {
        const printWindow = window.open('', '_blank');
        printWindow.document.write(`
          <!DOCTYPE html>
          <html>
          <head>
            <title>PlusRent Booking Summary</title>
            <style>
              body {
                font-family: Arial, sans-serif;
                padding: 40px;
                color: #333;
              }
              h1 {
                color: #667eea;
                border-bottom: 3px solid #667eea;
                padding-bottom: 10px;
              }
              .summary-item {
                margin: 15px 0;
                padding: 10px;
                border-left: 3px solid #f0c040;
                padding-left: 15px;
              }
              .summary-item strong {
                display: inline-block;
                width: 150px;
              }
              @media print {
                body { padding: 20px; }
              }
            </style>
          </head>
          <body>
            <h1>PlusRent - Booking Summary</h1>
            ${summaryContent.innerHTML}
            <p style="margin-top: 30px; font-size: 12px; color: #666;">
              Printed on: ${new Date().toLocaleString()}
            </p>
          </body>
          </html>
        `);
        printWindow.document.close();
        setTimeout(() => {
          printWindow.print();
        }, 250);
      }
    };
  </script>

  <!-- Copy Booking Details Feature -->
  <script>
    window.copyBookingDetails = function() {
      const summaryContent = document.getElementById('booking-summary');
      if (summaryContent) {
        const textContent = summaryContent.innerText;
        
        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(textContent).then(() => {
            window.showUniversalError('Booking details copied to clipboard!');
          }).catch(err => {
            console.error('Failed to copy:', err);
          });
        } else {
          // Fallback for older browsers
          const textArea = document.createElement('textarea');
          textArea.value = textContent;
          textArea.style.position = 'fixed';
          textArea.style.left = '-999999px';
          document.body.appendChild(textArea);
          textArea.select();
          try {
            document.execCommand('copy');
            window.showUniversalError('Booking details copied to clipboard!');
          } catch (err) {
            console.error('Failed to copy:', err);
          }
          document.body.removeChild(textArea);
        }
      }
    };
  </script>

  <!-- Vehicle Comparison Feature -->
  <script>
    // Track selected vehicles for comparison
    window.vehicleComparison = {
      vehicles: [],
      maxVehicles: 3,
      
      addVehicle: function(vehicleData) {
        if (this.vehicles.length >= this.maxVehicles) {
          window.showUniversalError(`You can compare maximum ${this.maxVehicles} vehicles at once.`);
          return false;
        }
        
        const exists = this.vehicles.find(v => v.id === vehicleData.id);
        if (exists) {
          window.showUniversalError('This vehicle is already in comparison.');
          return false;
        }
        
        this.vehicles.push(vehicleData);
        this.updateComparisonUI();
        return true;
      },
      
      removeVehicle: function(vehicleId) {
        this.vehicles = this.vehicles.filter(v => v.id !== vehicleId);
        this.updateComparisonUI();
      },
      
      updateComparisonUI: function() {
        // Update comparison badge/counter if exists
        const badge = document.getElementById('comparison-badge');
        if (badge) {
          badge.textContent = this.vehicles.length;
          badge.style.display = this.vehicles.length > 0 ? 'block' : 'none';
        }
      },
      
      showComparison: function() {
        if (this.vehicles.length < 2) {
          window.showUniversalError('Please select at least 2 vehicles to compare.');
          return;
        }
        
        // Create comparison modal or redirect to comparison page
        console.log('Comparing vehicles:', this.vehicles);
        // Implementation depends on your comparison page design
      }
    };
  </script>

  <!-- Newsletter Signup (if needed) -->
  <script>
    window.subscribeNewsletter = function(email) {
      if (!email) {
        window.showUniversalError('Please enter your email address.');
        return;
      }
      
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        window.showUniversalError('Please enter a valid email address.');
        return;
      }
      
      // Send to backend
      fetch(`${window.API_BASE_URL}/api/newsletter/subscribe`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ email })
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          window.showUniversalError('Thank you for subscribing to our newsletter!');
        } else {
          window.showUniversalError(data.message || 'Failed to subscribe. Please try again.');
        }
      })
      .catch(error => {
        console.error('Newsletter subscription error:', error);
        window.showUniversalError('An error occurred. Please try again later.');
      });
    };
  </script>

  <!-- Cookie Consent (GDPR Compliance) -->
  <script>
    (function() {
      const COOKIE_CONSENT_KEY = 'plusrent_cookie_consent';
      
      function showCookieConsent() {
        const consent = localStorage.getItem(COOKIE_CONSENT_KEY);
        if (consent) return;
        
        const banner = document.createElement('div');
        banner.style.cssText = `
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background: linear-gradient(135deg, #1e293b, #334155);
          color: white;
          padding: 20px;
          z-index: 9999;
          box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 20px;
          flex-wrap: wrap;
        `;
        
        banner.innerHTML = `
          <div style="flex: 1; min-width: 300px;">
            <p style="margin: 0; font-size: 14px; line-height: 1.6;">
              We use cookies to improve your experience on our website. By continuing to browse, you agree to our use of cookies.
              <a href="/privacy-policy" style="color: #f0c040; text-decoration: underline;">Learn more</a>
            </p>
          </div>
          <div style="display: flex; gap: 10px;">
            <button onclick="acceptCookies()" style="
              background: linear-gradient(135deg, #10b981, #059669);
              color: white;
              border: none;
              padding: 10px 20px;
              border-radius: 8px;
              font-weight: 600;
              cursor: pointer;
              transition: all 0.3s ease;
            ">Accept</button>
            <button onclick="declineCookies()" style="
              background: transparent;
              color: white;
              border: 2px solid rgba(255, 255, 255, 0.3);
              padding: 10px 20px;
              border-radius: 8px;
              font-weight: 600;
              cursor: pointer;
              transition: all 0.3s ease;
            ">Decline</button>
          </div>
        `;
        
        document.body.appendChild(banner);
        
        window.acceptCookies = function() {
          localStorage.setItem(COOKIE_CONSENT_KEY, 'accepted');
          banner.remove();
        };
        
        window.declineCookies = function() {
          localStorage.setItem(COOKIE_CONSENT_KEY, 'declined');
          banner.remove();
        };
      }
      
      // Show after 2 seconds
      setTimeout(showCookieConsent, 2000);
    })();
  </script>

  <!-- Back to Top Enhancement -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const backToTop = document.getElementById('back-to-top');
      
      if (backToTop) {
        // Show/hide based on scroll position
        window.addEventListener('scroll', function() {
          if (window.pageYOffset > 300) {
            backToTop.style.display = 'block';
            backToTop.style.opacity = '1';
          } else {
            backToTop.style.opacity = '0';
            setTimeout(() => {
              if (window.pageYOffset <= 300) {
                backToTop.style.display = 'none';
              }
            }, 300);
          }
        });
        
        // Smooth scroll on click
        backToTop.addEventListener('click', function(e) {
          e.preventDefault();
          window.scrollTo({
            top: 0,
            behavior: 'smooth'
          });
        });
      }
    });
  </script>

  <!-- Social Share Functionality -->
  <script>
    window.socialShare = {
      facebook: function(url, title) {
        const shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
        window.open(shareUrl, '_blank', 'width=600,height=400');
      },
      
      twitter: function(url, title) {
        const shareUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(title)}`;
        window.open(shareUrl, '_blank', 'width=600,height=400');
      },
      
      whatsapp: function(url, title) {
        const shareUrl = `https://wa.me/?text=${encodeURIComponent(title + ' ' + url)}`;
        window.open(shareUrl, '_blank');
      },
      
      email: function(url, title) {
        const mailtoUrl = `mailto:?subject=${encodeURIComponent(title)}&body=${encodeURIComponent(url)}`;
        window.location.href = mailtoUrl;
      },
      
      copyLink: function(url) {
        if (navigator.clipboard) {
          navigator.clipboard.writeText(url).then(() => {
            window.showUniversalError('Link copied to clipboard!');
          });
        }
      }
    };
  </script>

  <!-- Progressive Web App (PWA) Support -->
  <script>
    // Register service worker if supported
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        // Uncomment when you have a service worker file
        // navigator.serviceWorker.register('/sw.js').then(function(registration) {
        //   console.log('ServiceWorker registration successful');
        // }).catch(function(err) {
        //   console.log('ServiceWorker registration failed: ', err);
        // });
      });
    }

    // Handle install prompt
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      
      // Show install button if you have one
      const installButton = document.getElementById('install-app-button');
      if (installButton) {
        installButton.style.display = 'block';
        installButton.addEventListener('click', () => {
          installButton.style.display = 'none';
          deferredPrompt.prompt();
          deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === 'accepted') {
              console.log('User accepted the install prompt');
            }
            deferredPrompt = null;
          });
        });
      }
    });
  </script>

  <!-- Keyboard Shortcuts -->
  <script>
    document.addEventListener('keydown', function(e) {
      // Ctrl/Cmd + K to open search (if you have search)
      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        // Open search modal
        console.log('Search shortcut triggered');
      }
      
      // Ctrl/Cmd + B to open booking form
      if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        const bookingForm = document.getElementById('booking_form');
        if (bookingForm) {
          bookingForm.scrollIntoView({ behavior: 'smooth' });
          setTimeout(() => {
            const firstInput = bookingForm.querySelector('input, select');
            if (firstInput) firstInput.focus();
          }, 500);
        }
      }
    });
  </script>

  <!-- Live Chat Integration Point -->
  <script>
    // Placeholder for live chat integration
    // You can integrate services like Tawk.to, Intercom, or custom chat
    window.initLiveChat = function() {
      // Example: Tawk.to integration
      // var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
      // (function(){
      //   var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
      //   s1.async=true;
      //   s1.src='https://embed.tawk.to/YOUR_PROPERTY_ID/YOUR_WIDGET_ID';
      //   s1.charset='UTF-8';
      //   s1.setAttribute('crossorigin','*');
      //   s0.parentNode.insertBefore(s1,s0);
      // })();
    };
  </script>

  <!-- Currency Converter (if supporting multiple currencies) -->
  <script>
    window.currencyConverter = {
      rates: {
        EUR: 1,
        USD: 1.10,
        MDL: 19.5,
        RON: 4.95
      },
      currentCurrency: 'EUR',
      
      convert: function(amount, from, to) {
        const fromRate = this.rates[from] || 1;
        const toRate = this.rates[to] || 1;
        return (amount / fromRate) * toRate;
      },
      
      format: function(amount, currency) {
        const symbols = {
          EUR: '€',
          USD: '$',
          MDL: 'MDL',
          RON: 'RON'
        };
        return `${symbols[currency] || currency}${amount.toFixed(2)}`;
      },
      
      updatePrices: function(newCurrency) {
        this.currentCurrency = newCurrency;
        // Update all price displays on page
        document.querySelectorAll('[data-price]').forEach(el => {
          const basePrice = parseFloat(el.dataset.price);
          const convertedPrice = this.convert(basePrice, 'EUR', newCurrency);
          el.textContent = this.format(convertedPrice, newCurrency);
        });
      }
    };
  </script>

  <!-- Favorites/Wishlist System -->
  <script>
    window.favoritesManager = {
      favorites: [],
      storageKey: 'plusrent_favorites',
      
      init: function() {
        const saved = localStorage.getItem(this.storageKey);
        if (saved) {
          try {
            this.favorites = JSON.parse(saved);
          } catch (e) {
            this.favorites = [];
          }
        }
        this.updateUI();
      },
      
      add: function(vehicleId) {
        if (!this.favorites.includes(vehicleId)) {
          this.favorites.push(vehicleId);
          this.save();
          this.updateUI();
          window.showUniversalError('Vehicle added to favorites!');
          return true;
        }
        return false;
      },
      
      remove: function(vehicleId) {
        this.favorites = this.favorites.filter(id => id !== vehicleId);
        this.save();
        this.updateUI();
        window.showUniversalError('Vehicle removed from favorites.');
      },
      
      toggle: function(vehicleId) {
        if (this.favorites.includes(vehicleId)) {
          this.remove(vehicleId);
        } else {
          this.add(vehicleId);
        }
      },
      
      has: function(vehicleId) {
        return this.favorites.includes(vehicleId);
      },
      
      save: function() {
        localStorage.setItem(this.storageKey, JSON.stringify(this.favorites));
      },
      
      updateUI: function() {
        // Update favorite icons on page
        document.querySelectorAll('[data-vehicle-id]').forEach(el => {
          const vehicleId = el.dataset.vehicleId;
          const isFavorite = this.has(vehicleId);
          const icon = el.querySelector('.favorite-icon');
          if (icon) {
            icon.classList.toggle('active', isFavorite);
          }
        });
        
        // Update favorites counter
        const counter = document.getElementById('favorites-counter');
        if (counter) {
          counter.textContent = this.favorites.length;
          counter.style.display = this.favorites.length > 0 ? 'block' : 'none';
        }
      }
    };
    
    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
      window.favoritesManager.init();
    });
  </script>

  <!-- Recently Viewed Vehicles -->
  <script>
    window.recentlyViewed = {
      vehicles: [],
      maxItems: 5,
      storageKey: 'plusrent_recently_viewed',
      
      init: function() {
        const saved = localStorage.getItem(this.storageKey);
        if (saved) {
          try {
            this.vehicles = JSON.parse(saved);
          } catch (e) {
            this.vehicles = [];
          }
        }
      },
      
      add: function(vehicleData) {
        // Remove if already exists
        this.vehicles = this.vehicles.filter(v => v.id !== vehicleData.id);
        
        // Add to beginning
        this.vehicles.unshift(vehicleData);
        
        // Keep only max items
        if (this.vehicles.length > this.maxItems) {
          this.vehicles = this.vehicles.slice(0, this.maxItems);
        }
        
        this.save();
      },
      
      save: function() {
        localStorage.setItem(this.storageKey, JSON.stringify(this.vehicles));
      },
      
      get: function() {
        return this.vehicles;
      }
    };
    
    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
      window.recentlyViewed.init();
    });
  </script>

  <!-- Final Performance Optimization -->
  <script>
    // Preload critical resources
    function preloadCriticalResources() {
      const criticalImages = document.querySelectorAll('img[data-critical="true"]');
      criticalImages.forEach(img => {
        const link = document.createElement('link');
        link.rel = 'preload';
        link.as = 'image';
        link.href = img.src;
        document.head.appendChild(link);
      });
    }

    // Defer non-critical scripts
    function deferNonCriticalScripts() {
      const scripts = document.querySelectorAll('script[data-defer="true"]');
      scripts.forEach(script => {
        script.defer = true;
      });
    }

    // Initialize performance optimizations
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', function() {
        preloadCriticalResources();
        deferNonCriticalScripts();
      });
    } else {
      preloadCriticalResources();
      deferNonCriticalScripts();
    }
  </script>

</body>
</html>
<!-- Emergency Fallback Handler -->
  <script>
    // Global error handler for uncaught errors
    window.addEventListener('error', function(event) {
      console.error('Global error caught:', event.error);
      
      // Don't show error popup for script loading errors
      if (event.message && event.message.includes('Script error')) {
        return;
      }
      
      // Show user-friendly error message
      const errorMsg = 'An unexpected error occurred. Please refresh the page and try again.';
      if (typeof window.showUniversalError === 'function') {
        window.showUniversalError(errorMsg);
      } else {
        console.error(errorMsg);
      }
    });

    // Handle promise rejections
    window.addEventListener('unhandledrejection', function(event) {
      console.error('Unhandled promise rejection:', event.reason);
      event.preventDefault();
    });
  </script>

  <!-- Network Status Monitor -->
  <script>
    (function() {
      let isOnline = navigator.onLine;
      
      function updateOnlineStatus() {
        const wasOffline = !isOnline;
        isOnline = navigator.onLine;
        
        if (isOnline && wasOffline) {
          // Just came back online
          window.showUniversalError('Connection restored. You are back online!');
          
          // Retry any failed requests
          if (typeof window.retryFailedRequests === 'function') {
            window.retryFailedRequests();
          }
        } else if (!isOnline) {
          // Just went offline
          window.showUniversalError('No internet connection. Please check your network.');
        }
      }
      
      window.addEventListener('online', updateOnlineStatus);
      window.addEventListener('offline', updateOnlineStatus);
      
      // Check connection quality periodically
      setInterval(function() {
        if (navigator.onLine) {
          // Ping test (optional)
          fetch(window.API_BASE_URL + '/api/health', {
            method: 'HEAD',
            cache: 'no-store'
          }).catch(() => {
            console.warn('Connection quality issue detected');
          });
        }
      }, 30000); // Every 30 seconds
    })();
  </script>

  <!-- Browser Compatibility Warnings -->
  <script>
    (function() {
      // Check for minimum browser requirements
      const isCompatible = (function() {
        // Check for essential features
        return (
          'Promise' in window &&
          'fetch' in window &&
          'localStorage' in window &&
          'addEventListener' in window
        );
      })();
      
      if (!isCompatible) {
        const warning = document.createElement('div');
        warning.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: linear-gradient(135deg, #fbbf24, #f59e0b);
          color: #78350f;
          padding: 15px;
          text-align: center;
          z-index: 10001;
          font-weight: 600;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        `;
        warning.innerHTML = `
          ⚠️ Your browser is outdated. Please update to the latest version for the best experience.
          <button onclick="this.parentElement.remove()" style="
            margin-left: 20px;
            background: white;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            color: #78350f;
          ">Dismiss</button>
        `;
        document.body.insertBefore(warning, document.body.firstChild);
      }
    })();
  </script>

  <!-- Dark Mode Toggle (Optional Feature) -->
  <script>
    window.darkMode = {
      enabled: false,
      storageKey: 'plusrent_dark_mode',
      
      init: function() {
        const saved = localStorage.getItem(this.storageKey);
        if (saved === 'true') {
          this.enable();
        }
      },
      
      toggle: function() {
        if (this.enabled) {
          this.disable();
        } else {
          this.enable();
        }
      },
      
      enable: function() {
        this.enabled = true;
        document.body.classList.add('dark-mode');
        localStorage.setItem(this.storageKey, 'true');
        this.updateToggleButton();
      },
      
      disable: function() {
        this.enabled = false;
        document.body.classList.remove('dark-mode');
        localStorage.setItem(this.storageKey, 'false');
        this.updateToggleButton();
      },
      
      updateToggleButton: function() {
        const button = document.getElementById('dark-mode-toggle');
        if (button) {
          button.setAttribute('aria-pressed', this.enabled);
          button.innerHTML = this.enabled ? '☀️' : '🌙';
        }
      }
    };
    
    // Initialize dark mode if previously enabled
    // document.addEventListener('DOMContentLoaded', function() {
    //   window.darkMode.init();
    // });
  </script>

  <!-- Font Size Adjuster (Accessibility) -->
  <script>
    window.fontSizeAdjuster = {
      currentSize: 100,
      minSize: 80,
      maxSize: 150,
      step: 10,
      storageKey: 'plusrent_font_size',
      
      init: function() {
        const saved = localStorage.getItem(this.storageKey);
        if (saved) {
          this.currentSize = parseInt(saved);
          this.apply();
        }
      },
      
      increase: function() {
        if (this.currentSize < this.maxSize) {
          this.currentSize += this.step;
          this.apply();
          this.save();
        }
      },
      
      decrease: function() {
        if (this.currentSize > this.minSize) {
          this.currentSize -= this.step;
          this.apply();
          this.save();
        }
      },
      
      reset: function() {
        this.currentSize = 100;
        this.apply();
        this.save();
      },
      
      apply: function() {
        document.documentElement.style.fontSize = this.currentSize + '%';
      },
      
      save: function() {
        localStorage.setItem(this.storageKey, this.currentSize);
      }
    };
  </script>

  <!-- Idle Timeout Warning -->
  <script>
    (function() {
      let idleTime = 0;
      const maxIdleMinutes = 30;
      let warningShown = false;
      
      // Increment idle time counter every minute
      const idleInterval = setInterval(function() {
        idleTime++;
        
        // Show warning at 25 minutes
        if (idleTime >= 25 && !warningShown && document.getElementById('booking_form')) {
          warningShown = true;
          const form = document.getElementById('booking_form');
          if (form && form.querySelector('input:not([value=""])')) {
            window.showUniversalError('Your session will expire in 5 minutes due to inactivity. Your form data has been saved.');
          }
        }
        
        // Clear saved form data at 30 minutes
        if (idleTime >= maxIdleMinutes) {
          warningShown = false;
          // Optional: clear saved form data
          // localStorage.removeItem('plusrent_booking_draft');
        }
      }, 60000); // 1 minute
      
      // Reset idle time on user activity
      function resetIdleTime() {
        idleTime = 0;
        warningShown = false;
      }
      
      document.addEventListener('mousemove', resetIdleTime);
      document.addEventListener('keypress', resetIdleTime);
      document.addEventListener('click', resetIdleTime);
      document.addEventListener('scroll', resetIdleTime);
      document.addEventListener('touchstart', resetIdleTime);
    })();
  </script>

  <!-- Page Visibility API - Pause/Resume Operations -->
  <script>
    document.addEventListener('visibilitychange', function() {
      if (document.hidden) {
        // Page is hidden - pause unnecessary operations
        console.log('Page hidden - pausing operations');
        // Stop animations, pause videos, etc.
      } else {
        // Page is visible again - resume operations
        console.log('Page visible - resuming operations');
        // Resume animations, etc.
      }
    });
  </script>

  <!-- Geolocation Services (Optional) -->
  <script>
    window.geolocationService = {
      getCurrentPosition: function(successCallback, errorCallback) {
        if ('geolocation' in navigator) {
          navigator.geolocation.getCurrentPosition(
            function(position) {
              const coords = {
                latitude: position.coords.latitude,
                longitude: position.coords.longitude,
                accuracy: position.coords.accuracy
              };
              if (successCallback) successCallback(coords);
            },
            function(error) {
              console.error('Geolocation error:', error);
              if (errorCallback) errorCallback(error);
            },
            {
              enableHighAccuracy: false,
              timeout: 5000,
              maximumAge: 0
            }
          );
        } else {
          console.warn('Geolocation not supported');
          if (errorCallback) errorCallback(new Error('Geolocation not supported'));
        }
      },
      
      findNearestLocation: function(coords) {
        // Find nearest pickup location based on user's coordinates
        const locations = [
          { name: 'Chisinau Airport', lat: 46.9277, lng: 28.9310 },
          { name: 'Our Office', lat: 47.0105, lng: 28.8638 },
          { name: 'Iasi Airport', lat: 47.1785, lng: 27.6206 }
        ];
        
        // Calculate distances and find nearest
        // This is a simplified version - you might want to use a proper distance calculation
        const nearest = locations.reduce((prev, curr) => {
          const prevDist = Math.abs(prev.lat - coords.latitude) + Math.abs(prev.lng - coords.longitude);
          const currDist = Math.abs(curr.lat - coords.latitude) + Math.abs(curr.lng - coords.longitude);
          return currDist < prevDist ? curr : prev;
        });
        
        return nearest;
      }
    };
  </script>

  <!-- Voice Search/Input (Experimental) -->
  <script>
    window.voiceInput = {
      recognition: null,
      isListening: false,
      
      init: function() {
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
          const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
          this.recognition = new SpeechRecognition();
          this.recognition.continuous = false;
          this.recognition.interimResults = false;
          this.recognition.lang = 'ro-RO'; // Default to Romanian
          
          this.recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript;
            this.handleResult(transcript);
          };
          
          this.recognition.onerror = (event) => {
            console.error('Speech recognition error:', event.error);
            this.isListening = false;
          };
          
          this.recognition.onend = () => {
            this.isListening = false;
          };
        }
      },
      
      start: function(targetField) {
        if (this.recognition && !this.isListening) {
          this.targetField = targetField;
          this.recognition.start();
          this.isListening = true;
          window.showUniversalError('Listening... Please speak now.');
        }
      },
      
      stop: function() {
        if (this.recognition && this.isListening) {
          this.recognition.stop();
          this.isListening = false;
        }
      },
      
      handleResult: function(transcript) {
        if (this.targetField) {
          const field = document.getElementById(this.targetField) || 
                       document.querySelector(`[name="${this.targetField}"]`);
          if (field) {
            field.value = transcript;
            field.dispatchEvent(new Event('input', { bubbles: true }));
          }
        }
        window.showUniversalError('Voice input received: ' + transcript);
      }
    };
    
    // Initialize voice input if supported
    // document.addEventListener('DOMContentLoaded', function() {
    //   window.voiceInput.init();
    // });
  </script>

  <!-- A/B Testing Framework (for marketing) -->
  <script>
    window.abTesting = {
      tests: {},
      storageKey: 'plusrent_ab_tests',
      
      init: function() {
        const saved = localStorage.getItem(this.storageKey);
        if (saved) {
          try {
            this.tests = JSON.parse(saved);
          } catch (e) {
            this.tests = {};
          }
        }
      },
      
      assignVariant: function(testName, variants) {
        if (this.tests[testName]) {
          return this.tests[testName];
        }
        
        const randomVariant = variants[Math.floor(Math.random() * variants.length)];
        this.tests[testName] = randomVariant;
        this.save();
        
        // Track assignment (send to analytics)
        this.trackAssignment(testName, randomVariant);
        
        return randomVariant;
      },
      
      getVariant: function(testName) {
        return this.tests[testName];
      },
      
      save: function() {
        localStorage.setItem(this.storageKey, JSON.stringify(this.tests));
      },
      
      trackAssignment: function(testName, variant) {
        // Send to your analytics platform
        if (typeof trackEvent === 'function') {
          trackEvent('AB_Test', 'assignment', testName + ':' + variant);
        }
      }
    };
  </script>

  <!-- Session Recording Helper (for debugging) -->
  <script>
    window.sessionRecorder = {
      events: [],
      maxEvents: 100,
      recording: false,
      
      start: function() {
        if (this.recording) return;
        this.recording = true;
        this.events = [];
        
        // Record clicks
        document.addEventListener('click', this.recordClick.bind(this), true);
        
        // Record form submissions
        document.addEventListener('submit', this.recordSubmit.bind(this), true);
        
        // Record errors
        window.addEventListener('error', this.recordError.bind(this), true);
      },
      
      stop: function() {
        this.recording = false;
      },
      
      recordClick: function(e) {
        if (!this.recording) return;
        this.addEvent('click', {
          target: this.getElementPath(e.target),
          timestamp: Date.now()
        });
      },
      
      recordSubmit: function(e) {
        if (!this.recording) return;
        this.addEvent('submit', {
          form: e.target.id || e.target.name,
          timestamp: Date.now()
        });
      },
      
      recordError: function(e) {
        if (!this.recording) return;
        this.addEvent('error', {
          message: e.message,
          timestamp: Date.now()
        });
      },
      
      addEvent: function(type, data) {
        this.events.push({ type, data });
        if (this.events.length > this.maxEvents) {
          this.events.shift();
        }
      },
      
      getElementPath: function(element) {
        const path = [];
        while (element && element.nodeType === Node.ELEMENT_NODE) {
          let selector = element.nodeName.toLowerCase();
          if (element.id) {
            selector += '#' + element.id;
            path.unshift(selector);
            break;
          } else if (element.className) {
            selector += '.' + element.className.split(' ').join('.');
          }
          path.unshift(selector);
          element = element.parentNode;
        }
        return path.join(' > ');
      },
      
      export: function() {
        return JSON.stringify(this.events, null, 2);
      }
    };
  </script>

  <!-- Feature Flags System -->
  <script>
    window.featureFlags = {
      flags: {
        'dark_mode': false,
        'voice_input': false,
        'comparison_tool': true,
        'favorites': true,
        'newsletter': true,
        'live_chat': false
      },
      
      isEnabled: function(flagName) {
        return this.flags[flagName] === true;
      },
      
      enable: function(flagName) {
        this.flags[flagName] = true;
      },
      
      disable: function(flagName) {
        this.flags[flagName] = false;
      },
      
      loadFromServer: function() {
        // Fetch feature flags from server
        fetch(window.API_BASE_URL + '/api/feature-flags')
          .then(response => response.json())
          .then(data => {
            if (data.flags) {
              this.flags = { ...this.flags, ...data.flags };
            }
          })
          .catch(error => {
            console.error('Failed to load feature flags:', error);
          });
      }
    };
    
    // Load feature flags on page load
    // document.addEventListener('DOMContentLoaded', function() {
    //   window.featureFlags.loadFromServer();
    // });
  </script>

  <!-- Performance Metrics Tracking -->
  <script>
    (function() {
      // Track page load performance
      window.addEventListener('load', function() {
        setTimeout(function() {
          if (window.performance && window.performance.timing) {
            const timing = window.performance.timing;
            const metrics = {
              pageLoadTime: timing.loadEventEnd - timing.navigationStart,
              domReadyTime: timing.domContentLoadedEventEnd - timing.navigationStart,
              connectTime: timing.responseEnd - timing.requestStart,
              renderTime: timing.domComplete - timing.domLoading
            };
            
            console.log('Performance Metrics:', metrics);
            
            // Send to analytics
            if (typeof trackEvent === 'function') {
              trackEvent('Performance', 'page_load', 'time_ms', metrics.pageLoadTime);
            }
          }
        }, 0);
      });
      
      // Track time to first interaction
      let firstInteraction = null;
      ['click', 'keydown', 'touchstart'].forEach(eventType => {
        document.addEventListener(eventType, function() {
          if (!firstInteraction && window.performance) {
            firstInteraction = window.performance.now();
            console.log('Time to first interaction:', firstInteraction + 'ms');
          }
        }, { once: true, passive: true });
      });
    })();
  </script>

  <!-- Consent Management for Marketing -->
  <script>
    window.consentManager = {
      consents: {
        necessary: true,
        analytics: false,
        marketing: false
      },
      storageKey: 'plusrent_consents',
      
      init: function() {
        const saved = localStorage.getItem(this.storageKey);
        if (saved) {
          try {
            this.consents = JSON.parse(saved);
          } catch (e) {
            this.consents = { necessary: true, analytics: false, marketing: false };
          }
        }
        this.applyConsents();
      },
      
      updateConsent: function(type, value) {
        this.consents[type] = value;
        this.save();
        this.applyConsents();
      },
      
      save: function() {
        localStorage.setItem(this.storageKey, JSON.stringify(this.consents));
      },
      
      applyConsents: function() {
        // Enable/disable analytics based on consent
        if (this.consents.analytics) {
          // Initialize analytics
          console.log('Analytics enabled');
        } else {
          // Disable analytics
          console.log('Analytics disabled');
        }
        
        // Enable/disable marketing cookies based on consent
        if (this.consents.marketing) {
          // Initialize marketing pixels
          console.log('Marketing enabled');
        } else {
          // Disable marketing
          console.log('Marketing disabled');
        }
      }
    };
  </script>

  <!-- Final Initialization -->
  <script>
    // Initialize all systems when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      console.log('PlusRent website fully loaded and initialized');
      
      // Initialize consent manager
      // window.consentManager.init();
      
      // Track page view
      if (typeof trackEvent === 'function') {
        trackEvent('PageView', 'view', window.location.pathname);
      }
      
      // Log load time
      if (window.performance && window.performance.timing) {
        const loadTime = window.performance.timing.loadEventEnd - window.performance.timing.navigationStart;
        console.log('Page load time:', loadTime + 'ms');
      }
      
      // Check for updates (if using service worker)
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.ready.then(function(registration) {
          registration.update();
        });
      }
    });
  </script>

  <!-- Debug Mode Toggle (for development) -->
  <script>
    // Press Ctrl+Shift+D to toggle debug mode
    document.addEventListener('keydown', function(e) {
      if (e.ctrlKey && e.shiftKey && e.key === 'D') {
        const isDebug = localStorage.getItem('plusrent_debug') === 'true';
        localStorage.setItem('plusrent_debug', !isDebug);
        console.log('Debug mode:', !isDebug ? 'ENABLED' : 'DISABLED');
        window.showUniversalError('Debug mode ' + (!isDebug ? 'enabled' : 'disabled'));
        
        if (!isDebug) {
          // Enable verbose logging
          window.DEBUG = true;
          console.log('Verbose logging enabled');
        } else {
          window.DEBUG = false;
        }
      }
    });
    
    // Check if debug mode is enabled
    if (localStorage.getItem('plusrent_debug') === 'true') {
      window.DEBUG = true;
      console.log('%c🔧 DEBUG MODE ACTIVE', 'background: #667eea; color: white; padding: 10px; font-size: 16px; font-weight: bold;');
    }
  </script>

  <!-- Thank You Message -->
  <script>
    console.log('%cPlusRent', 'font-size: 48px; font-weight: bold; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent;');
    console.log('%cCar Rental Made Easy 🚗', 'font-size: 16px; color: #667eea;');
    console.log('%c© 2025 PlusRent - All Rights Reserved', 'font-size: 12px; color: #999;');
  </script>

</body>
</html>
